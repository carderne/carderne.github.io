{
    "db": [
        {
            "meta": {
                "exported_on": 1545053493543,
                "version": "2.2.0"
            },
            "data": {
                "migrations_lock": [
                    {
                        "lock_key": "km01",
                        "locked": 0,
                        "acquired_at": "2018-10-08 17:52:19",
                        "released_at": "2018-10-08 17:52:24"
                    }
                ],
                "migrations": [
                    {
                        "id": 1,
                        "name": "1-create-tables.js",
                        "version": "init",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 2,
                        "name": "2-create-fixtures.js",
                        "version": "init",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 3,
                        "name": "1-post-excerpt.js",
                        "version": "1.3",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 4,
                        "name": "1-codeinjection-post.js",
                        "version": "1.4",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 5,
                        "name": "1-og-twitter-post.js",
                        "version": "1.5",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 6,
                        "name": "1-add-backup-client.js",
                        "version": "1.7",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 7,
                        "name": "1-add-permissions-redirect.js",
                        "version": "1.9",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 8,
                        "name": "1-custom-template-post.js",
                        "version": "1.13",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 9,
                        "name": "2-theme-permissions.js",
                        "version": "1.13",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 10,
                        "name": "1-add-webhooks-table.js",
                        "version": "1.18",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 11,
                        "name": "1-webhook-permissions.js",
                        "version": "1.19",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 12,
                        "name": "1-remove-settings-keys.js",
                        "version": "1.20",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 13,
                        "name": "1-add-contributor-role.js",
                        "version": "1.21",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 14,
                        "name": "1-multiple-authors-DDL.js",
                        "version": "1.22",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 15,
                        "name": "1-multiple-authors-DML.js",
                        "version": "1.22",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 16,
                        "name": "1-update-koenig-beta-html.js",
                        "version": "1.25",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 17,
                        "name": "2-demo-post.js",
                        "version": "1.25",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 18,
                        "name": "1-rename-amp-column.js",
                        "version": "2.0",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 19,
                        "name": "2-update-posts.js",
                        "version": "2.0",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 20,
                        "name": "3-remove-koenig-labs.js",
                        "version": "2.0",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 21,
                        "name": "4-permalink-setting.js",
                        "version": "2.0",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 22,
                        "name": "5-remove-demo-post.js",
                        "version": "2.0",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 23,
                        "name": "6-replace-fixture-posts.js",
                        "version": "2.0",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 24,
                        "name": "1-add-sessions-table.js",
                        "version": "2.2",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 25,
                        "name": "2-add-integrations-and-api-key-tables.js",
                        "version": "2.2",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 26,
                        "name": "3-insert-admin-integration-role.js",
                        "version": "2.2",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 27,
                        "name": "4-insert-integration-and-api-key-permissions.js",
                        "version": "2.2",
                        "currentVersion": "2.2"
                    },
                    {
                        "id": 28,
                        "name": "5-add-mobiledoc-revisions-table.js",
                        "version": "2.2",
                        "currentVersion": "2.2"
                    }
                ],
                "posts": [
                    {
                        "id": "5bbc64227cc70a140e7fd10e",
                        "uuid": "8ad26f7c-ae55-441e-a46c-eace6191efd9",
                        "title": "Primero, somos tontos (firstly, we're fools)",
                        "slug": "primero-somos-tontos",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2018/10/dec25---01-after-deciding-we-needed-more-time-for-the-summit--small-hike-to-a-mini-peak.JPG\",\"caption\":\"Left to right: Michael Kloos, Chris Arderne, Rick Kotze\",\"cardWidth\":\"\"}],[\"image\",{\"src\":\"/content/images/2018/10/dec31---04-looks-like-I-have-a-huge-handlebar-moustache.JPG\"}],[\"image\",{\"src\":\"/content/images/2018/10/dec28---11-back-at-camp-with-boots-around-my-neck.JPG\"}],[\"image\",{\"src\":\"/content/images/2018/10/IMG_0993.JPG\"}],[\"image\",{\"src\":\"/content/images/2018/10/dec28---02-popocatepetl-entertaining-us-in-the-early-morning-hours.JPG\"}],[\"image\",{\"src\":\"/content/images/2018/10/IMG_1027.JPG\"}],[\"image\",{\"src\":\"/content/images/2018/10/dec28---08-back-onto-the-glacier.JPG\"}],[\"image\",{\"src\":\"/content/images/2018/10/IMG_1169.JPG\",\"cardWidth\":\"\"}]],\"markups\":[[\"em\"],[\"a\",[\"href\",\"https://pangaeaproject.org/primero-somos-tontos-firstly-were-fools/\"]]],\"sections\":[[10,0],[1,\"p\",[[0,[],0,\"We knew this already, but our three weeks in Mexico drove the message home on an almost daily basis. This is the story of three South African amigos fumbling their way up a few volcanoes and some jagged rock faces in the land of chillies, tortillas, piñatas and moustaches.\"]]],[10,1],[1,\"p\",[[0,[],0,\"The plan was simple enough: keep the plan modest, and figure the details out when we get there... How difficult could two volcanoes and some rocks be? Three objectives, and three weeks to accomplish them. The plan (if it could be called that) was for Rick and Michael to head straight to the primary objective and highest peak in Mexico, Pico de Orizaba. They would start figuring things out while waiting to hear whether Chris (whose passport was precariously full) would be able to enter Mexico at all.\"]]],[1,\"p\",[[0,[],0,\"Looking back on it, it’s classic hubris. With Andean experience above 6 000 m, Chris felt confident the altitude would be no obstacle. Having been in the high 5 000s in the Cordillera Blanca, Michael thought he knew what he was in for. Only Rick, having suffered up Elbrus, was properly prepared to suffer again. We semi-confidently set Christmas day for our summit attempt, just four days from sea level.\"]]],[1,\"p\",[[0,[],0,\"And one by one we succumbed. A strenuous hike at 3 000 m laid Rick low. Our first acclimatisation hike to 4 800 m got Chris. And the next day Michael was brought down at the same height. It was a sobering blow for the Supertramps. Other people were passing through base camp and reaching the summit - most of them looking haggard and miserable on the way down. We decided that wasn’t the summit story we wanted. We wanted to get to the summit on our terms: quickly, confidently, and with the energy to enjoy it and be safe.\"]]],[10,2],[10,3],[1,\"p\",[[0,[],0,\"So, on Christmas day, we made a tough decision: we bailed. After a rest back in town, we ate some beans and said hasta luego to Orizaba, and took the first of the buses that would bring us to Iztaccíhuatl, Mexico’s third highest peak. (Popocatépetl, the second, is currently unclimbable due to volcanic activity.) We’d been told Izta was more or less a walk up, so we stashed our technical gear in the small town of Santiago and caught a minibus taxi to the dusty base camp. In between mouthfuls of the trip’s worst tacos, we saw hikers trudging off the mountain - fully geared up with crampons and helmets...\"]]],[1,\"p\",[[0,[],0,\"There we were, getting ready for a short sleep and an early start up an easy mountain. And once again our over-confidence and poor planning stymied us. Morale hit an all-time low, and we regrouped in the dust-covered tent to gather our thoughts. The prospect of no Mexican summits seemed all too possible, and all too much to handle. Eventually we were able to dry our eyes and make a plan. Michael would hitchhike to Amecameca to rent some crampons, Chris would hitch to Santiago to fetch the other gear, and Rick would look after the dusty-getting-dustier tent. Finally, we could have our pre-summit dinner and go to bed.\"]]],[1,\"p\",[[0,[],0,\"We got up a few hours before sunrise, ready to hike the 1 300 vertical metres and seven horizontal km to the summit. And immediately got lost in the dark. Our delicate morales could hardly bear it, but after stumbling around precarious cliffs for two hours, we retraced our steps and found the very well-trodden path in the first rays of dawn. Two hours behind schedule, the day was a race against the bad afternoon weather. And to climb Iztaccíhuatl (“the white woman” in Nahuatl), you have to climb her feet and knees, cross her thighs and stomach and finally finish on one of her two... summits.\"]]],[10,4],[10,5],[1,\"p\",[[0,[],0,\"Each time we summited something, we saw how far there still was to go, and we debated whether we still had the time to make it safely there and back. Rick did his best to keep spirits high, and after about eight hours we made it to the very easy glacier crossing before the final summit scramble. Elation! We had managed to summit something! After being sure we wouldn’t make it, the relief at not having to wake up the next morning to try again was palpable. We’d spent a good few hours above 5 000 metres and it was time to scramble back to camp quickly.\"]]],[1,\"p\",[[0,[],0,\"The Supertramp morale was revolutionised! We felt that we could return to Orizaba and give it our best shot, safe in the knowledge that we had at least one summit shot with the MCSA Supertramp banner, should we not make it up. After a rest day eating fruit salad and unwittingly exploring the world’s largest pyramid (The Pyramid of Cholula), we returned to the base camp at Pico de Orizaba, ready for a New Year’s Eve summit the next day. Base camp was cold, windy and foggy, and chances of an easy climb seemed low, but as we turned in for our 7 pm bedtime, the skies cleared and the summit glacier beckoned promisingly to us. Suddenly we knew we would do it.\"]]],[1,\"p\",[[0,[],0,\"An early morning, a quick breakfast of our secret oatmeal concoction and we were on the trail by 1:30 am. We set a brisk pace and took turns telling each other to slow down. But we felt good and our legs were enthusiastic to go. We passed a few other groups, and passed our previous high point quickly. We entered the so-called ‘labyrinth’ of ice and rock before the glacier proper, but the well-worn snowpack was easy to follow in the dark. We had a quick break to drink and get out our axes, and then started the long crunch up the endless slope to the summit. The snow was perfect and firm: Chris set a good pace in front (breathing and wiggling his toes fiercely to keep them from frosting over) and the angle was just shallow enough to make the going bearable.\"]]],[1,\"p\",[[0,[],0,\"After an indeterminable time on the featureless slope, we zagged past a rocky outcrop, which we knew meant the summit was approaching. Feeling strong from our acclimatisation, we kicked into high gear and marched upwards. The slope steepened, then slackened, and we were there! We hit the snow-free crater-ridge (and what a crater!) just in time to welcome the first rays of daylight (and most welcome they were for our freezing toes). At 5 636 metres above sea level, the third highest point in North America, and the biggest volcano any of us had been on. After photos and a celebratory naartjie, we started loping back down the slope. Rick and Chris enjoyed sliding down the slowly softening snow, even practising some self-arrest, but the altitude had finally started to catch up with Michael.\"]]],[1,\"p\",[[0,[],0,\"In no time, we were off the glacier, through the labyrinth, and walking barefoot back into base camp. Feeling strong, we were very pleased with our eight-hour tent-to-tent time. Climbing a mountain is an amazing feeling, but the comfort and relief of being out of danger and warming up a cup of hierbabuena tea (rooibos is a rare commodity in Mexico) is equally satisfying. Before long we were in the back of a Ford4x4 heading back into town, knowing that the hard part of our journey was behind us. What beckoned was travelling, bolted climbing routes, and enough tacos to make one sick (to make Chris sick, to be precise).\"]]],[10,6],[10,7],[1,\"p\",[[0,[],0,\"The Supertramp story doesn’t end there: there were epic multi-pitch climbing routes in El Potrero Chico, some of Mexico’s finest tequila, many more buses, more pyramids, and amazing times shared between three good friends. But we had done what we came to do. Eventually the trio disbanded and continued in different directions. Super Rick went first, and after a three-hour detention on the Mexico-Texas border (no wall yet, he reports) he made it to California’s Lake Tahoe, where he spent six glorious weeks skiing up and down the West Coast’s finest powder. Super Chris left shortly thereafter, and after two days in Mexico City sorting out his passport and visa woes, he flew to Washington DC, where he is braving the winter months in a new job. And Super Mike... some say he is still to be found in a small pueblo in Mexico, climbing harder and harder routes, living off beans and the occasional tortilla, and slowly forgetting how to speak English.\"]]],[1,\"p\",[[0,[],0,\"We’d like to say a very sincere thank you to The Mountain Club of South Africa and the anonymous donor, for honouring us with the Supertramp Award of 2016, that made this amazing trip possible. Also to our family and friends for putting up with our nonsense and supporting our adventure.\"]]],[1,\"p\",[[0,[0],1,\"All photos by Michael Kloos\"]]],[1,\"p\",[[0,[],0,\"Also published here: \"],[0,[1],1,\"https://pangaeaproject.org/primero-somos-tontos-firstly-were-fools/\"]]]]}",
                        "html": "<figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/dec25---01-after-deciding-we-needed-more-time-for-the-summit--small-hike-to-a-mini-peak.JPG\" class=\"kg-image\"><figcaption>Left to right: Michael Kloos, Chris Arderne, Rick Kotze</figcaption></figure><p>We knew this already, but our three weeks in Mexico drove the message home on an almost daily basis. This is the story of three South African amigos fumbling their way up a few volcanoes and some jagged rock faces in the land of chillies, tortillas, piñatas and moustaches.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/dec31---04-looks-like-I-have-a-huge-handlebar-moustache.JPG\" class=\"kg-image\"></figure><p>The plan was simple enough: keep the plan modest, and figure the details out when we get there... How difficult could two volcanoes and some rocks be? Three objectives, and three weeks to accomplish them. The plan (if it could be called that) was for Rick and Michael to head straight to the primary objective and highest peak in Mexico, Pico de Orizaba. They would start figuring things out while waiting to hear whether Chris (whose passport was precariously full) would be able to enter Mexico at all.</p><p>Looking back on it, it’s classic hubris. With Andean experience above 6 000 m, Chris felt confident the altitude would be no obstacle. Having been in the high 5 000s in the Cordillera Blanca, Michael thought he knew what he was in for. Only Rick, having suffered up Elbrus, was properly prepared to suffer again. We semi-confidently set Christmas day for our summit attempt, just four days from sea level.</p><p>And one by one we succumbed. A strenuous hike at 3 000 m laid Rick low. Our first acclimatisation hike to 4 800 m got Chris. And the next day Michael was brought down at the same height. It was a sobering blow for the Supertramps. Other people were passing through base camp and reaching the summit - most of them looking haggard and miserable on the way down. We decided that wasn’t the summit story we wanted. We wanted to get to the summit on our terms: quickly, confidently, and with the energy to enjoy it and be safe.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/dec28---11-back-at-camp-with-boots-around-my-neck.JPG\" class=\"kg-image\"></figure><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/IMG_0993.JPG\" class=\"kg-image\"></figure><p>So, on Christmas day, we made a tough decision: we bailed. After a rest back in town, we ate some beans and said hasta luego to Orizaba, and took the first of the buses that would bring us to Iztaccíhuatl, Mexico’s third highest peak. (Popocatépetl, the second, is currently unclimbable due to volcanic activity.) We’d been told Izta was more or less a walk up, so we stashed our technical gear in the small town of Santiago and caught a minibus taxi to the dusty base camp. In between mouthfuls of the trip’s worst tacos, we saw hikers trudging off the mountain - fully geared up with crampons and helmets...</p><p>There we were, getting ready for a short sleep and an early start up an easy mountain. And once again our over-confidence and poor planning stymied us. Morale hit an all-time low, and we regrouped in the dust-covered tent to gather our thoughts. The prospect of no Mexican summits seemed all too possible, and all too much to handle. Eventually we were able to dry our eyes and make a plan. Michael would hitchhike to Amecameca to rent some crampons, Chris would hitch to Santiago to fetch the other gear, and Rick would look after the dusty-getting-dustier tent. Finally, we could have our pre-summit dinner and go to bed.</p><p>We got up a few hours before sunrise, ready to hike the 1 300 vertical metres and seven horizontal km to the summit. And immediately got lost in the dark. Our delicate morales could hardly bear it, but after stumbling around precarious cliffs for two hours, we retraced our steps and found the very well-trodden path in the first rays of dawn. Two hours behind schedule, the day was a race against the bad afternoon weather. And to climb Iztaccíhuatl (“the white woman” in Nahuatl), you have to climb her feet and knees, cross her thighs and stomach and finally finish on one of her two... summits.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/dec28---02-popocatepetl-entertaining-us-in-the-early-morning-hours.JPG\" class=\"kg-image\"></figure><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/IMG_1027.JPG\" class=\"kg-image\"></figure><p>Each time we summited something, we saw how far there still was to go, and we debated whether we still had the time to make it safely there and back. Rick did his best to keep spirits high, and after about eight hours we made it to the very easy glacier crossing before the final summit scramble. Elation! We had managed to summit something! After being sure we wouldn’t make it, the relief at not having to wake up the next morning to try again was palpable. We’d spent a good few hours above 5 000 metres and it was time to scramble back to camp quickly.</p><p>The Supertramp morale was revolutionised! We felt that we could return to Orizaba and give it our best shot, safe in the knowledge that we had at least one summit shot with the MCSA Supertramp banner, should we not make it up. After a rest day eating fruit salad and unwittingly exploring the world’s largest pyramid (The Pyramid of Cholula), we returned to the base camp at Pico de Orizaba, ready for a New Year’s Eve summit the next day. Base camp was cold, windy and foggy, and chances of an easy climb seemed low, but as we turned in for our 7 pm bedtime, the skies cleared and the summit glacier beckoned promisingly to us. Suddenly we knew we would do it.</p><p>An early morning, a quick breakfast of our secret oatmeal concoction and we were on the trail by 1:30 am. We set a brisk pace and took turns telling each other to slow down. But we felt good and our legs were enthusiastic to go. We passed a few other groups, and passed our previous high point quickly. We entered the so-called ‘labyrinth’ of ice and rock before the glacier proper, but the well-worn snowpack was easy to follow in the dark. We had a quick break to drink and get out our axes, and then started the long crunch up the endless slope to the summit. The snow was perfect and firm: Chris set a good pace in front (breathing and wiggling his toes fiercely to keep them from frosting over) and the angle was just shallow enough to make the going bearable.</p><p>After an indeterminable time on the featureless slope, we zagged past a rocky outcrop, which we knew meant the summit was approaching. Feeling strong from our acclimatisation, we kicked into high gear and marched upwards. The slope steepened, then slackened, and we were there! We hit the snow-free crater-ridge (and what a crater!) just in time to welcome the first rays of daylight (and most welcome they were for our freezing toes). At 5 636 metres above sea level, the third highest point in North America, and the biggest volcano any of us had been on. After photos and a celebratory naartjie, we started loping back down the slope. Rick and Chris enjoyed sliding down the slowly softening snow, even practising some self-arrest, but the altitude had finally started to catch up with Michael.</p><p>In no time, we were off the glacier, through the labyrinth, and walking barefoot back into base camp. Feeling strong, we were very pleased with our eight-hour tent-to-tent time. Climbing a mountain is an amazing feeling, but the comfort and relief of being out of danger and warming up a cup of hierbabuena tea (rooibos is a rare commodity in Mexico) is equally satisfying. Before long we were in the back of a Ford4x4 heading back into town, knowing that the hard part of our journey was behind us. What beckoned was travelling, bolted climbing routes, and enough tacos to make one sick (to make Chris sick, to be precise).</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/dec28---08-back-onto-the-glacier.JPG\" class=\"kg-image\"></figure><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/IMG_1169.JPG\" class=\"kg-image\"></figure><p>The Supertramp story doesn’t end there: there were epic multi-pitch climbing routes in El Potrero Chico, some of Mexico’s finest tequila, many more buses, more pyramids, and amazing times shared between three good friends. But we had done what we came to do. Eventually the trio disbanded and continued in different directions. Super Rick went first, and after a three-hour detention on the Mexico-Texas border (no wall yet, he reports) he made it to California’s Lake Tahoe, where he spent six glorious weeks skiing up and down the West Coast’s finest powder. Super Chris left shortly thereafter, and after two days in Mexico City sorting out his passport and visa woes, he flew to Washington DC, where he is braving the winter months in a new job. And Super Mike... some say he is still to be found in a small pueblo in Mexico, climbing harder and harder routes, living off beans and the occasional tortilla, and slowly forgetting how to speak English.</p><p>We’d like to say a very sincere thank you to The Mountain Club of South Africa and the anonymous donor, for honouring us with the Supertramp Award of 2016, that made this amazing trip possible. Also to our family and friends for putting up with our nonsense and supporting our adventure.</p><p><em>All photos by Michael Kloos</em></p><p>Also published here: <a href=\"https://pangaeaproject.org/primero-somos-tontos-firstly-were-fools/\">https://pangaeaproject.org/primero-somos-tontos-firstly-were-fools/</a></p>",
                        "comment_id": "5bbc64227cc70a140e7fd10e",
                        "markdown": "Left to right: Michael Kloos, Chris Arderne, Rick KotzeWe knew this already, but\nour three weeks in Mexico drove the message home on an almost daily basis. This\nis the story of three South African amigos fumbling their way up a few volcanoes\nand some jagged rock faces in the land of chillies, tortillas, piñatas and\nmoustaches.\n\nThe plan was simple enough: keep the plan modest, and figure the details out\nwhen we get there... How difficult could two volcanoes and some rocks be? Three\nobjectives, and three weeks to accomplish them. The plan (if it could be called\nthat) was for Rick and Michael to head straight to the primary objective and\nhighest peak in Mexico, Pico de Orizaba. They would start figuring things out\nwhile waiting to hear whether Chris (whose passport was precariously full) would\nbe able to enter Mexico at all.\n\nLooking back on it, it’s classic hubris. With Andean experience above 6 000 m,\nChris felt confident the altitude would be no obstacle. Having been in the high\n5 000s in the Cordillera Blanca, Michael thought he knew what he was in for.\nOnly Rick, having suffered up Elbrus, was properly prepared to suffer again. We\nsemi-confidently set Christmas day for our summit attempt, just four days from\nsea level.\n\nAnd one by one we succumbed. A strenuous hike at 3 000 m laid Rick low. Our\nfirst acclimatisation hike to 4 800 m got Chris. And the next day Michael was\nbrought down at the same height. It was a sobering blow for the Supertramps.\nOther people were passing through base camp and reaching the summit - most of\nthem looking haggard and miserable on the way down. We decided that wasn’t the\nsummit story we wanted. We wanted to get to the summit on our terms: quickly,\nconfidently, and with the energy to enjoy it and be safe.\n\nSo, on Christmas day, we made a tough decision: we bailed. After a rest back in\ntown, we ate some beans and said hasta luego to Orizaba, and took the first of\nthe buses that would bring us to Iztaccíhuatl, Mexico’s third highest peak.\n(Popocatépetl, the second, is currently unclimbable due to volcanic activity.)\nWe’d been told Izta was more or less a walk up, so we stashed our technical gear\nin the small town of Santiago and caught a minibus taxi to the dusty base camp.\nIn between mouthfuls of the trip’s worst tacos, we saw hikers trudging off the\nmountain - fully geared up with crampons and helmets...\n\nThere we were, getting ready for a short sleep and an early start up an easy\nmountain. And once again our over-confidence and poor planning stymied us.\nMorale hit an all-time low, and we regrouped in the dust-covered tent to gather\nour thoughts. The prospect of no Mexican summits seemed all too possible, and\nall too much to handle. Eventually we were able to dry our eyes and make a plan.\nMichael would hitchhike to Amecameca to rent some crampons, Chris would hitch to\nSantiago to fetch the other gear, and Rick would look after the\ndusty-getting-dustier tent. Finally, we could have our pre-summit dinner and go\nto bed.\n\nWe got up a few hours before sunrise, ready to hike the 1 300 vertical metres\nand seven horizontal km to the summit. And immediately got lost in the dark. Our\ndelicate morales could hardly bear it, but after stumbling around precarious\ncliffs for two hours, we retraced our steps and found the very well-trodden path\nin the first rays of dawn. Two hours behind schedule, the day was a race against\nthe bad afternoon weather. And to climb Iztaccíhuatl (“the white woman” in\nNahuatl), you have to climb her feet and knees, cross her thighs and stomach and\nfinally finish on one of her two... summits.\n\nEach time we summited something, we saw how far there still was to go, and we\ndebated whether we still had the time to make it safely there and back. Rick did\nhis best to keep spirits high, and after about eight hours we made it to the\nvery easy glacier crossing before the final summit scramble. Elation! We had\nmanaged to summit something! After being sure we wouldn’t make it, the relief at\nnot having to wake up the next morning to try again was palpable. We’d spent a\ngood few hours above 5 000 metres and it was time to scramble back to camp\nquickly.\n\nThe Supertramp morale was revolutionised! We felt that we could return to\nOrizaba and give it our best shot, safe in the knowledge that we had at least\none summit shot with the MCSA Supertramp banner, should we not make it up. After\na rest day eating fruit salad and unwittingly exploring the world’s largest\npyramid (The Pyramid of Cholula), we returned to the base camp at Pico de\nOrizaba, ready for a New Year’s Eve summit the next day. Base camp was cold,\nwindy and foggy, and chances of an easy climb seemed low, but as we turned in\nfor our 7 pm bedtime, the skies cleared and the summit glacier beckoned\npromisingly to us. Suddenly we knew we would do it.\n\nAn early morning, a quick breakfast of our secret oatmeal concoction and we were\non the trail by 1:30 am. We set a brisk pace and took turns telling each other\nto slow down. But we felt good and our legs were enthusiastic to go. We passed a\nfew other groups, and passed our previous high point quickly. We entered the\nso-called ‘labyrinth’ of ice and rock before the glacier proper, but the\nwell-worn snowpack was easy to follow in the dark. We had a quick break to drink\nand get out our axes, and then started the long crunch up the endless slope to\nthe summit. The snow was perfect and firm: Chris set a good pace in front\n(breathing and wiggling his toes fiercely to keep them from frosting over) and\nthe angle was just shallow enough to make the going bearable.\n\nAfter an indeterminable time on the featureless slope, we zagged past a rocky\noutcrop, which we knew meant the summit was approaching. Feeling strong from our\nacclimatisation, we kicked into high gear and marched upwards. The slope\nsteepened, then slackened, and we were there! We hit the snow-free crater-ridge\n(and what a crater!) just in time to welcome the first rays of daylight (and\nmost welcome they were for our freezing toes). At 5 636 metres above sea level,\nthe third highest point in North America, and the biggest volcano any of us had\nbeen on. After photos and a celebratory naartjie, we started loping back down\nthe slope. Rick and Chris enjoyed sliding down the slowly softening snow, even\npractising some self-arrest, but the altitude had finally started to catch up\nwith Michael.\n\nIn no time, we were off the glacier, through the labyrinth, and walking barefoot\nback into base camp. Feeling strong, we were very pleased with our eight-hour\ntent-to-tent time. Climbing a mountain is an amazing feeling, but the comfort\nand relief of being out of danger and warming up a cup of hierbabuena tea\n(rooibos is a rare commodity in Mexico) is equally satisfying. Before long we\nwere in the back of a Ford4x4 heading back into town, knowing that the hard part\nof our journey was behind us. What beckoned was travelling, bolted climbing\nroutes, and enough tacos to make one sick (to make Chris sick, to be precise).\n\nThe Supertramp story doesn’t end there: there were epic multi-pitch climbing\nroutes in El Potrero Chico, some of Mexico’s finest tequila, many more buses,\nmore pyramids, and amazing times shared between three good friends. But we had\ndone what we came to do. Eventually the trio disbanded and continued in\ndifferent directions. Super Rick went first, and after a three-hour detention on\nthe Mexico-Texas border (no wall yet, he reports) he made it to California’s\nLake Tahoe, where he spent six glorious weeks skiing up and down the West\nCoast’s finest powder. Super Chris left shortly thereafter, and after two days\nin Mexico City sorting out his passport and visa woes, he flew to Washington DC,\nwhere he is braving the winter months in a new job. And Super Mike... some say\nhe is still to be found in a small pueblo in Mexico, climbing harder and harder\nroutes, living off beans and the occasional tortilla, and slowly forgetting how\nto speak English.\n\nWe’d like to say a very sincere thank you to The Mountain Club of South Africa\nand the anonymous donor, for honouring us with the Supertramp Award of 2016,\nthat made this amazing trip possible. Also to our family and friends for putting\nup with our nonsense and supporting our adventure.\n\nAll photos by Michael Kloos\n\nAlso published here: \nhttps://pangaeaproject.org/primero-somos-tontos-firstly-were-fools/",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "Primero, somos tontos",
                        "meta_description": "This is the story of three South African amigos fumbling their way up a few volcanoes and some jagged rock faces.",
                        "author_id": "1",
                        "created_at": "2018-10-09 08:17:38",
                        "created_by": "1",
                        "updated_at": "2018-10-17 10:44:36",
                        "updated_by": "1",
                        "published_at": "2017-02-07 08:17:00",
                        "published_by": "1",
                        "custom_excerpt": "We knew this already, but our three weeks in Mexico drove the message home on an almost daily basis. This is the story of three South African amigos fumbling their way up a few volcanoes and some jagged rock faces in the land of chillies, tortillas, piñatas and moustaches.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbc64bb7cc70a140e7fd114",
                        "uuid": "16a51015-dba5-4127-942b-1428b807d420",
                        "title": "Summer of climbing in Europe",
                        "slug": "summer-in-europe",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2018/10/k1.jpg\",\"cardWidth\":\"wide\"}],[\"image\",{\"src\":\"/content/images/2018/10/c_1.JPG\",\"cardWidth\":\"\"}],[\"image\",{\"src\":\"/content/images/2018/10/k2.jpg\"}],[\"image\",{\"src\":\"/content/images/2018/10/k3.jpg\"}],[\"image\",{\"src\":\"/content/images/2018/10/IMG_7381B.jpg\"}],[\"image\",{\"src\":\"/content/images/2018/10/k5.JPG\"}],[\"image\",{\"src\":\"/content/images/2018/10/k4.JPG\"}],[\"image\",{\"src\":\"/content/images/2018/10/k6.JPG\"}]],\"markups\":[[\"em\"],[\"a\",[\"href\",\"https://lossupertramps.wordpress.com/2016/07/05/kazbek-with-the-uiaa/\"]]],\"sections\":[[10,0],[1,\"p\",[[0,[],0,\"This year I was lucky enough to join two UIAA youth meets. Youth rock climbing in Catalonia, organised by the FEEC, and the Kazbek mountaineering expedition, organised by the Mountaineering & Climbing Association of Georgia. They were both incredible experiences, with all the fun and excitement of long multi-pitch trad climbing, and then the fantastic highs and lows and dreary boredom one expects from a seven-day mountaineering expedition.\"]]],[1,\"h2\",[[0,[],0,\"Catalunya\"]]],[1,\"p\",[[0,[],0,\"I was already headed to Spain this June to do some hiking in the Pyrenees with a good Spanish friend. As soon as I heard about the UIAA Global Youth Summit trip to Catalunya to do rock climbing on Montserrat and Pedraforca, it was clear my stars had aligned. I do a lot of rock climbing, but hadn’t yet had the gear or connections to do any multi-pitch trad climbing. The steep conglomerate of Montserrat and the cracked limestone of Pedraforca promised a great trip.\"]]],[1,\"p\",[[0,[],0,\"The tour was organised by the Federació d’Entitats Excursionistes de Catalunya (FEEC)and the group consisted of two great Catalunyan guides, five young guys from the Montserrat area, a Serbian climber, and me. We stayed in beautiful refugios at both climbing spots, and were treated to massive dinners of simple but delicious Spanish food.\"]]],[1,\"p\",[[0,[],0,\"We started in Montserrat, where the maze of needles and spires makes finding one’s way extremely difficult. We spent a day doing shorter slabby sport routes to get an idea of everyone’s abilities, and re-convened back at the refugio to pore over the guidebook and make plans for the next day. I joined for the more difficult route, six classic pitches up CADE (200m, 6a/Ae), a perfect crack between two spires. I seconded the whole way, and got to enjoy the fun route without much stress, especially enjoying the more difficult overhanging section near the top. Climbing with 150 metres of fresh air underneath my bum was a new experience for me.\"]]],[10,1],[1,\"p\",[[0,[],0,\"After another day of climbing, we tumbled back into the kombi and drove to Pedraforca, now in the Pyrenean foothills. It’s a stunning mountain, which gets its name from its resemblance to a giant fork. We would be climbing only the north face, to keep out of the harsh Spanish summer sun. A group of us decided to climb the massive Gran Diedre route. Unfortunately, we were limited with time and people, so I had to climb second the whole way again. Nonetheless it was an incredible climb, rising for about ten pitches above the surrounding landscape. Most of the route follows a huge dihedral, and the climbing was easy and fun, up to grade V for a few pitches.\"]]],[1,\"p\",[[0,[],0,\"It was a great experience and I can’t wait to get my hands on some more long trad routes. Unfortunately, I didn’t get to lead any of the long routes, so I still feel some big gaps in my experience. I was also hoping for a more varied and international group of climbers - I’m lucky enough to speak Spanish, but still would have enjoyed the chance to meet more like-minded climbers from further afield. Well done to FEEC, our awesome guides Pau and Faust, and the UIAA Youth Commission for making the trip happen.\"]]],[1,\"h2\",[[0,[],0,\"Kazbek\"]]],[1,\"p\",[[0,[],0,\"Rock climbing aside, Europe for the summer meant one thing was uppermost in my thoughts: alpinism. The UIAA had a number of youth expeditions planned, and I looked into all of them. Matterhorn - too daunting. Damavand - a bit pedestrian. Kazbek? Just right. I spoke to some more experienced friends and fellow MCSA members, and Kazbek seemed like just the place to have my next alpine experience. Steep and high and icy enough to be a challenge and a serious mountain, but straight-forward and well-trodden enough to offer some comfort to a relatively new mountaineer. My only experience before this was a guided ascent of the 6 088 metre Huayna Potosí in Bolivia, which had sealed my devotion to mountaineering.\"]]],[1,\"p\",[[0,[],0,\"I flew to Georgia's capital and, after some much-needed sleep under a staircase, met up with the team outside a shopping centre. Most were like me - keen to climb a mountain, but either lacking experience or willing partners. Then seven Koreans in matching shirts and hats came out of the supermarket with bundles of food and confused smiles. The trip organiser, Zura Kutchava, bundled us all into a rented minibus and soon we were pitching our tents near a beautiful old monastery, with the majestic Kazbek dominating the skyline.\"]]],[10,2],[1,\"p\",[[0,[],0,\"The haphazard start - the Koreans had way too much gear, and didn't seem in a rush to make a plan - foreshadowed the dominant theme for the rest of the trip. We trickled out of camp as and when we were ready, and made our way to the camp at 3 000 metres, just across a torrential river of glacial meltwater. After this, things sped up a bit, but we still spent a few hours every day waiting for everyone to be ready. I never figured out what the delays were. This was my first climb that could be described as an expedition, with horses carrying a load to the first camp, and we later descended from 3 800 metres to pick up more supplies from that camp. It was interesting (and exhausting) to see how this was done. We camped at 2 000, 3 000, 3 800 (twice) and then at 4 200 metres before the summit push to 5 047 metres. This was a lot more than most groups on the mountain, but we wanted to maximise the chances for everyone to have a successful summit. It also meant spending two nights on the frigid glacier at 4 200 metres, where I was unable to sleep in my otherwise trusty K-Way summer bag, and not helped by the fact that my tent-mates were snoring happily in their puffy expedition bags.\"]]],[10,3],[1,\"p\",[[0,[],0,\"This unsympathetic pair were Javier and Izidor, from Spain and Slovenia. They were both a lot more experienced than me, with experience above 7 000 metres, and summits on many of the major ranges around the world. My tent-mates were extremely helpful and I learnt so much from spending time with them (hours and hours in the tent, avoiding the sun and then the cold) and being roped in with them while crossing the frightening glacier, and for the summit. Eager and excited, but with a well-honed respect for safety, they were good teachers and I hope to do more mountaineering trips with them soon. The Koreans spoke limited English so our interactions with them didn’t get far. The group of Georgians of various experience levels provided great company every day and night, confirming time and again the Georgian reputation for kindness and hospitality.\"]]],[1,\"p\",[[0,[],0,\"The trip was physically demanding, with heavy packs and many metres to climb, but we had an easy pace and it wasn't a struggle. After crossing the low glacier (simple enough that there were horses crossing it) and checking in with border control at the 'meteo station', one can camp on the rugged moraine covering the glacier. From there it was a treacherous hike across the moraine, with crumbling rocks and deep crevasses, and one eye on the rock fall to the right, as helmet-sized boulders came speeding down and stopped just short of an unwelcome surprise. Then came the glacier proper – Gergeti, with cavernous crevasses and treacherous snow bridges.\"]]],[10,4],[1,\"p\",[[0,[],0,\"After that the snow covering got thicker where we made our high camp. We planned to leave at six the next morning, but six o’clock came and went, and most in the group were still inside their tents. This frustrated my one tent-mate past his breaking point, and after walking around agitating everyone to get going, he eventually gave up and set off by himself. This catalysed a bit of group movement and we set off not too far behind him. It was a sad moment, and reflected a brewing problem in the group dynamic. It's a straightforward hike to the summit, with a relatively steep section at the end. We had a stunning view of the Caucasus from the shoulder, with Elbrus visible in the distance, but unfortunately the clouds came in as we did the last hundred metres, and we had a very white scene at the top. Still an awesome feeling to stand atop a mountain as imposing as Kazbek.\"]]],[10,5],[1,\"p\",[[0,[],0,\"We hiked in teams of five and, apart from some tired-out Koreans stumbling on the descent, everything went smoothly. For me, the most tiring part of the entire trip was probably digging in and building walls for our tents on the glacier. My tent-mates decided they'd had enough and left the beginner to do the job. Luckily I was having fun and continued working on our fortification, because about an hour later a huge Georgian search-and-rescue helicopter landed a stone's throw away and tried its best to send our camp tumbling along the glacier.\"]]],[10,6],[1,\"p\",[[0,[],0,\"This helicopter revealed a very sad and real side to mountaineering. Two girls we'd befriended a few nights before at the lower camp, and who we'd seen coming down from the summit, had tried to descend the glacier without a rope. Although they were following the footsteps of a big roped team, a day of beating sun had made conditions precarious. One of the two made an unlucky step, and fell into a crevasse. She died quite soon after. This tragic event served as a sober reminder of the very real dangers in mountaineering. Their risky behaviour and the preventable nature of the accident only reinforced this lesson for me.\"]]],[1,\"p\",[[0,[],0,\"It was an amazing trip, and I learnt so much as a mountaineer and individual. My thanks go to Zura, the capable, lively and infinitely patient team leader, and the Mountaineering & Climbing Association of Georgia. Also to the UIAA for making the event possible, and the MCSA for making my participation possible.\"]]],[10,7],[1,\"p\",[[0,[0],1,\"All Kazbek photos by FJ Pascual.\"]]],[1,\"p\",[[0,[],0,\"Partially posted here: \"],[0,[1],1,\"https://lossupertramps.wordpress.com/2016/07/05/kazbek-with-the-uiaa/\"]]]]}",
                        "html": "<figure class=\"kg-card kg-image-card kg-width-wide\"><img src=\"/content/images/2018/10/k1.jpg\" class=\"kg-image\"></figure><p>This year I was lucky enough to join two UIAA youth meets. Youth rock climbing in Catalonia, organised by the FEEC, and the Kazbek mountaineering expedition, organised by the Mountaineering &amp; Climbing Association of Georgia. They were both incredible experiences, with all the fun and excitement of long multi-pitch trad climbing, and then the fantastic highs and lows and dreary boredom one expects from a seven-day mountaineering expedition.</p><h2 id=\"catalunya\">Catalunya</h2><p>I was already headed to Spain this June to do some hiking in the Pyrenees with a good Spanish friend. As soon as I heard about the UIAA Global Youth Summit trip to Catalunya to do rock climbing on Montserrat and Pedraforca, it was clear my stars had aligned. I do a lot of rock climbing, but hadn’t yet had the gear or connections to do any multi-pitch trad climbing. The steep conglomerate of Montserrat and the cracked limestone of Pedraforca promised a great trip.</p><p>The tour was organised by the Federació d’Entitats Excursionistes de Catalunya (FEEC)and the group consisted of two great Catalunyan guides, five young guys from the Montserrat area, a Serbian climber, and me. We stayed in beautiful refugios at both climbing spots, and were treated to massive dinners of simple but delicious Spanish food.</p><p>We started in Montserrat, where the maze of needles and spires makes finding one’s way extremely difficult. We spent a day doing shorter slabby sport routes to get an idea of everyone’s abilities, and re-convened back at the refugio to pore over the guidebook and make plans for the next day. I joined for the more difficult route, six classic pitches up CADE (200m, 6a/Ae), a perfect crack between two spires. I seconded the whole way, and got to enjoy the fun route without much stress, especially enjoying the more difficult overhanging section near the top. Climbing with 150 metres of fresh air underneath my bum was a new experience for me.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/c_1.JPG\" class=\"kg-image\"></figure><p>After another day of climbing, we tumbled back into the kombi and drove to Pedraforca, now in the Pyrenean foothills. It’s a stunning mountain, which gets its name from its resemblance to a giant fork. We would be climbing only the north face, to keep out of the harsh Spanish summer sun. A group of us decided to climb the massive Gran Diedre route. Unfortunately, we were limited with time and people, so I had to climb second the whole way again. Nonetheless it was an incredible climb, rising for about ten pitches above the surrounding landscape. Most of the route follows a huge dihedral, and the climbing was easy and fun, up to grade V for a few pitches.</p><p>It was a great experience and I can’t wait to get my hands on some more long trad routes. Unfortunately, I didn’t get to lead any of the long routes, so I still feel some big gaps in my experience. I was also hoping for a more varied and international group of climbers - I’m lucky enough to speak Spanish, but still would have enjoyed the chance to meet more like-minded climbers from further afield. Well done to FEEC, our awesome guides Pau and Faust, and the UIAA Youth Commission for making the trip happen.</p><h2 id=\"kazbek\">Kazbek</h2><p>Rock climbing aside, Europe for the summer meant one thing was uppermost in my thoughts: alpinism. The UIAA had a number of youth expeditions planned, and I looked into all of them. Matterhorn - too daunting. Damavand - a bit pedestrian. Kazbek? Just right. I spoke to some more experienced friends and fellow MCSA members, and Kazbek seemed like just the place to have my next alpine experience. Steep and high and icy enough to be a challenge and a serious mountain, but straight-forward and well-trodden enough to offer some comfort to a relatively new mountaineer. My only experience before this was a guided ascent of the 6 088 metre Huayna Potosí in Bolivia, which had sealed my devotion to mountaineering.</p><p>I flew to Georgia's capital and, after some much-needed sleep under a staircase, met up with the team outside a shopping centre. Most were like me - keen to climb a mountain, but either lacking experience or willing partners. Then seven Koreans in matching shirts and hats came out of the supermarket with bundles of food and confused smiles. The trip organiser, Zura Kutchava, bundled us all into a rented minibus and soon we were pitching our tents near a beautiful old monastery, with the majestic Kazbek dominating the skyline.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/k2.jpg\" class=\"kg-image\"></figure><p>The haphazard start - the Koreans had way too much gear, and didn't seem in a rush to make a plan - foreshadowed the dominant theme for the rest of the trip. We trickled out of camp as and when we were ready, and made our way to the camp at 3 000 metres, just across a torrential river of glacial meltwater. After this, things sped up a bit, but we still spent a few hours every day waiting for everyone to be ready. I never figured out what the delays were. This was my first climb that could be described as an expedition, with horses carrying a load to the first camp, and we later descended from 3 800 metres to pick up more supplies from that camp. It was interesting (and exhausting) to see how this was done. We camped at 2 000, 3 000, 3 800 (twice) and then at 4 200 metres before the summit push to 5 047 metres. This was a lot more than most groups on the mountain, but we wanted to maximise the chances for everyone to have a successful summit. It also meant spending two nights on the frigid glacier at 4 200 metres, where I was unable to sleep in my otherwise trusty K-Way summer bag, and not helped by the fact that my tent-mates were snoring happily in their puffy expedition bags.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/k3.jpg\" class=\"kg-image\"></figure><p>This unsympathetic pair were Javier and Izidor, from Spain and Slovenia. They were both a lot more experienced than me, with experience above 7 000 metres, and summits on many of the major ranges around the world. My tent-mates were extremely helpful and I learnt so much from spending time with them (hours and hours in the tent, avoiding the sun and then the cold) and being roped in with them while crossing the frightening glacier, and for the summit. Eager and excited, but with a well-honed respect for safety, they were good teachers and I hope to do more mountaineering trips with them soon. The Koreans spoke limited English so our interactions with them didn’t get far. The group of Georgians of various experience levels provided great company every day and night, confirming time and again the Georgian reputation for kindness and hospitality.</p><p>The trip was physically demanding, with heavy packs and many metres to climb, but we had an easy pace and it wasn't a struggle. After crossing the low glacier (simple enough that there were horses crossing it) and checking in with border control at the 'meteo station', one can camp on the rugged moraine covering the glacier. From there it was a treacherous hike across the moraine, with crumbling rocks and deep crevasses, and one eye on the rock fall to the right, as helmet-sized boulders came speeding down and stopped just short of an unwelcome surprise. Then came the glacier proper – Gergeti, with cavernous crevasses and treacherous snow bridges.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/IMG_7381B.jpg\" class=\"kg-image\"></figure><p>After that the snow covering got thicker where we made our high camp. We planned to leave at six the next morning, but six o’clock came and went, and most in the group were still inside their tents. This frustrated my one tent-mate past his breaking point, and after walking around agitating everyone to get going, he eventually gave up and set off by himself. This catalysed a bit of group movement and we set off not too far behind him. It was a sad moment, and reflected a brewing problem in the group dynamic. It's a straightforward hike to the summit, with a relatively steep section at the end. We had a stunning view of the Caucasus from the shoulder, with Elbrus visible in the distance, but unfortunately the clouds came in as we did the last hundred metres, and we had a very white scene at the top. Still an awesome feeling to stand atop a mountain as imposing as Kazbek.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/k5.JPG\" class=\"kg-image\"></figure><p>We hiked in teams of five and, apart from some tired-out Koreans stumbling on the descent, everything went smoothly. For me, the most tiring part of the entire trip was probably digging in and building walls for our tents on the glacier. My tent-mates decided they'd had enough and left the beginner to do the job. Luckily I was having fun and continued working on our fortification, because about an hour later a huge Georgian search-and-rescue helicopter landed a stone's throw away and tried its best to send our camp tumbling along the glacier.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/k4.JPG\" class=\"kg-image\"></figure><p>This helicopter revealed a very sad and real side to mountaineering. Two girls we'd befriended a few nights before at the lower camp, and who we'd seen coming down from the summit, had tried to descend the glacier without a rope. Although they were following the footsteps of a big roped team, a day of beating sun had made conditions precarious. One of the two made an unlucky step, and fell into a crevasse. She died quite soon after. This tragic event served as a sober reminder of the very real dangers in mountaineering. Their risky behaviour and the preventable nature of the accident only reinforced this lesson for me.</p><p>It was an amazing trip, and I learnt so much as a mountaineer and individual. My thanks go to Zura, the capable, lively and infinitely patient team leader, and the Mountaineering &amp; Climbing Association of Georgia. Also to the UIAA for making the event possible, and the MCSA for making my participation possible.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/k6.JPG\" class=\"kg-image\"></figure><p><em>All Kazbek photos by FJ Pascual.</em></p><p>Partially posted here: <a href=\"https://lossupertramps.wordpress.com/2016/07/05/kazbek-with-the-uiaa/\">https://lossupertramps.wordpress.com/2016/07/05/kazbek-with-the-uiaa/</a></p>",
                        "comment_id": "5bbc64bb7cc70a140e7fd114",
                        "markdown": "This year I was lucky enough to join two UIAA youth meets. Youth rock climbing\nin Catalonia, organised by the FEEC, and the Kazbek mountaineering expedition,\norganised by the Mountaineering & Climbing Association of Georgia. They were\nboth incredible experiences, with all the fun and excitement of long multi-pitch\ntrad climbing, and then the fantastic highs and lows and dreary boredom one\nexpects from a seven-day mountaineering expedition.\n\nCatalunya\nI was already headed to Spain this June to do some hiking in the Pyrenees with a\ngood Spanish friend. As soon as I heard about the UIAA Global Youth Summit trip\nto Catalunya to do rock climbing on Montserrat and Pedraforca, it was clear my\nstars had aligned. I do a lot of rock climbing, but hadn’t yet had the gear or\nconnections to do any multi-pitch trad climbing. The steep conglomerate of\nMontserrat and the cracked limestone of Pedraforca promised a great trip.\n\nThe tour was organised by the Federació d’Entitats Excursionistes de Catalunya\n(FEEC)and the group consisted of two great Catalunyan guides, five young guys\nfrom the Montserrat area, a Serbian climber, and me. We stayed in beautiful\nrefugios at both climbing spots, and were treated to massive dinners of simple\nbut delicious Spanish food.\n\nWe started in Montserrat, where the maze of needles and spires makes finding\none’s way extremely difficult. We spent a day doing shorter slabby sport routes\nto get an idea of everyone’s abilities, and re-convened back at the refugio to\npore over the guidebook and make plans for the next day. I joined for the more\ndifficult route, six classic pitches up CADE (200m, 6a/Ae), a perfect crack\nbetween two spires. I seconded the whole way, and got to enjoy the fun route\nwithout much stress, especially enjoying the more difficult overhanging section\nnear the top. Climbing with 150 metres of fresh air underneath my bum was a new\nexperience for me.\n\nAfter another day of climbing, we tumbled back into the kombi and drove to\nPedraforca, now in the Pyrenean foothills. It’s a stunning mountain, which gets\nits name from its resemblance to a giant fork. We would be climbing only the\nnorth face, to keep out of the harsh Spanish summer sun. A group of us decided\nto climb the massive Gran Diedre route. Unfortunately, we were limited with time\nand people, so I had to climb second the whole way again. Nonetheless it was an\nincredible climb, rising for about ten pitches above the surrounding landscape.\nMost of the route follows a huge dihedral, and the climbing was easy and fun, up\nto grade V for a few pitches.\n\nIt was a great experience and I can’t wait to get my hands on some more long\ntrad routes. Unfortunately, I didn’t get to lead any of the long routes, so I\nstill feel some big gaps in my experience. I was also hoping for a more varied\nand international group of climbers - I’m lucky enough to speak Spanish, but\nstill would have enjoyed the chance to meet more like-minded climbers from\nfurther afield. Well done to FEEC, our awesome guides Pau and Faust, and the\nUIAA Youth Commission for making the trip happen.\n\nKazbek\nRock climbing aside, Europe for the summer meant one thing was uppermost in my\nthoughts: alpinism. The UIAA had a number of youth expeditions planned, and I\nlooked into all of them. Matterhorn - too daunting. Damavand - a bit pedestrian.\nKazbek? Just right. I spoke to some more experienced friends and fellow MCSA\nmembers, and Kazbek seemed like just the place to have my next alpine\nexperience. Steep and high and icy enough to be a challenge and a serious\nmountain, but straight-forward and well-trodden enough to offer some comfort to\na relatively new mountaineer. My only experience before this was a guided ascent\nof the 6 088 metre Huayna Potosí in Bolivia, which had sealed my devotion to\nmountaineering.\n\nI flew to Georgia's capital and, after some much-needed sleep under a staircase,\nmet up with the team outside a shopping centre. Most were like me - keen to\nclimb a mountain, but either lacking experience or willing partners. Then seven\nKoreans in matching shirts and hats came out of the supermarket with bundles of\nfood and confused smiles. The trip organiser, Zura Kutchava, bundled us all into\na rented minibus and soon we were pitching our tents near a beautiful old\nmonastery, with the majestic Kazbek dominating the skyline.\n\nThe haphazard start - the Koreans had way too much gear, and didn't seem in a\nrush to make a plan - foreshadowed the dominant theme for the rest of the trip.\nWe trickled out of camp as and when we were ready, and made our way to the camp\nat 3 000 metres, just across a torrential river of glacial meltwater. After\nthis, things sped up a bit, but we still spent a few hours every day waiting for\neveryone to be ready. I never figured out what the delays were. This was my\nfirst climb that could be described as an expedition, with horses carrying a\nload to the first camp, and we later descended from 3 800 metres to pick up more\nsupplies from that camp. It was interesting (and exhausting) to see how this was\ndone. We camped at 2 000, 3 000, 3 800 (twice) and then at 4 200 metres before\nthe summit push to 5 047 metres. This was a lot more than most groups on the\nmountain, but we wanted to maximise the chances for everyone to have a\nsuccessful summit. It also meant spending two nights on the frigid glacier at 4\n200 metres, where I was unable to sleep in my otherwise trusty K-Way summer bag,\nand not helped by the fact that my tent-mates were snoring happily in their\npuffy expedition bags.\n\nThis unsympathetic pair were Javier and Izidor, from Spain and Slovenia. They\nwere both a lot more experienced than me, with experience above 7 000 metres,\nand summits on many of the major ranges around the world. My tent-mates were\nextremely helpful and I learnt so much from spending time with them (hours and\nhours in the tent, avoiding the sun and then the cold) and being roped in with\nthem while crossing the frightening glacier, and for the summit. Eager and\nexcited, but with a well-honed respect for safety, they were good teachers and I\nhope to do more mountaineering trips with them soon. The Koreans spoke limited\nEnglish so our interactions with them didn’t get far. The group of Georgians of\nvarious experience levels provided great company every day and night, confirming\ntime and again the Georgian reputation for kindness and hospitality.\n\nThe trip was physically demanding, with heavy packs and many metres to climb,\nbut we had an easy pace and it wasn't a struggle. After crossing the low glacier\n(simple enough that there were horses crossing it) and checking in with border\ncontrol at the 'meteo station', one can camp on the rugged moraine covering the\nglacier. From there it was a treacherous hike across the moraine, with crumbling\nrocks and deep crevasses, and one eye on the rock fall to the right, as\nhelmet-sized boulders came speeding down and stopped just short of an unwelcome\nsurprise. Then came the glacier proper – Gergeti, with cavernous crevasses and\ntreacherous snow bridges.\n\nAfter that the snow covering got thicker where we made our high camp. We planned\nto leave at six the next morning, but six o’clock came and went, and most in the\ngroup were still inside their tents. This frustrated my one tent-mate past his\nbreaking point, and after walking around agitating everyone to get going, he\neventually gave up and set off by himself. This catalysed a bit of group\nmovement and we set off not too far behind him. It was a sad moment, and\nreflected a brewing problem in the group dynamic. It's a straightforward hike to\nthe summit, with a relatively steep section at the end. We had a stunning view\nof the Caucasus from the shoulder, with Elbrus visible in the distance, but\nunfortunately the clouds came in as we did the last hundred metres, and we had a\nvery white scene at the top. Still an awesome feeling to stand atop a mountain\nas imposing as Kazbek.\n\nWe hiked in teams of five and, apart from some tired-out Koreans stumbling on\nthe descent, everything went smoothly. For me, the most tiring part of the\nentire trip was probably digging in and building walls for our tents on the\nglacier. My tent-mates decided they'd had enough and left the beginner to do the\njob. Luckily I was having fun and continued working on our fortification,\nbecause about an hour later a huge Georgian search-and-rescue helicopter landed\na stone's throw away and tried its best to send our camp tumbling along the\nglacier.\n\nThis helicopter revealed a very sad and real side to mountaineering. Two girls\nwe'd befriended a few nights before at the lower camp, and who we'd seen coming\ndown from the summit, had tried to descend the glacier without a rope. Although\nthey were following the footsteps of a big roped team, a day of beating sun had\nmade conditions precarious. One of the two made an unlucky step, and fell into a\ncrevasse. She died quite soon after. This tragic event served as a sober\nreminder of the very real dangers in mountaineering. Their risky behaviour and\nthe preventable nature of the accident only reinforced this lesson for me.\n\nIt was an amazing trip, and I learnt so much as a mountaineer and individual. My\nthanks go to Zura, the capable, lively and infinitely patient team leader, and\nthe Mountaineering & Climbing Association of Georgia. Also to the UIAA for\nmaking the event possible, and the MCSA for making my participation possible.\n\nAll Kazbek photos by FJ Pascual.\n\nPartially posted here: \nhttps://lossupertramps.wordpress.com/2016/07/05/kazbek-with-the-uiaa/",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "Summer of climbing in Europe",
                        "meta_description": "Europe for the summer meant one thing was uppermost in my thoughts: alpinism. Matterhorn - too daunting. Damavand - a bit pedestrian. Kazbek? Just right.",
                        "author_id": "1",
                        "created_at": "2018-10-09 08:20:11",
                        "created_by": "1",
                        "updated_at": "2018-10-17 10:41:30",
                        "updated_by": "1",
                        "published_at": "2015-09-10 08:20:00",
                        "published_by": "1",
                        "custom_excerpt": "This year I was lucky enough to join two UIAA youth meets. Youth rock climbing in Catalonia, organised by the FEEC, and the Kazbek mountaineering expedition, organised by the Mountaineering & Climbing Association of Georgia.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbc65057cc70a140e7fd118",
                        "uuid": "ba79c957-ffd1-41b0-b0b5-a5a027a2a1c1",
                        "title": "Visualizing book club cliques (and replacing them with AI)",
                        "slug": "visualizing-book-club-ai",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"caption\":\"\",\"src\":\"/content/images/2018/10/Screenshot-20181023153030-774x296.png\"}],[\"image\",{\"src\":\"/content/images/2018/10/heatmap-1.png\"}],[\"image\",{\"src\":\"/content/images/2018/10/network-2.png\"}],[\"image\",{\"src\":\"/content/images/2018/10/Screenshot-20181023153516-777x83.png\"}]],\"markups\":[[\"a\",[\"href\",\"https://networkx.github.io/\"]],[\"s\"],[\"em\"],[\"a\",[\"href\",\"scikit-learn.org\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/F1_score\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"My book club is quite good about recording what we read each month, and noting what score each of us give each book (out of 13, for historical reasons) on a growing spreadsheet. The dataset is imperfect, as people have joined and left, and not everyone has read every book, but there should be enough meat for some fun.\"]]],[1,\"p\",[[0,[],0,\"First off, the scores look something like the table below, but with 17 more rows. Blanks are books that people either didn't read or didn't finish.\"]]],[10,0],[1,\"p\",[[0,[],0,\"We then pair everyone up, and calculate a 'disagreement' standard deviation between each possible pairing, ignoring books that either person didn't read. This gives us a nice looking heat map, where higher numbers indicate a higher level of disagreement. The biggest difference is between Kyle and Jeff, whose ratings differ by an SD of 4.8. The most closely paired are Adam and me, with an SD of 1.7.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Then we can use the magic of \"],[0,[0],1,\"NetworkX\"],[0,[],0,\" to visualize these cliques in a \"],[0,[1],1,\"better\"],[0,[],0,\" prettier way. Node size represents number of books read, while line weight and darkness scales by how many books a pair has in common. People's disagreements are modelled as springs, so members with closer agreements are pulled closer together on the diagram by stronger springs.\"]]],[1,\"p\",[[0,[],0,\"As noted, Kyle is the definite outlier, while Tim and Adam float around a bit in the middle of the network. The newer members have thinner connecting lines, while the stalwarts are connected by pleasing thick blue lines.\"]]],[10,2],[1,\"h3\",[[0,[],0,\"Off the deep end: teaching a machine to book club\"]]],[1,\"p\",[[0,[],0,\"Finally, let's see if it would be possible to do away with book club meetings altogether and replace my fellow book-readers with a less argumentative machine learning model. Skipping over the obvious fact that there is nowhere near enough data for this to be meaningful, how closely can a model predict what score each member is likely to give a specific book?\"]]],[1,\"p\",[[0,[],0,\"I started off by adding additional metadata to each book we've read: genre, length and year, as well as author country, language and gender. I also decided to make the challenge a bit easier: instead of a score from 1-13, the model only needs to tell if someone \"],[0,[2],1,\"liked \"],[0,[],0,\"the book, which I define as a score above 8.\"]]],[1,\"p\",[[0,[],0,\"Before building and training the model, the data needs to be prepared a bit more. I dropped members who hadn't read enough books, and books that hadn't been read by enough people. Non-numerical columns (such as genre) need to be replaced with binary values that the model can more easily understand. Finally, we split it into a training set (about 75% of the rows) which the model will use to learn, and a test set (the remaining 25%) that it doesn't get to see until it's time to assess its performance.\"]]],[1,\"p\",[[0,[],0,\"Finally, using the incredible \"],[0,[3],1,\"scikit-learn\"],[0,[],0,\" libraries, I created and trained a \"],[0,[4,2],1,\"k\"],[0,[],1,\"-NN\"],[0,[],0,\" model and ran a bunch of tests to see if it successfully managed to impersonate anyone in the book club. And in turns out that the person it impersonates best is... me! Let's see what the model thinks of itself, in terms of how well it predicts likes:\"]]],[3,\"ul\",[[[0,[],0,\"Accuracy (guesses that are correct): 60%\"]],[[0,[],0,\"Precision (like identifications that are correct): 50%\"]],[[0,[],0,\"Recall (actual likes identified): 100%\"]],[[0,[5],1,\"F1 score\"],[0,[],0,\" (a balance between precision and recall): 67%\"]]]],[1,\"p\",[[0,[],0,\"The recall may sound impressive, but in this case it is because the model is a bit trigger-ready with likes. The table below shows the test results for AI-Chris, with an L for like and a D for dislike. This makes it pretty clear why the recall is perfect, but the precision is as good as guessing. Still, 60% correct guesses is better than I expected!\"]]],[10,3]]}",
                        "html": "<p>My book club is quite good about recording what we read each month, and noting what score each of us give each book (out of 13, for historical reasons) on a growing spreadsheet. The dataset is imperfect, as people have joined and left, and not everyone has read every book, but there should be enough meat for some fun.</p><p>First off, the scores look something like the table below, but with 17 more rows. Blanks are books that people either didn't read or didn't finish.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/Screenshot-20181023153030-774x296.png\" class=\"kg-image\"></figure><p>We then pair everyone up, and calculate a 'disagreement' standard deviation between each possible pairing, ignoring books that either person didn't read. This gives us a nice looking heat map, where higher numbers indicate a higher level of disagreement. The biggest difference is between Kyle and Jeff, whose ratings differ by an SD of 4.8. The most closely paired are Adam and me, with an SD of 1.7.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/heatmap-1.png\" class=\"kg-image\"></figure><p>Then we can use the magic of <a href=\"https://networkx.github.io/\">NetworkX</a> to visualize these cliques in a <s>better</s> prettier way. Node size represents number of books read, while line weight and darkness scales by how many books a pair has in common. People's disagreements are modelled as springs, so members with closer agreements are pulled closer together on the diagram by stronger springs.</p><p>As noted, Kyle is the definite outlier, while Tim and Adam float around a bit in the middle of the network. The newer members have thinner connecting lines, while the stalwarts are connected by pleasing thick blue lines.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/network-2.png\" class=\"kg-image\"></figure><h3 id=\"off-the-deep-end-teaching-a-machine-to-book-club\">Off the deep end: teaching a machine to book club</h3><p>Finally, let's see if it would be possible to do away with book club meetings altogether and replace my fellow book-readers with a less argumentative machine learning model. Skipping over the obvious fact that there is nowhere near enough data for this to be meaningful, how closely can a model predict what score each member is likely to give a specific book?</p><p>I started off by adding additional metadata to each book we've read: genre, length and year, as well as author country, language and gender. I also decided to make the challenge a bit easier: instead of a score from 1-13, the model only needs to tell if someone <em>liked </em>the book, which I define as a score above 8.</p><p>Before building and training the model, the data needs to be prepared a bit more. I dropped members who hadn't read enough books, and books that hadn't been read by enough people. Non-numerical columns (such as genre) need to be replaced with binary values that the model can more easily understand. Finally, we split it into a training set (about 75% of the rows) which the model will use to learn, and a test set (the remaining 25%) that it doesn't get to see until it's time to assess its performance.</p><p>Finally, using the incredible <a href=\"scikit-learn.org\">scikit-learn</a> libraries, I created and trained a <a href=\"https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm\"><em>k</em>-NN</a> model and ran a bunch of tests to see if it successfully managed to impersonate anyone in the book club. And in turns out that the person it impersonates best is... me! Let's see what the model thinks of itself, in terms of how well it predicts likes:</p><ul><li>Accuracy (guesses that are correct): 60%</li><li>Precision (like identifications that are correct): 50%</li><li>Recall (actual likes identified): 100%</li><li><a href=\"https://en.wikipedia.org/wiki/F1_score\">F1 score</a> (a balance between precision and recall): 67%</li></ul><p>The recall may sound impressive, but in this case it is because the model is a bit trigger-ready with likes. The table below shows the test results for AI-Chris, with an L for like and a D for dislike. This makes it pretty clear why the recall is perfect, but the precision is as good as guessing. Still, 60% correct guesses is better than I expected!</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/Screenshot-20181023153516-777x83.png\" class=\"kg-image\"></figure>",
                        "comment_id": "5bbc65057cc70a140e7fd118",
                        "markdown": "My book club is quite good about recording what we read each month, and noting\nwhat score each of us give each book (out of 13, for historical reasons) on a\ngrowing spreadsheet. The dataset is imperfect, as people have joined and left,\nand not everyone has read every book, but there should be enough meat for some\nfun.\n\nFirst off, the scores look something like the table below, but with 17 more\nrows. Blanks are books that people either didn't read or didn't finish.\n\nWe then pair everyone up, and calculate a 'disagreement' standard deviation\nbetween each possible pairing, ignoring books that either person didn't read.\nThis gives us a nice looking heat map, where higher numbers indicate a higher\nlevel of disagreement. The biggest difference is between Kyle and Jeff, whose\nratings differ by an SD of 4.8. The most closely paired are Adam and me, with an\nSD of 1.7.\n\nThen we can use the magic of NetworkX [https://networkx.github.io/]  to\nvisualize these cliques in a better  prettier way. Node size represents number\nof books read, while line weight and darkness scales by how many books a pair\nhas in common. People's disagreements are modelled as springs, so members with\ncloser agreements are pulled closer together on the diagram by stronger springs.\n\nAs noted, Kyle is the definite outlier, while Tim and Adam float around a bit in\nthe middle of the network. The newer members have thinner connecting lines,\nwhile the stalwarts are connected by pleasing thick blue lines.\n\nOff the deep end: teaching a machine to book club\nFinally, let's see if it would be possible to do away with book club meetings\naltogether and replace my fellow book-readers with a less argumentative machine\nlearning model. Skipping over the obvious fact that there is nowhere near enough\ndata for this to be meaningful, how closely can a model predict what score each\nmember is likely to give a specific book?\n\nI started off by adding additional metadata to each book we've read: genre,\nlength and year, as well as author country, language and gender. I also decided\nto make the challenge a bit easier: instead of a score from 1-13, the model only\nneeds to tell if someone liked the book, which I define as a score above 8.\n\nBefore building and training the model, the data needs to be prepared a bit\nmore. I dropped members who hadn't read enough books, and books that hadn't been\nread by enough people. Non-numerical columns (such as genre) need to be replaced\nwith binary values that the model can more easily understand. Finally, we split\nit into a training set (about 75% of the rows) which the model will use to\nlearn, and a test set (the remaining 25%) that it doesn't get to see until it's\ntime to assess its performance.\n\nFinally, using the incredible scikit-learn [scikit-learn.org]  libraries, I\ncreated and trained a k-NN\n[https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm]  model and ran a\nbunch of tests to see if it successfully managed to impersonate anyone in the\nbook club. And in turns out that the person it impersonates best is... me! Let's\nsee what the model thinks of itself, in terms of how well it predicts likes:\n\n * Accuracy (guesses that are correct): 60%\n * Precision (like identifications that are correct): 50%\n * Recall (actual likes identified): 100%\n * F1 score [https://en.wikipedia.org/wiki/F1_score]  (a balance between\n   precision and recall): 67%\n\nThe recall may sound impressive, but in this case it is because the model is a\nbit trigger-ready with likes. The table below shows the test results for\nAI-Chris, with an L for like and a D for dislike. This makes it pretty clear why\nthe recall is perfect, but the precision is as good as guessing. Still, 60%\ncorrect guesses is better than I expected!",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "Visualizing book club cliques (and replacing them with AI)",
                        "meta_description": "Let's see if it would be possible to do away with book club meetings altogether and replace my fellow book-readers with a less argumentative machine learning model.",
                        "author_id": "1",
                        "created_at": "2018-10-09 08:21:25",
                        "created_by": "1",
                        "updated_at": "2018-10-23 13:50:56",
                        "updated_by": "1",
                        "published_at": "2018-02-15 10:58:00",
                        "published_by": "1",
                        "custom_excerpt": "My book club is quite good about recording what we read each month, and noting what score each of us give each book. Let's see if it would be possible to do away with book club meetings altogether and replace my fellow book-readers with a less argumentative machine learning model.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbc65157cc70a140e7fd11a",
                        "uuid": "138bec7c-dc5b-4591-8225-f094c96815d5",
                        "title": "A semi-scientific look at acclimatization",
                        "slug": "scientific-look-acclimatization",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2018/11/mountains_big-1.png\"}],[\"image\",{\"src\":\"/content/images/2018/11/gains-2.png\"}]],\"markups\":[[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Topographic_prominence#In_mountaineering\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Ala_Archa_National_Park\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Table_Mountain\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Kebnekaise\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Black_Peak_(Washington)\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Mount_Adams_(Washington)\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Pigeon_Spire\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/John_Muir_Trail\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Mount_Langley\"]],[\"a\",[\"href\",\"http://www.ericandtaylor.com/climbing-peak-uchitel/\"]],[\"a\",[\"href\",\"http://www.tuncfindik.com/kirgizistan-ala-archa-daglari-korona-peak-4800m-cikisi/\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Khan_Tengri\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Mount_Kazbek\"]],[\"a\",[\"href\",\"https://rdrn.me/summer-in-europe/\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Pico_de_Orizaba\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Iztaccihuatl\"]],[\"a\",[\"href\",\"https://rdrn.me/primero-somos-tontos/\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Huayna_Potos%C3%AD\"]],[\"a\",[\"href\",\"https://bokeh.pydata.org/en/latest/\"]],[\"a\",[\"href\",\"https://rdrn.me/scientific-look-acclimatization/mountains.png\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/GR_11_(Spain)\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Sucre\"]],[\"sup\"],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Altitude_sickness\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Death_valley\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"I've climbed about seven (\"],[0,[0],1,\"depending on what we count\"],[0,[],0,\") mountains above 4,000 metres, and lots more of other altitudes. After my latest trip (to \"],[0,[1],1,\"Ala Archa National Park\"],[0,[],0,\" in Kyrgyzstan) where I took a very careful approach to acclimatization, I decided to have a look at my previous trips to see if anything of statistical value could be dredged out...\"]]],[1,\"p\",[[0,[],0,\"...it couldn't, so I decided to make some pretty visualizations instead! First up, I tabulated the twice-daily elevation on each of eight selected trips: how high I woke up, and the highest point attained in the day. The trips are as follows:\"]]],[3,\"ul\",[[[0,[],0,\"South Africa: many many ascents of \"],[0,[2],1,\"Table Mountain\"],[0,[],0,\" (1,085 m)\"]],[[0,[],0,\"Sweden: a winter ski-ascent of \"],[0,[3],1,\"Kebnekaise\"],[0,[],0,\" (2,099 m – Sweden's highest)\"]],[[0,[],0,\"Washington, USA: two hikes, followed by ascents of \"],[0,[4],1,\"Black Peak\"],[0,[],0,\" (2,736 m) and \"],[0,[5],1,\"Mt Adams\"],[0,[],0,\" (3,742 m) and then \"],[0,[6],1,\"Pigeon Spire\"],[0,[],0,\" in Canada (3,156 m – not charted below)\"]],[[0,[],0,\"California, USA: a spring hike of parts of the \"],[0,[7],1,\"JMT\"],[0,[],0,\", including Mather Pass (3682 m) and \"],[0,[8],1,\"Mt Langley\"],[0,[],0,\" (4,275 m)\"]],[[0,[],0,\"Kyrgyzstan: an acclimatisation climb in Ala Archa National Park of \"],[0,[9],1,\"Uchitel\"],[0,[],0,\" (4,535 m) and \"],[0,[10],1,\"Korona\"],[0,[],0,\" (4,860 m) in preparation for an (abandoned) attempt on \"],[0,[11],1,\"Khan Tengri\"],[0,[],0,\" (7,010 m)\"]],[[0,[],0,\"Georgia: an expedition-style climb of \"],[0,[12],1,\"Kazbek\"],[0,[],0,\" (5,047 m), \"],[0,[13],1,\"documented here\"]],[[0,[],0,\"Mexico: a half-hearted attempt on \"],[0,[14],1,\"Orizaba\"],[0,[],0,\" (5,636 m – we pulled out before making an attempt) followed by acclimatization on \"],[0,[15],1,\"Iztaccíhuatl\"],[0,[],0,\" (5,230 m) and then a successful summit of Orizaba, \"],[0,[16],1,\"all documented here\"]],[[0,[],0,\"Boliva: lots of backpacking followed by a guided climb of \"],[0,[17],1,\"Huayna Potosí\"],[0,[],0,\" (6,088 m)\"]]]],[1,\"p\",[[0,[],0,\"The twice-daily values from each trip are plotted in the chart below (created using \"],[0,[18],1,\"Bokeh\"],[0,[],0,\") or ctrl-click \"],[0,[19],1,\"here\"],[0,[],0,\" for a larger version. Note that I've squared the vertical axis to exaggerate the differences, so Kebnekaise appears quadruple Table Mountain, when it's actually double.\"]]],[1,\"p\",[[0,[],0,\"The only time I've suffered altitude sickness was on our first Orizaba attempt (Mexico, day 5) where we got up to ~4,800 m just five days after leaving sea level. As you can see we quickly dropped down as low as we could and reassessed. After acclimatizing on Iztaccíhuatl, where we spent several hours above 5,000 metres, we returned to Orizaba for an easy climb to the top.\"]]],[1,\"p\",[[0,[],0,\"The chart makes clear that Kazbek was easily the most steady ascent, and the graph doesn't even show that I'd been up to around 3,000 m in \"],[0,[20],1,\"Spain\"],[0,[],0,\" just over a week before – as a result, the 5,047 m summit was a breeze, physically.\"]]],[10,0],[1,\"p\",[[0,[],0,\"The above is very attractive, but it doesn't make it very easy to compare altitudes. The bar chart below ditches the time axis to make this a bit easier. Each vertical jump represents a time where I ascended higher than I had previously been on that trip, ignoring times when I stayed still or descended. Bolivia starts at 2,810 m because I spent weeks in \"],[0,[21],1,\"Sucre\"],[0,[],0,\", so that almost became my 'sea level'.\"]]],[1,\"p\",[[0,[],0,\"Most of the big jumps are sensibly below 4,000 m, where altitude effects are generally less\"],[0,[22],0,\"[\"],[0,[23],1,\"citation needed\"],[0,[],1,\"]\"],[0,[],0,\". As you can see, the single biggest jump was in California, where, a day after exploring \"],[0,[24],1,\"Death Valley\"],[0,[],0,\" (-86 m), we ascended 3,020 vertical metres (some by car) to Bishop Pass (3,649 m) and slept in the snow at pretty much that height.\"]]],[1,\"p\",[[0,[],0,\"Another big jump was in Kyrgyzstan. After a 35 hour flight and one night's sleep in Bishkek, we ascended 2,500 metres to our camp site. Although Huayna Potosí in Bolivia is still the highest elevation I've reached, I never ascended more than 1,000 in a single day, and my baseline was already extremely high. Result – I felt great, even at 6,088 metres above sea level!\"]]],[10,1],[1,\"p\",[[0,[],0,\"Note that because this graph has no temporal information, it masks how quickly these pushes happened. So although Mexico and Kyrgyzstan look quite similar, in reality we spent several rest days at altitude in Kyrgyzstan before daring to above 4,800 metres, whereas in Mexico we rushed straight at it without a moment's pause.\"]]],[1,\"p\",[[0,[],0,\"What both of these charts lose is technical difficulty: Korona is the only mountain that required steep ice climbing near the summit – not easy at around 4,800 metres!\"]]]]}",
                        "html": "<p>I've climbed about seven (<a href=\"https://en.wikipedia.org/wiki/Topographic_prominence#In_mountaineering\">depending on what we count</a>) mountains above 4,000 metres, and lots more of other altitudes. After my latest trip (to <a href=\"https://en.wikipedia.org/wiki/Ala_Archa_National_Park\">Ala Archa National Park</a> in Kyrgyzstan) where I took a very careful approach to acclimatization, I decided to have a look at my previous trips to see if anything of statistical value could be dredged out...</p><p>...it couldn't, so I decided to make some pretty visualizations instead! First up, I tabulated the twice-daily elevation on each of eight selected trips: how high I woke up, and the highest point attained in the day. The trips are as follows:</p><ul><li>South Africa: many many ascents of <a href=\"https://en.wikipedia.org/wiki/Table_Mountain\">Table Mountain</a> (1,085 m)</li><li>Sweden: a winter ski-ascent of <a href=\"https://en.wikipedia.org/wiki/Kebnekaise\">Kebnekaise</a> (2,099 m – Sweden's highest)</li><li>Washington, USA: two hikes, followed by ascents of <a href=\"https://en.wikipedia.org/wiki/Black_Peak_(Washington)\">Black Peak</a> (2,736 m) and <a href=\"https://en.wikipedia.org/wiki/Mount_Adams_(Washington)\">Mt Adams</a> (3,742 m) and then <a href=\"https://en.wikipedia.org/wiki/Pigeon_Spire\">Pigeon Spire</a> in Canada (3,156 m – not charted below)</li><li>California, USA: a spring hike of parts of the <a href=\"https://en.wikipedia.org/wiki/John_Muir_Trail\">JMT</a>, including Mather Pass (3682 m) and <a href=\"https://en.wikipedia.org/wiki/Mount_Langley\">Mt Langley</a> (4,275 m)</li><li>Kyrgyzstan: an acclimatisation climb in Ala Archa National Park of <a href=\"http://www.ericandtaylor.com/climbing-peak-uchitel/\">Uchitel</a> (4,535 m) and <a href=\"http://www.tuncfindik.com/kirgizistan-ala-archa-daglari-korona-peak-4800m-cikisi/\">Korona</a> (4,860 m) in preparation for an (abandoned) attempt on <a href=\"https://en.wikipedia.org/wiki/Khan_Tengri\">Khan Tengri</a> (7,010 m)</li><li>Georgia: an expedition-style climb of <a href=\"https://en.wikipedia.org/wiki/Mount_Kazbek\">Kazbek</a> (5,047 m), <a href=\"https://rdrn.me/summer-in-europe/\">documented here</a></li><li>Mexico: a half-hearted attempt on <a href=\"https://en.wikipedia.org/wiki/Pico_de_Orizaba\">Orizaba</a> (5,636 m – we pulled out before making an attempt) followed by acclimatization on <a href=\"https://en.wikipedia.org/wiki/Iztaccihuatl\">Iztaccíhuatl</a> (5,230 m) and then a successful summit of Orizaba, <a href=\"https://rdrn.me/primero-somos-tontos/\">all documented here</a></li><li>Boliva: lots of backpacking followed by a guided climb of <a href=\"https://en.wikipedia.org/wiki/Huayna_Potos%C3%AD\">Huayna Potosí</a> (6,088 m)</li></ul><p>The twice-daily values from each trip are plotted in the chart below (created using <a href=\"https://bokeh.pydata.org/en/latest/\">Bokeh</a>) or ctrl-click <a href=\"https://rdrn.me/scientific-look-acclimatization/mountains.png\">here</a> for a larger version. Note that I've squared the vertical axis to exaggerate the differences, so Kebnekaise appears quadruple Table Mountain, when it's actually double.</p><p>The only time I've suffered altitude sickness was on our first Orizaba attempt (Mexico, day 5) where we got up to ~4,800 m just five days after leaving sea level. As you can see we quickly dropped down as low as we could and reassessed. After acclimatizing on Iztaccíhuatl, where we spent several hours above 5,000 metres, we returned to Orizaba for an easy climb to the top.</p><p>The chart makes clear that Kazbek was easily the most steady ascent, and the graph doesn't even show that I'd been up to around 3,000 m in <a href=\"https://en.wikipedia.org/wiki/GR_11_(Spain)\">Spain</a> just over a week before – as a result, the 5,047 m summit was a breeze, physically.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/mountains_big-1.png\" class=\"kg-image\"></figure><p>The above is very attractive, but it doesn't make it very easy to compare altitudes. The bar chart below ditches the time axis to make this a bit easier. Each vertical jump represents a time where I ascended higher than I had previously been on that trip, ignoring times when I stayed still or descended. Bolivia starts at 2,810 m because I spent weeks in <a href=\"https://en.wikipedia.org/wiki/Sucre\">Sucre</a>, so that almost became my 'sea level'.</p><p>Most of the big jumps are sensibly below 4,000 m, where altitude effects are generally less<sup>[<a href=\"https://en.wikipedia.org/wiki/Altitude_sickness\">citation needed</a>]</sup>. As you can see, the single biggest jump was in California, where, a day after exploring <a href=\"https://en.wikipedia.org/wiki/Death_valley\">Death Valley</a> (-86 m), we ascended 3,020 vertical metres (some by car) to Bishop Pass (3,649 m) and slept in the snow at pretty much that height.</p><p>Another big jump was in Kyrgyzstan. After a 35 hour flight and one night's sleep in Bishkek, we ascended 2,500 metres to our camp site. Although Huayna Potosí in Bolivia is still the highest elevation I've reached, I never ascended more than 1,000 in a single day, and my baseline was already extremely high. Result – I felt great, even at 6,088 metres above sea level!</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/gains-2.png\" class=\"kg-image\"></figure><p>Note that because this graph has no temporal information, it masks how quickly these pushes happened. So although Mexico and Kyrgyzstan look quite similar, in reality we spent several rest days at altitude in Kyrgyzstan before daring to above 4,800 metres, whereas in Mexico we rushed straight at it without a moment's pause.</p><p>What both of these charts lose is technical difficulty: Korona is the only mountain that required steep ice climbing near the summit – not easy at around 4,800 metres!</p>",
                        "comment_id": "5bbc65157cc70a140e7fd11a",
                        "markdown": "I've climbed about seven (depending on what we count) mountains above 4,000\nmetres, and lots more of other altitudes. After my latest trip (to Ala Archa\nNational Park [https://en.wikipedia.org/wiki/Ala_Archa_National_Park]  in\nKyrgyzstan) where I took a very careful approach to acclimatization, I decided\nto have a look at my previous trips to see if anything of statistical value\ncould be dredged out...\n\n...it couldn't, so I decided to make some pretty visualizations instead! First\nup, I tabulated the twice-daily elevation on each of eight selected trips: how\nhigh I woke up, and the highest point attained in the day. The trips are as\nfollows:\n\n * South Africa: many many ascents of Table Mountain\n   [https://en.wikipedia.org/wiki/Table_Mountain]  (1,085 m)\n * Sweden: a winter ski-ascent of Kebnekaise\n   [https://en.wikipedia.org/wiki/Kebnekaise]  (2,099 m – Sweden's highest)\n * Washington, USA: two hikes, followed by ascents of Black Peak\n   [https://en.wikipedia.org/wiki/Black_Peak_(Washington)]  (2,736 m) and Mt\n   Adams [https://en.wikipedia.org/wiki/Mount_Adams_(Washington)]  (3,742 m) and\n   then Pigeon Spire [https://en.wikipedia.org/wiki/Pigeon_Spire]  in Canada\n   (3,156 m – not charted below)\n * California, USA: a spring hike of parts of the JMT\n   [https://en.wikipedia.org/wiki/John_Muir_Trail], including Mather Pass (3682\n   m) and Mt Langley [https://en.wikipedia.org/wiki/Mount_Langley]  (4,275 m)\n * Kyrgyzstan: an acclimatisation climb in Ala Archa National Park of Uchitel\n   [http://www.ericandtaylor.com/climbing-peak-uchitel/]  (4,535 m) and Korona\n   [http://www.tuncfindik.com/kirgizistan-ala-archa-daglari-korona-peak-4800m-cikisi/] \n    (4,860 m) in preparation for an (abandoned) attempt on Khan Tengri\n   [https://en.wikipedia.org/wiki/Khan_Tengri]  (7,010 m)\n * Georgia: an expedition-style climb of Kazbek\n   [https://en.wikipedia.org/wiki/Mount_Kazbek]  (5,047 m), documented here\n   [https://rdrn.me/summer-in-europe/]\n * Mexico: a half-hearted attempt on Orizaba\n   [https://en.wikipedia.org/wiki/Pico_de_Orizaba]  (5,636 m – we pulled out\n   before making an attempt) followed by acclimatization on Iztaccíhuatl\n   [https://en.wikipedia.org/wiki/Iztaccihuatl]  (5,230 m) and then a successful\n   summit of Orizaba, all documented here\n   [https://rdrn.me/primero-somos-tontos/]\n * Boliva: lots of backpacking followed by a guided climb of Huayna Potosí\n   [https://en.wikipedia.org/wiki/Huayna_Potos%C3%AD]  (6,088 m)\n\nThe twice-daily values from each trip are plotted in the chart below (created\nusing Bokeh [https://bokeh.pydata.org/en/latest/]) or ctrl-click here\n[https://rdrn.me/scientific-look-acclimatization/mountains.png]  for a larger\nversion. Note that I've squared the vertical axis to exaggerate the differences,\nso Kebnekaise appears quadruple Table Mountain, when it's actually double.\n\nThe only time I've suffered altitude sickness was on our first Orizaba attempt\n(Mexico, day 5) where we got up to ~4,800 m just five days after leaving sea\nlevel. As you can see we quickly dropped down as low as we could and reassessed.\nAfter acclimatizing on Iztaccíhuatl, where we spent several hours above 5,000\nmetres, we returned to Orizaba for an easy climb to the top.\n\nThe chart makes clear that Kazbek was easily the most steady ascent, and the\ngraph doesn't even show that I'd been up to around 3,000 m in Spain\n[https://en.wikipedia.org/wiki/GR_11_(Spain)]  just over a week before – as a\nresult, the 5,047 m summit was a breeze, physically.\n\nThe above is very attractive, but it doesn't make it very easy to compare\naltitudes. The bar chart below ditches the time axis to make this a bit easier.\nEach vertical jump represents a time where I ascended higher than I had\npreviously been on that trip, ignoring times when I stayed still or descended.\nBolivia starts at 2,810 m because I spent weeks in Sucre\n[https://en.wikipedia.org/wiki/Sucre], so that almost became my 'sea level'.\n\nMost of the big jumps are sensibly below 4,000 m, where altitude effects are\ngenerally less[citation needed [https://en.wikipedia.org/wiki/Altitude_sickness]\n]. As you can see, the single biggest jump was in California, where, a day after\nexploring Death Valley [https://en.wikipedia.org/wiki/Death_valley]  (-86 m), we\nascended 3,020 vertical metres (some by car) to Bishop Pass (3,649 m) and slept\nin the snow at pretty much that height.\n\nAnother big jump was in Kyrgyzstan. After a 35 hour flight and one night's sleep\nin Bishkek, we ascended 2,500 metres to our camp site. Although Huayna Potosí in\nBolivia is still the highest elevation I've reached, I never ascended more than\n1,000 in a single day, and my baseline was already extremely high. Result – I\nfelt great, even at 6,088 metres above sea level!\n\nNote that because this graph has no temporal information, it masks how quickly\nthese pushes happened. So although Mexico and Kyrgyzstan look quite similar, in\nreality we spent several rest days at altitude in Kyrgyzstan before daring to\nabove 4,800 metres, whereas in Mexico we rushed straight at it without a\nmoment's pause.\n\nWhat both of these charts lose is technical difficulty: Korona is the only\nmountain that required steep ice climbing near the summit – not easy at around\n4,800 metres!",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "A semi-scientific look at acclimatization",
                        "meta_description": "I've climbed about seven mountains above 4,000 metres. After my last trip to Kyrgyzstan, I decided to see if any value could be had from my trip stats...",
                        "author_id": "1",
                        "created_at": "2018-10-09 08:21:41",
                        "created_by": "1",
                        "updated_at": "2018-11-02 08:59:21",
                        "updated_by": "1",
                        "published_at": "2018-08-21 13:15:00",
                        "published_by": "1",
                        "custom_excerpt": "I've climbed about seven mountains above 4,000 metres. After my latest trip to Kyrgyzstan, where I took a very careful approach to acclimatization, I decided to have a look at my previous trips to see if anything of statistical value could be dredged out...",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbc65227cc70a140e7fd11c",
                        "uuid": "5b316749-4fa6-4ded-82d1-dab8aef0b278",
                        "title": "Open data and energy access in Tanzania",
                        "slug": "open-data-access-tanzania",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2018/10/pic.png\"}],[\"image\",{\"src\":\"/content/images/2018/10/Screenshot-20181015141451-1399x900.png\"}]],\"markups\":[[\"a\",[\"href\",\"http://seaborn.pydata.org/\"]],[\"a\",[\"href\",\"https://openknowledge.worldbank.org/bitstream/handle/10986/28622/120678-BRI-PUBLIC-24-10-2017-14-33-7-LWLJFinOKR.pdf?sequence=1&isAllowed=y\"]],[\"a\",[\"href\",\"https://energypedia.info/wiki/Mini_Grids\"]],[\"a\",[\"href\",\"https://energypedia.info/wiki/Solar_Home_Systems_(SHS)\"]],[\"strong\"]],\"sections\":[[1,\"p\",[[0,[],0,\"Based on work in Tanzania with the government, several private developers and other stakeholders, two colleagues and I put together a report on the benefits of open data in off-grid access. I also used it as an excuse to play with \"],[0,[0],1,\"seaborn\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Please have a look at the full article \"],[0,[1],1,\"here\"],[0,[],0,\". What follows is a (very) brief summary and two of the plots I made with seaborn.\"]]],[1,\"h3\",[[0,[],0,\"The bottom line\"]]],[1,\"p\",[[0,[],0,\"Through new technologies and business models, off-grid power markets promise to bring electricity access to more rural communities at a faster pace than is possible with grid extension alone. Apart from regulatory support and access to international finance, this incipient market sector depends critically on accurate and timely data. New approaches to data are gaining momentum in developing countries and have the potential to transform the rural electrification agenda.\"]]],[1,\"h3\",[[0,[],0,\"Why are we talking about off-grid electricity?\"]]],[1,\"p\",[[0,[],0,\"More than a billion people lack access to electricity, and many of them live far from the grid.\"]]],[10,0],[1,\"h3\",[[0,[],0,\"Where does off-grid technology fit in?\"]]],[1,\"p\",[[0,[],0,\"When villages or towns are very far from existing infrastructure, or are very small, it can be much more cost-effective to use \"],[0,[2],1,\"mini-grid\"],[0,[],0,\" or \"],[0,[3],1,\"stand-alone\"],[0,[],0,\" systems to provide electricity.\"]]],[10,1],[1,\"h3\",[[0,[],0,\"What are the obstacles to market analysis in this field?\"]]],[1,\"p\",[[0,[],0,\"A lack of technical data, along with outdated institutional systems, can hinder progress. These new technologies and approaches are creating possibilities that did not exist before, but they are capital intensive and have a long payback time in a sector where capital is still relatively limited. Careful market analysis is therefore required to target communities that are in need, can pay, have potential for growth, and are unlikely to be connected to the grid before the off-grid project can pay off. The information required for this analysis is often hard to come by or non-existent in developing countries, which prevents both the private and public sectors from being able to plan strategically.\"]]],[1,\"h3\",[[0,[],0,\"Five key lessons and recommendations emerge from efforts to date\"]]],[3,\"ul\",[[[0,[4],1,\"Recommendation 1.\"],[0,[],0,\" The market for off-grid development is there and can be an important driver of increased access in areas that are far from the grid. Even when countries have ambitious goals of connecting the entire country, off-grid solutions can be a stopgap to quicken the pace of electrification, while also increasing generating capacity—a particularly valuable factor in situations where system capacity is insufficient to supply newly extended grid lines.\"]],[[0,[4],1,\"Recommendation 2. \"],[0,[],0,\"GIS is already being used around the world to target areas that are both in need (far from the grid and not likely to be connected soon) and offering a promising market (densely populated and already spending on other fuels, while also offering the potential for development of non-household uses of electricity). GIS capabilities have allowed the sector to expand and attract international finance and interest, but governments and development partners must support these approaches to bring transformational change that will add benefit throughout the sector.\"]],[[0,[4],1,\"Recommendation 3.\"],[0,[],0,\" Many developing countries still suffer from a lack of accessible and transparent data, which discourages private sector investments at a larger scale. The problem lies not only in the actual lack of data, but also in making what data there are available for use. Attitudes are slowly changing, with many countries embracing the benefits created by open-data policies—a promising trend that should be encouraged.\"]],[[0,[4],1,\"Recommendation 4.\"],[0,[],0,\" Many of the technical advances achieved to date require highly specialized capacity and resources, which has kept many players from achieving higher efficiency. With open data and focused efforts in certain areas where data can be trans-formational as a public good, it is possible to create a more level playing field and reduce the barriers to entering the market. Modern analytics are showing promise by transforming data into insights and information that can be used to make decisions.\"]],[[0,[4],1,\"Recommendation 5.\"],[0,[],0,\" All the discoveries from the activities reported here have shown that support from the public sector is needed to foster interdepartmental and multi-stakeholder cooperation. Without alignment of goals between public and private institutions, private developers will constantly be on the defensive. They depend on government data for planning, and on government regulation and policy for continued profitability. Government planners should recognize that private developers offer a powerful force for improving access to electricity and the development benefits it brings.\"]]]]]}",
                        "html": "<p>Based on work in Tanzania with the government, several private developers and other stakeholders, two colleagues and I put together a report on the benefits of open data in off-grid access. I also used it as an excuse to play with <a href=\"http://seaborn.pydata.org/\">seaborn</a>.</p><p>Please have a look at the full article <a href=\"https://openknowledge.worldbank.org/bitstream/handle/10986/28622/120678-BRI-PUBLIC-24-10-2017-14-33-7-LWLJFinOKR.pdf?sequence=1&amp;isAllowed=y\">here</a>. What follows is a (very) brief summary and two of the plots I made with seaborn.</p><h3 id=\"the-bottom-line\">The bottom line</h3><p>Through new technologies and business models, off-grid power markets promise to bring electricity access to more rural communities at a faster pace than is possible with grid extension alone. Apart from regulatory support and access to international finance, this incipient market sector depends critically on accurate and timely data. New approaches to data are gaining momentum in developing countries and have the potential to transform the rural electrification agenda.</p><h3 id=\"why-are-we-talking-about-off-grid-electricity\">Why are we talking about off-grid electricity?</h3><p>More than a billion people lack access to electricity, and many of them live far from the grid.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/pic.png\" class=\"kg-image\"></figure><h3 id=\"where-does-off-grid-technology-fit-in\">Where does off-grid technology fit in?</h3><p>When villages or towns are very far from existing infrastructure, or are very small, it can be much more cost-effective to use <a href=\"https://energypedia.info/wiki/Mini_Grids\">mini-grid</a> or <a href=\"https://energypedia.info/wiki/Solar_Home_Systems_(SHS)\">stand-alone</a> systems to provide electricity.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/Screenshot-20181015141451-1399x900.png\" class=\"kg-image\"></figure><h3 id=\"what-are-the-obstacles-to-market-analysis-in-this-field\">What are the obstacles to market analysis in this field?</h3><p>A lack of technical data, along with outdated institutional systems, can hinder progress. These new technologies and approaches are creating possibilities that did not exist before, but they are capital intensive and have a long payback time in a sector where capital is still relatively limited. Careful market analysis is therefore required to target communities that are in need, can pay, have potential for growth, and are unlikely to be connected to the grid before the off-grid project can pay off. The information required for this analysis is often hard to come by or non-existent in developing countries, which prevents both the private and public sectors from being able to plan strategically.</p><h3 id=\"five-key-lessons-and-recommendations-emerge-from-efforts-to-date\">Five key lessons and recommendations emerge from efforts to date</h3><ul><li><strong>Recommendation 1.</strong> The market for off-grid development is there and can be an important driver of increased access in areas that are far from the grid. Even when countries have ambitious goals of connecting the entire country, off-grid solutions can be a stopgap to quicken the pace of electrification, while also increasing generating capacity—a particularly valuable factor in situations where system capacity is insufficient to supply newly extended grid lines.</li><li><strong>Recommendation 2. </strong>GIS is already being used around the world to target areas that are both in need (far from the grid and not likely to be connected soon) and offering a promising market (densely populated and already spending on other fuels, while also offering the potential for development of non-household uses of electricity). GIS capabilities have allowed the sector to expand and attract international finance and interest, but governments and development partners must support these approaches to bring transformational change that will add benefit throughout the sector.</li><li><strong>Recommendation 3.</strong> Many developing countries still suffer from a lack of accessible and transparent data, which discourages private sector investments at a larger scale. The problem lies not only in the actual lack of data, but also in making what data there are available for use. Attitudes are slowly changing, with many countries embracing the benefits created by open-data policies—a promising trend that should be encouraged.</li><li><strong>Recommendation 4.</strong> Many of the technical advances achieved to date require highly specialized capacity and resources, which has kept many players from achieving higher efficiency. With open data and focused efforts in certain areas where data can be trans-formational as a public good, it is possible to create a more level playing field and reduce the barriers to entering the market. Modern analytics are showing promise by transforming data into insights and information that can be used to make decisions.</li><li><strong>Recommendation 5.</strong> All the discoveries from the activities reported here have shown that support from the public sector is needed to foster interdepartmental and multi-stakeholder cooperation. Without alignment of goals between public and private institutions, private developers will constantly be on the defensive. They depend on government data for planning, and on government regulation and policy for continued profitability. Government planners should recognize that private developers offer a powerful force for improving access to electricity and the development benefits it brings.</li></ul>",
                        "comment_id": "5bbc65227cc70a140e7fd11c",
                        "markdown": "Based on work in Tanzania with the government, several private developers and\nother stakeholders, two colleagues and I put together a report on the benefits\nof open data in off-grid access. I also used it as an excuse to play with \nseaborn [http://seaborn.pydata.org/].\n\nPlease have a look at the full article here\n[https://openknowledge.worldbank.org/bitstream/handle/10986/28622/120678-BRI-PUBLIC-24-10-2017-14-33-7-LWLJFinOKR.pdf?sequence=1&isAllowed=y]\n. What follows is a (very) brief summary and two of the plots I made with\nseaborn.\n\nThe bottom line\nThrough new technologies and business models, off-grid power markets promise to\nbring electricity access to more rural communities at a faster pace than is\npossible with grid extension alone. Apart from regulatory support and access to\ninternational finance, this incipient market sector depends critically on\naccurate and timely data. New approaches to data are gaining momentum in\ndeveloping countries and have the potential to transform the rural\nelectrification agenda.\n\nWhy are we talking about off-grid electricity?\nMore than a billion people lack access to electricity, and many of them live far\nfrom the grid.\n\nWhere does off-grid technology fit in?\nWhen villages or towns are very far from existing infrastructure, or are very\nsmall, it can be much more cost-effective to use mini-grid\n[https://energypedia.info/wiki/Mini_Grids]  or stand-alone\n[https://energypedia.info/wiki/Solar_Home_Systems_(SHS)]  systems to provide\nelectricity.\n\nWhat are the obstacles to market analysis in this field?\nA lack of technical data, along with outdated institutional systems, can hinder\nprogress. These new technologies and approaches are creating possibilities that\ndid not exist before, but they are capital intensive and have a long payback\ntime in a sector where capital is still relatively limited. Careful market\nanalysis is therefore required to target communities that are in need, can pay,\nhave potential for growth, and are unlikely to be connected to the grid before\nthe off-grid project can pay off. The information required for this analysis is\noften hard to come by or non-existent in developing countries, which prevents\nboth the private and public sectors from being able to plan strategically.\n\nFive key lessons and recommendations emerge from efforts to date\n * Recommendation 1.  The market for off-grid development is there and can be an\n   important driver of increased access in areas that are far from the grid.\n   Even when countries have ambitious goals of connecting the entire country,\n   off-grid solutions can be a stopgap to quicken the pace of electrification,\n   while also increasing generating capacity—a particularly valuable factor in\n   situations where system capacity is insufficient to supply newly extended\n   grid lines.\n * Recommendation 2. GIS is already being used around the world to target areas\n   that are both in need (far from the grid and not likely to be connected soon)\n   and offering a promising market (densely populated and already spending on\n   other fuels, while also offering the potential for development of\n   non-household uses of electricity). GIS capabilities have allowed the sector\n   to expand and attract international finance and interest, but governments and\n   development partners must support these approaches to bring transformational\n   change that will add benefit throughout the sector.\n * Recommendation 3.  Many developing countries still suffer from a lack of\n   accessible and transparent data, which discourages private sector investments\n   at a larger scale. The problem lies not only in the actual lack of data, but\n   also in making what data there are available for use. Attitudes are slowly\n   changing, with many countries embracing the benefits created by open-data\n   policies—a promising trend that should be encouraged.\n * Recommendation 4.  Many of the technical advances achieved to date require\n   highly specialized capacity and resources, which has kept many players from\n   achieving higher efficiency. With open data and focused efforts in certain\n   areas where data can be trans-formational as a public good, it is possible to\n   create a more level playing field and reduce the barriers to entering the\n   market. Modern analytics are showing promise by transforming data into\n   insights and information that can be used to make decisions.\n * Recommendation 5.  All the discoveries from the activities reported here have\n   shown that support from the public sector is needed to foster\n   interdepartmental and multi-stakeholder cooperation. Without alignment of\n   goals between public and private institutions, private developers will\n   constantly be on the defensive. They depend on government data for planning,\n   and on government regulation and policy for continued profitability.\n   Government planners should recognize that private developers offer a powerful\n   force for improving access to electricity and the development benefits it\n   brings.",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "Open data and energy access in Tanzania",
                        "meta_description": "Based on work in Tanzania with the government and several private developers, I put together a report on the benefits of open data in off-grid access.",
                        "author_id": "1",
                        "created_at": "2018-10-09 08:21:54",
                        "created_by": "1",
                        "updated_at": "2018-10-17 11:24:17",
                        "updated_by": "1",
                        "published_at": "2017-11-24 12:01:00",
                        "published_by": "1",
                        "custom_excerpt": "Based on work in Tanzania with the government, several private developers and other stakeholders, two colleagues and I put together a report on the benefits of open data in off-grid access.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbc652a7cc70a140e7fd11e",
                        "uuid": "08774585-40a6-473a-9bde-4abe1ce13ba5",
                        "title": "'Lighting the World' - A paper I worked on",
                        "slug": "lighting-the-world",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2018/10/b.png\",\"caption\":\"\"}],[\"image\",{\"src\":\"/content/images/2018/10/4.png\",\"caption\":\"\"}]],\"markups\":[[\"a\",[\"href\",\"http://urn.kb.se/resolve?urn=urn%3Anbn%3Ase%3Akth%3Adiva-189473\"]],[\"em\"],[\"a\",[\"href\",\"http://www.onsset.org/\"]],[\"a\",[\"href\",\"https://github.com/carderne/PyOnSSET\"]],[\"sup\"],[\"a\",[\"href\",\"http://iopscience.iop.org/article/10.1088/1748-9326/aa7b29/meta\"]],[\"a\",[\"href\",\"https://webstore.iea.org/weo-2017-special-report-energy-access-outlook\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"I did my Master's thesis at KTH University of Technology on \"],[0,[0,1],2,\"A climate, land-use, energy and water nexus assessment of Bolivia\"],[0,[1],1,\". \"],[0,[],0,\"That is, I used various models and approaches to attempt to look holistically at Bolivia's land, energy and water use, taking into account the expected impacts of climate change. One of the models I used is called \"],[0,[2],1,\"OnSSET\"],[0,[],0,\" (EU-funding requires silly acronyms, apparently). This model (developed at KTH) is used to determine the best way to achieve universal electrification, by suggesting for each location in a country whether to extend the electrical grid, use a mini-grid system, or rather to rely on stand-alone household solar PV systems.\"]]],[10,0],[1,\"p\",[[0,[],0,\"Essentially the model takes in a variety of data on population distribution, energy infrastructure, solar intensity, night-time satellite imagery, as well as social and techno-economic factors. As a starting point, it uses this to estimate where the settlements are that already have electricity access. From there, the model spreads outwards from electrified locations, and for each new location, comparing the cost of connecting by the three different options. An exhaustive (-ing?) process.\"]]],[1,\"p\",[[0,[],0,\"I started overhauling this model while using it for my thesis, and as a result was talked into staying at the division as a Research Engineer. In essence, the model I inherited was a complicated mix of Excel macros, copy-pasting and difficult GIS instructions. During the course of my thesis I picked up Python and set to work replacing the model with a coherent Python library: \"],[0,[3],1,\"PyOnSSET\"]]],[1,\"p\",[[0,[],0,\"This made modelling a country a few orders of magnitude faster, and much easier to batch process huge jobs. So we immediately put it to work modelling the whole of Sub-Saharan Africa! The modelling unit is 1 km\"],[0,[4],1,\"2\"],[0,[],0,\" (more on that later) so this involved modelling more than 20 million individual units (iteratively!). We published this in Environmental Research Letters: \"],[0,[1,5],2,\"Lighting the World: the first application of an open source, spatial electrification tool (OnSSET) on Sub-Saharan Africa\"]]],[10,1],[1,\"p\",[[0,[],0,\"The model was also used in the International Energy Agency's \"],[0,[1,6],1,\"Special Report: Energy Access Outlook\"],[0,[],1,\" \"],[0,[],0,\"to show what is need to provide electricity to the millions in Africa currently without access (see the figure above, taken from the report.\"]]],[1,\"p\",[[0,[],0,\"Unfortunately, I left KTH and the Division for Energy Systems Analysis before getting the time to fix two of the model's biggest shortcomings:\"]]],[3,\"ol\",[[[0,[],0,\"Modelling 1 km\"],[0,[4],1,\"2\"],[0,[],0,\" grid cells, instead of representations of actual towns and villages. This means that a barren patch of land will get a solution, even if it's never inhabited. This is not only inefficient, computationally, but logically unsound. In the same way, larger towns and cities (anything more than 1 km\"],[0,[4],1,\"2\"],[0,[],0,\") can get split up into multiple modelling units, which doesn't make a lot of sense.\"]],[[0,[],0,\"It handles time in a very simplistic way, modelling only \"],[0,[1],1,\"today\"],[0,[],0,\" and \"],[0,[1],1,\"2030 \"],[0,[],0,\"(or another far-off year). This doesn't exactly give policy-makers and private sector developers a good vision of where they should be going \"],[0,[1],1,\"tomorrow.\"]]]]]}",
                        "html": "<p>I did my Master's thesis at KTH University of Technology on <a href=\"http://urn.kb.se/resolve?urn=urn%3Anbn%3Ase%3Akth%3Adiva-189473\"><em>A climate, land-use, energy and water nexus assessment of Bolivia</em></a><em>. </em>That is, I used various models and approaches to attempt to look holistically at Bolivia's land, energy and water use, taking into account the expected impacts of climate change. One of the models I used is called <a href=\"http://www.onsset.org/\">OnSSET</a> (EU-funding requires silly acronyms, apparently). This model (developed at KTH) is used to determine the best way to achieve universal electrification, by suggesting for each location in a country whether to extend the electrical grid, use a mini-grid system, or rather to rely on stand-alone household solar PV systems.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/b.png\" class=\"kg-image\"></figure><p>Essentially the model takes in a variety of data on population distribution, energy infrastructure, solar intensity, night-time satellite imagery, as well as social and techno-economic factors. As a starting point, it uses this to estimate where the settlements are that already have electricity access. From there, the model spreads outwards from electrified locations, and for each new location, comparing the cost of connecting by the three different options. An exhaustive (-ing?) process.</p><p>I started overhauling this model while using it for my thesis, and as a result was talked into staying at the division as a Research Engineer. In essence, the model I inherited was a complicated mix of Excel macros, copy-pasting and difficult GIS instructions. During the course of my thesis I picked up Python and set to work replacing the model with a coherent Python library: <a href=\"https://github.com/carderne/PyOnSSET\">PyOnSSET</a></p><p>This made modelling a country a few orders of magnitude faster, and much easier to batch process huge jobs. So we immediately put it to work modelling the whole of Sub-Saharan Africa! The modelling unit is 1 km<sup>2</sup> (more on that later) so this involved modelling more than 20 million individual units (iteratively!). We published this in Environmental Research Letters: <em><a href=\"http://iopscience.iop.org/article/10.1088/1748-9326/aa7b29/meta\">Lighting the World: the first application of an open source, spatial electrification tool (OnSSET) on Sub-Saharan Africa</a></em></p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/4.png\" class=\"kg-image\"></figure><p>The model was also used in the International Energy Agency's <em><a href=\"https://webstore.iea.org/weo-2017-special-report-energy-access-outlook\">Special Report: Energy Access Outlook</a> </em>to show what is need to provide electricity to the millions in Africa currently without access (see the figure above, taken from the report.</p><p>Unfortunately, I left KTH and the Division for Energy Systems Analysis before getting the time to fix two of the model's biggest shortcomings:</p><ol><li>Modelling 1 km<sup>2</sup> grid cells, instead of representations of actual towns and villages. This means that a barren patch of land will get a solution, even if it's never inhabited. This is not only inefficient, computationally, but logically unsound. In the same way, larger towns and cities (anything more than 1 km<sup>2</sup>) can get split up into multiple modelling units, which doesn't make a lot of sense.</li><li>It handles time in a very simplistic way, modelling only <em>today</em> and <em>2030 </em>(or another far-off year). This doesn't exactly give policy-makers and private sector developers a good vision of where they should be going <em>tomorrow.</em></li></ol>",
                        "comment_id": "5bbc652a7cc70a140e7fd11e",
                        "markdown": "I did my Master's thesis at KTH University of Technology on A climate,\nland-use,\nenergy and water nexus assessment of Bolivia\n[http://urn.kb.se/resolve?urn=urn%3Anbn%3Ase%3Akth%3Adiva-189473]. That is, I\nused various models and approaches to attempt to look holistically at Bolivia's\nland, energy and water use, taking into account the expected impacts of climate\nchange. One of the models I used is called OnSSET [http://www.onsset.org/] \n(EU-funding requires silly acronyms, apparently). This model (developed at KTH)\nis used to determine the best way to achieve universal electrification, by\nsuggesting for each location in a country whether to extend the electrical grid,\nuse a mini-grid system, or rather to rely on stand-alone household solar PV\nsystems.\n\nEssentially the model takes in a variety of data on population distribution,\nenergy infrastructure, solar intensity, night-time satellite imagery, as well as\nsocial and techno-economic factors. As a starting point, it uses this to\nestimate where the settlements are that already have electricity access. From\nthere, the model spreads outwards from electrified locations, and for each new\nlocation, comparing the cost of connecting by the three different options. An\nexhaustive (-ing?) process.\n\nI started overhauling this model while using it for my thesis, and as a result\nwas talked into staying at the division as a Research Engineer. In essence, the\nmodel I inherited was a complicated mix of Excel macros, copy-pasting and\ndifficult GIS instructions. During the course of my thesis I picked up Python\nand set to work replacing the model with a coherent Python library: PyOnSSET\n[https://github.com/carderne/PyOnSSET]\n\nThis made modelling a country a few orders of magnitude faster, and much easier\nto batch process huge jobs. So we immediately put it to work modelling the whole\nof Sub-Saharan Africa! The modelling unit is 1 km2  (more on that later) so this\ninvolved modelling more than 20 million individual units (iteratively!). We\npublished this in Environmental Research Letters: Lighting the World: the first\napplication of an open source, spatial electrification tool (OnSSET) on\nSub-Saharan Africa\n[http://iopscience.iop.org/article/10.1088/1748-9326/aa7b29/meta]\n\nThe model was also used in the International Energy Agency's Special Report:\nEnergy Access Outlook\n[https://webstore.iea.org/weo-2017-special-report-energy-access-outlook]  to\nshow what is need to provide electricity to the millions in Africa currently\nwithout access (see the figure above, taken from the report.\n\nUnfortunately, I left KTH and the Division for Energy Systems Analysis before\ngetting the time to fix two of the model's biggest shortcomings:\n\n 1. Modelling 1 km2  grid cells, instead of representations of actual towns and\n    villages. This means that a barren patch of land will get a solution, even\n    if it's never inhabited. This is not only inefficient, computationally, but\n    logically unsound. In the same way, larger towns and cities (anything more\n    than 1 km2) can get split up into multiple modelling units, which doesn't\n    make a lot of sense.\n 2. It handles time in a very simplistic way, modelling only today  and 2030 (or\n    another far-off year). This doesn't exactly give policy-makers and private\n    sector developers a good vision of where they should be going tomorrow.",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "'Lighting the World' - A paper I worked on",
                        "meta_description": "This model is used to determine the best way to achieve universal electrification, by suggesting between grid extension, mini-grids and stand-alone systems.",
                        "author_id": "1",
                        "created_at": "2018-10-09 08:22:02",
                        "created_by": "1",
                        "updated_at": "2018-10-17 11:23:34",
                        "updated_by": "1",
                        "published_at": "2016-12-07 08:35:00",
                        "published_by": "1",
                        "custom_excerpt": "This model is used to determine the best way to achieve universal electrification, by suggesting for each location in a country whether to extend the electrical grid, use a mini-grid system, or rather to rely on stand-alone household solar PV systems.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbc65427cc70a140e7fd122",
                        "uuid": "c28319d7-f49b-4ecd-88fe-2cf278b5e68d",
                        "title": "A Flask app for mini-grid planning with a cost-optimised spanning tree",
                        "slug": "flask-optimize-minigrid",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2018/11/sipungu_compare_maps2.png\"}],[\"image\",{\"src\":\"/content/images/2018/11/mst-1.png\"}],[\"html\",{\"html\":\"<iframe src=\\\"https://rdrn.me/flask-optimize-minigrid/map-sipungu.html\\\" style=\\\"width: 100%; height: 400px\\\" name=\\\"internal\\\" frameBorder=\\\"0\\\"></iframe>\"}],[\"image\",{\"src\":\"/content/images/2018/11/payback_big_density_mark6-2.png\"}],[\"markdown\",{\"markdown\":\"```python\\nfrom flask import Flask\\napp = Flask(__name__)\\n\\n@app.route('/')\\ndef hello():\\n    return 'Hello World!'\\n```\"}],[\"markdown\",{\"markdown\":\"[![Web App demo](https://thumbs.gfycat.com/FirstWiltedGreyhounddog-size_restricted.gif)](https://gfycat.com/CarefreeRemarkableAardwolf)\"}],[\"image\",{\"src\":\"/content/images/2018/11/app_scr-1.png\"}],[\"markdown\",{\"markdown\":\"```python\\nfrom flask import jsonify\\n\\n@app.route('/run_model')\\ndef run_model():\\n    args=request.args\\n    # model code here\\n    # or calls to external module\\n    results = ...\\n    return jsonify(result=results)\\n```\"}]],\"markups\":[[\"a\",[\"href\",\"https://www.ifc.org\"]],[\"a\",[\"href\",\"https://www.bloomberg.com/features/2015-mkopa-solar-in-africa/\"]],[\"a\",[\"href\",\"https://www.greentechmedia.com/articles/read/minigrids-are-the-cheapest-way-to-electrify-100-million-africans-today\"]],[\"a\",[\"href\",\"https://github.com/carderne/minigrid-optimiser\"]],[\"a\",[\"href\",\"https://rdrn.me/open-data-access-tanzania/\"]],[\"a\",[\"href\",\"https://www.openstreetmap.org/search?query=Tanzania#map=15/-5.0719/32.2804\"]],[\"a\",[\"href\",\"https://www.hotosm.org/where-we-work/tanzania/\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Minimum_spanning_tree\"]],[\"a\",[\"href\",\"https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.kneighbors_graph.html\"]],[\"a\",[\"href\",\"https://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.sparse.csgraph.minimum_spanning_tree.html\"]],[\"em\"],[\"a\",[\"href\",\"https://rdrn.me/modelling-hydrological-networks/\"]],[\"a\",[\"href\",\"https://rdrn.me/visualizing-book-club-ai/\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Network_theory\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Net_present_value\"]],[\"sup\"],[\"a\",[\"href\",\"https://github.com/pallets/flask\"]],[\"code\"]],\"sections\":[[1,\"p\",[[0,[],0,\"As part of ongoing work on energy access in Tanzania, we (the \"],[0,[0],1,\"IFC\"],[0,[],0,\", together with Tanzania's Rural Energy Agency) have mapped over 4 million buildings in rural parts of the country. This gives loads of new possibilities to those looking to work in these areas, and not only in the energy sector. One of these is the ability to conduct detailed site assessments, including sensible estimates of household populations and potential demand, along with wiring requirements to connect a village.\"]]],[1,\"p\",[[0,[],0,\"Apart from  the potential for use in state planning for new grid extensions, this data is valuable to private developers looking to sell off-grid services such as stand-alone solar systems (such as those sold by \"],[0,[1],1,\"M-Kopa\"],[0,[],0,\") as well as more capital intensive mini-grid systems (with a power source and grid connecting households, but no connection to the national grid), which \"],[0,[2],1,\"some suggest\"],[0,[],0,\" are a key to tackling energy access issues.\"]]],[1,\"p\",[[0,[],0,\"In this post I'm focusing on mini-grids, mostly because it's a more interesting problem to analyse. However, I also provide some cost comparisons with national grid connections. This post is split into two main sections:\"]]],[3,\"ol\",[[[0,[],0,\"Using a minimum spanning tree and cost-optimisation algorithm to find the ideal network layout for a given village and parameters\"]],[[0,[],0,\"Serving this as a GIS web app with Flask, where users can customise inputs, run the model, and visualise results\"]]]],[1,\"p\",[[0,[],0,\"So if you just want an example of a basic Flask app, go ahead and skip to the second section. Or just check out the \"],[0,[3],1,\"GitHub repo\"],[0,[],0,\" for the code for both sections.\"]]],[1,\"h2\",[[0,[],0,\"1. Optimising mini-grids in rural villages\"]]],[1,\"p\",[[0,[],0,\"As I've covered \"],[0,[4],1,\"elsewhere\"],[0,[],0,\", data is one of the key barriers to ramping up off-grid development and investment. Machine learning and ML-supported manual mapping in OpenStreetMap (a strategy we applied in Tanzania) are starting to make inroads into this problem, at least for assessing demand.\"]]],[1,\"p\",[[0,[],0,\"As a test case, I've chosen the village of \"],[0,[5],1,\"Sipungu\"],[0,[],0,\" in the Tabora region of Tanzania. To start off with, let's see how this village looks in OpenStreetMap compared to Google Maps. Each of the 444 little shapes on the left is a building, accurately traced by the \"],[0,[6],1,\"HOT\"],[0,[],0,\" team in Dar es Salaam as part of the IFC project. Some are homes, some are stores, some are schools. As you can see, there's no information in Google Maps about this village – not even the road in.\"]]],[10,0],[1,\"p\",[[0,[],0,\"To find the optimum way of connecting all these buildings to a mini-grid system, we turn to network theory, and in particular, the \"],[0,[7],1,\"minimum spanning tree\"],[0,[],0,\". This is the set of lines that connects a group of points with the minimum total distance (or other cost function). For the village of Sipungu, this looks as follows, where each blue dot is a building (very small ones filtered) and the green point a randomly chosen location for the solar PV installation. I haven't yet extensive testing on speed with larger datasets, but my solution for now is a combination of scikit-learn \"],[0,[8],1,\"kneighbors\"],[0,[],0,\"  and scipy's built-in \"],[0,[9],1,\"minimum_spanning_tree\"],[0,[],0,\" function.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Our goal then is to determine, based on some criteria, which of these connections to maintain. The first step is to \"],[0,[10],1,\"direct \"],[0,[],0,\"the network from the PV installation outwards, so that the model knows where to start in looking for connections to drop or keep. We don't want to accidentally disconnect the PV system itself! This is a process not dissimilar to the stream ordering used in my \"],[0,[11],1,\"hydrological modelling\"],[0,[],0,\". Conceptually they fall in with a broad range of physical, mathematical and \"],[0,[12],1,\"social\"],[0,[],0,\" problems\"],[0,[13],1,\" \"],[0,[],0,\"where network theory is applied.\"]]],[1,\"p\",[[0,[],0,\"There are a number of different ways to cost-optimise this network; I chose a brute force approach to find the configuration with the highest \"],[0,[14],1,\"net present value\"],[0,[],0,\", i.e. the most money for the developer, taking into account the future income streams and costs. This sounds like a ruthless way of thinking, but for more mini-grids to get built and more people to get access to electricity, they need to be sustainable. The hope is that once the system is running, demand will increase and more households will become profitable to connect.\"]]],[1,\"p\",[[0,[],0,\"The algorithm starts with the complete network, and considers which single \"],[0,[10],1,\"deletion \"],[0,[],0,\"of a line a connecting two households provide the biggest boost to profitability. For example, a very small household far away from any others - lots of wire, but not much demand or electricity sold. It then repeats this process over and over again until there are no more profitable configurations to be found and that is the optimum network!\"]]],[1,\"p\",[[0,[],0,\"I contrived the following main parameters for the village of Sipungu, along with some heuristics for determining the number of people based on building size.\"]]],[3,\"ul\",[[[0,[],0,\"Minimum building size: 30 m\"],[0,[15],1,\"2\"]],[[0,[],0,\"Wire cost: 25 USD/m\"]],[[0,[],0,\"Connection cost: 150 USD/household\"]],[[0,[],0,\"Tariff: 0.25 USD/kWh\"]],[[0,[],0,\"Demand: 6 kWh/person/month\"]],[[0,[],0,\"Generator cost: 7,000 USD/kW\"]]]],[1,\"p\",[[0,[],0,\"The resultant optimised network is shown below, where about 80% of the buildings are connected by the algorithm. The remaining little clusters are deemed to not be worth connecting, based on the capital outlay required and expected returns based on the demand and tariff above. So with this new data and this model, we already have an estimate of the costs involved and how the mini-grid might end up looking (noting, of course that the real network will follow real-world constraints like the existing road).\"]]],[10,2],[1,\"p\",[[0,[],0,\"Note that I mentioned the model optimises for NPV. With these parameters, the NPV of this development was calculated to be USD -815,000 – in the optimum case! So either the developer needs to cut costs, or charge higher tariffs, or hope for higher demand. This leads me to another extremely useful feature of this type of model: easy scaling. It's as easy to model Sipungu village as it is to model hundreds of villages.\"]]],[1,\"p\",[[0,[],0,\"So I did. To explore the relationship between village density and economics, and to understand tariffs needed for project profitability, I modelled 100 Tanzanian villages, considering for each one different combinations of costs, demand and village coverage (percentage of households electrified). In the chart below, each point represents a model run, with demand on the horizontal axis (6 kWh, from the example above, is marked by a vertical red line) and the required tariff for a 6-year payback on the vertical.\"]]],[1,\"p\",[[0,[],0,\"As you can see, there are not many villages that can sustain a mini-grid at that demand level and tariff. Even at extremely high demand levels, around 0.24 USD/kWh is still needed for projects to be feasible. However, grid electricity in Tanzania is below 0.10 USD/kWh, so this is unlikely to be possible for poor rural villages. One possible solution: subsidies.\"]]],[10,3],[1,\"h2\",[[0,[],0,\"2. Creating a simple GIS web app with Flask\"]]],[1,\"p\",[[0,[],0,\"A web app interface to the model would make it a lot more accessibly to non-coders. So I set out to create a basic app that would allow a user to select a village and the desired input parameters, and get an interactive map and summary results in-browser.\"]]],[1,\"p\",[[0,[16],1,\"Flask\"],[0,[],0,\" is a Python web framework – it transforms data and code into web pages and APIs. I selected it for this project because it is lightweight and easy. A basic Flask app looks as follows. The \"],[0,[17],1,\"'/'\"],[0,[],0,\" in \"],[0,[17],1,\"@app.route()\"],[0,[],0,\" tells Flask that this method should be run when someone accesses the base URL of the website, and the \"],[0,[17],1,\"'Hello World!'\"],[0,[],0,\" returned is what will be displayed in the user's browser.\"]]],[10,4],[1,\"p\",[[0,[],0,\"Most of the time you want your result to look better than that, so you use an HTML template, into which Flask inserts results as follows using the module \"],[0,[17],1,\"render_template\"],[0,[],0,\". I set up a template with buttons and selectors for the model parameters, and a big window where the mapped results can be displayed. When the user first arrives, they are greeted with an overview map of Tanzania and a selector list on the left. Once they've chosen a village, selected the generator site, and inserts the other parameters, they are shown the mapped results – as in the example below for Nakiu.\"]]],[10,5],[1,\"p\",[[0,[],0,\"Or below for the slightly larger village of Uwemba.\"]]],[10,6],[1,\"p\",[[0,[],0,\"The front-end is set up with JavaScript to make AJAX calls to the server when necessary. So, for example, when the user clicks 'Run (and be patient)' the client sends a request with all the necessary data to the server app, which uses this data in whatever way, and then responds with a JSON representation of its output. The front-end then uses this data to update the user interface in some way – in this case by displaying results and updating the map.\"]]],[10,7],[1,\"p\",[[0,[],0,\"This approach means that the entire web page rarely or never has to reload, which makes the user experience much faster and more dynamic.\"]]],[1,\"p\",[[0,[],0,\"Then there's only one thing left to do: push it to a server where it can run without keeping my laptop hot. I used a simple git set up to push the latest model and app to a Google cloud instance, and use \"],[0,[17],1,\"supervisor\"],[0,[],0,\" to keep the Flask app up and running. I won't post all of the code here, but it's available at my \"],[0,[3],1,\"GitHub repo\"],[0,[],0,\".\"]]]]}",
                        "html": "<p>As part of ongoing work on energy access in Tanzania, we (the <a href=\"https://www.ifc.org\">IFC</a>, together with Tanzania's Rural Energy Agency) have mapped over 4 million buildings in rural parts of the country. This gives loads of new possibilities to those looking to work in these areas, and not only in the energy sector. One of these is the ability to conduct detailed site assessments, including sensible estimates of household populations and potential demand, along with wiring requirements to connect a village.</p><p>Apart from  the potential for use in state planning for new grid extensions, this data is valuable to private developers looking to sell off-grid services such as stand-alone solar systems (such as those sold by <a href=\"https://www.bloomberg.com/features/2015-mkopa-solar-in-africa/\">M-Kopa</a>) as well as more capital intensive mini-grid systems (with a power source and grid connecting households, but no connection to the national grid), which <a href=\"https://www.greentechmedia.com/articles/read/minigrids-are-the-cheapest-way-to-electrify-100-million-africans-today\">some suggest</a> are a key to tackling energy access issues.</p><p>In this post I'm focusing on mini-grids, mostly because it's a more interesting problem to analyse. However, I also provide some cost comparisons with national grid connections. This post is split into two main sections:</p><ol><li>Using a minimum spanning tree and cost-optimisation algorithm to find the ideal network layout for a given village and parameters</li><li>Serving this as a GIS web app with Flask, where users can customise inputs, run the model, and visualise results</li></ol><p>So if you just want an example of a basic Flask app, go ahead and skip to the second section. Or just check out the <a href=\"https://github.com/carderne/minigrid-optimiser\">GitHub repo</a> for the code for both sections.</p><h2 id=\"1-optimising-mini-grids-in-rural-villages\">1. Optimising mini-grids in rural villages</h2><p>As I've covered <a href=\"https://rdrn.me/open-data-access-tanzania/\">elsewhere</a>, data is one of the key barriers to ramping up off-grid development and investment. Machine learning and ML-supported manual mapping in OpenStreetMap (a strategy we applied in Tanzania) are starting to make inroads into this problem, at least for assessing demand.</p><p>As a test case, I've chosen the village of <a href=\"https://www.openstreetmap.org/search?query=Tanzania#map=15/-5.0719/32.2804\">Sipungu</a> in the Tabora region of Tanzania. To start off with, let's see how this village looks in OpenStreetMap compared to Google Maps. Each of the 444 little shapes on the left is a building, accurately traced by the <a href=\"https://www.hotosm.org/where-we-work/tanzania/\">HOT</a> team in Dar es Salaam as part of the IFC project. Some are homes, some are stores, some are schools. As you can see, there's no information in Google Maps about this village – not even the road in.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/sipungu_compare_maps2.png\" class=\"kg-image\"></figure><p>To find the optimum way of connecting all these buildings to a mini-grid system, we turn to network theory, and in particular, the <a href=\"https://en.wikipedia.org/wiki/Minimum_spanning_tree\">minimum spanning tree</a>. This is the set of lines that connects a group of points with the minimum total distance (or other cost function). For the village of Sipungu, this looks as follows, where each blue dot is a building (very small ones filtered) and the green point a randomly chosen location for the solar PV installation. I haven't yet extensive testing on speed with larger datasets, but my solution for now is a combination of scikit-learn <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.kneighbors_graph.html\">kneighbors</a>  and scipy's built-in <a href=\"https://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.sparse.csgraph.minimum_spanning_tree.html\">minimum_spanning_tree</a> function.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/mst-1.png\" class=\"kg-image\"></figure><p>Our goal then is to determine, based on some criteria, which of these connections to maintain. The first step is to <em>direct </em>the network from the PV installation outwards, so that the model knows where to start in looking for connections to drop or keep. We don't want to accidentally disconnect the PV system itself! This is a process not dissimilar to the stream ordering used in my <a href=\"https://rdrn.me/modelling-hydrological-networks/\">hydrological modelling</a>. Conceptually they fall in with a broad range of physical, mathematical and <a href=\"https://rdrn.me/visualizing-book-club-ai/\">social</a> problems<a href=\"https://en.wikipedia.org/wiki/Network_theory\"> </a>where network theory is applied.</p><p>There are a number of different ways to cost-optimise this network; I chose a brute force approach to find the configuration with the highest <a href=\"https://en.wikipedia.org/wiki/Net_present_value\">net present value</a>, i.e. the most money for the developer, taking into account the future income streams and costs. This sounds like a ruthless way of thinking, but for more mini-grids to get built and more people to get access to electricity, they need to be sustainable. The hope is that once the system is running, demand will increase and more households will become profitable to connect.</p><p>The algorithm starts with the complete network, and considers which single <em>deletion </em>of a line a connecting two households provide the biggest boost to profitability. For example, a very small household far away from any others - lots of wire, but not much demand or electricity sold. It then repeats this process over and over again until there are no more profitable configurations to be found and that is the optimum network!</p><p>I contrived the following main parameters for the village of Sipungu, along with some heuristics for determining the number of people based on building size.</p><ul><li>Minimum building size: 30 m<sup>2</sup></li><li>Wire cost: 25 USD/m</li><li>Connection cost: 150 USD/household</li><li>Tariff: 0.25 USD/kWh</li><li>Demand: 6 kWh/person/month</li><li>Generator cost: 7,000 USD/kW</li></ul><p>The resultant optimised network is shown below, where about 80% of the buildings are connected by the algorithm. The remaining little clusters are deemed to not be worth connecting, based on the capital outlay required and expected returns based on the demand and tariff above. So with this new data and this model, we already have an estimate of the costs involved and how the mini-grid might end up looking (noting, of course that the real network will follow real-world constraints like the existing road).</p><iframe src=\"https://rdrn.me/flask-optimize-minigrid/map-sipungu.html\" style=\"width: 100%; height: 400px\" name=\"internal\" frameBorder=\"0\"></iframe><p>Note that I mentioned the model optimises for NPV. With these parameters, the NPV of this development was calculated to be USD -815,000 – in the optimum case! So either the developer needs to cut costs, or charge higher tariffs, or hope for higher demand. This leads me to another extremely useful feature of this type of model: easy scaling. It's as easy to model Sipungu village as it is to model hundreds of villages.</p><p>So I did. To explore the relationship between village density and economics, and to understand tariffs needed for project profitability, I modelled 100 Tanzanian villages, considering for each one different combinations of costs, demand and village coverage (percentage of households electrified). In the chart below, each point represents a model run, with demand on the horizontal axis (6 kWh, from the example above, is marked by a vertical red line) and the required tariff for a 6-year payback on the vertical.</p><p>As you can see, there are not many villages that can sustain a mini-grid at that demand level and tariff. Even at extremely high demand levels, around 0.24 USD/kWh is still needed for projects to be feasible. However, grid electricity in Tanzania is below 0.10 USD/kWh, so this is unlikely to be possible for poor rural villages. One possible solution: subsidies.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/payback_big_density_mark6-2.png\" class=\"kg-image\"></figure><h2 id=\"2-creating-a-simple-gis-web-app-with-flask\">2. Creating a simple GIS web app with Flask</h2><p>A web app interface to the model would make it a lot more accessibly to non-coders. So I set out to create a basic app that would allow a user to select a village and the desired input parameters, and get an interactive map and summary results in-browser.</p><p><a href=\"https://github.com/pallets/flask\">Flask</a> is a Python web framework – it transforms data and code into web pages and APIs. I selected it for this project because it is lightweight and easy. A basic Flask app looks as follows. The <code>'/'</code> in <code>@app.route()</code> tells Flask that this method should be run when someone accesses the base URL of the website, and the <code>'Hello World!'</code> returned is what will be displayed in the user's browser.</p><pre><code class=\"language-python\">from flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef hello():\n    return 'Hello World!'\n</code></pre>\n<p>Most of the time you want your result to look better than that, so you use an HTML template, into which Flask inserts results as follows using the module <code>render_template</code>. I set up a template with buttons and selectors for the model parameters, and a big window where the mapped results can be displayed. When the user first arrives, they are greeted with an overview map of Tanzania and a selector list on the left. Once they've chosen a village, selected the generator site, and inserts the other parameters, they are shown the mapped results – as in the example below for Nakiu.</p><p><a href=\"https://gfycat.com/CarefreeRemarkableAardwolf\"><img src=\"https://thumbs.gfycat.com/FirstWiltedGreyhounddog-size_restricted.gif\" alt=\"Web App demo\"></a></p>\n<p>Or below for the slightly larger village of Uwemba.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/app_scr-1.png\" class=\"kg-image\"></figure><p>The front-end is set up with JavaScript to make AJAX calls to the server when necessary. So, for example, when the user clicks 'Run (and be patient)' the client sends a request with all the necessary data to the server app, which uses this data in whatever way, and then responds with a JSON representation of its output. The front-end then uses this data to update the user interface in some way – in this case by displaying results and updating the map.</p><pre><code class=\"language-python\">from flask import jsonify\n\n@app.route('/run_model')\ndef run_model():\n    args=request.args\n    # model code here\n    # or calls to external module\n    results = ...\n    return jsonify(result=results)\n</code></pre>\n<p>This approach means that the entire web page rarely or never has to reload, which makes the user experience much faster and more dynamic.</p><p>Then there's only one thing left to do: push it to a server where it can run without keeping my laptop hot. I used a simple git set up to push the latest model and app to a Google cloud instance, and use <code>supervisor</code> to keep the Flask app up and running. I won't post all of the code here, but it's available at my <a href=\"https://github.com/carderne/minigrid-optimiser\">GitHub repo</a>.</p>",
                        "comment_id": "5bbc65427cc70a140e7fd122",
                        "markdown": "As part of ongoing work on energy access in Tanzania, we (the IFC\n[https://www.ifc.org], together with Tanzania's Rural Energy Agency) have mapped\nover 4 million buildings in rural parts of the country. This gives loads of new\npossibilities to those looking to work in these areas, and not only in the\nenergy sector. One of these is the ability to conduct detailed site assessments,\nincluding sensible estimates of household populations and potential demand,\nalong with wiring requirements to connect a village.\n\nApart from  the potential for use in state planning for new grid extensions,\nthis data is valuable to private developers looking to sell off-grid services\nsuch as stand-alone solar systems (such as those sold by M-Kopa\n[https://www.bloomberg.com/features/2015-mkopa-solar-in-africa/]) as well as\nmore capital intensive mini-grid systems (with a power source and grid\nconnecting households, but no connection to the national grid), which some\nsuggest\n[https://www.greentechmedia.com/articles/read/minigrids-are-the-cheapest-way-to-electrify-100-million-africans-today] \n are a key to tackling energy access issues.\n\nIn this post I'm focusing on mini-grids, mostly because it's a more interesting\nproblem to analyse. However, I also provide some cost comparisons with national\ngrid connections. This post is split into two main sections:\n\n 1. Using a minimum spanning tree and cost-optimisation algorithm to find the\n    ideal network layout for a given village and parameters\n 2. Serving this as a GIS web app with Flask, where users can customise inputs,\n    run the model, and visualise results\n\nSo if you just want an example of a basic Flask app, go ahead and skip to the\nsecond section. Or just check out the GitHub repo\n[https://github.com/carderne/minigrid-optimiser]  for the code for both\nsections.\n\n1. Optimising mini-grids in rural villages\nAs I've covered elsewhere [https://rdrn.me/open-data-access-tanzania/], data is\none of the key barriers to ramping up off-grid development and investment.\nMachine learning and ML-supported manual mapping in OpenStreetMap (a strategy we\napplied in Tanzania) are starting to make inroads into this problem, at least\nfor assessing demand.\n\nAs a test case, I've chosen the village of Sipungu  in the Tabora region of\nTanzania. To start off with, let's see how this village looks in OpenStreetMap\ncompared to Google Maps. Each of the 444 little shapes on the left is a\nbuilding, accurately traced by the HOT\n[https://www.hotosm.org/where-we-work/tanzania/]  team in Dar es Salaam as part\nof the IFC project. Some are homes, some are stores, some are schools. As you\ncan see, there's no information in Google Maps about this village – not even the\nroad in.\n\nTo find the optimum way of connecting all these buildings to a mini-grid system,\nwe turn to network theory, and in particular, the minimum spanning tree\n[https://en.wikipedia.org/wiki/Minimum_spanning_tree]. This is the set of lines\nthat connects a group of points with the minimum total distance (or other cost\nfunction). For the village of Sipungu, this looks as follows, where each blue\ndot is a building (very small ones filtered) and the green point a randomly\nchosen location for the solar PV installation. I haven't yet extensive testing\non speed with larger datasets, but my solution for now is a combination of\nscikit-learn kneighbors\n[https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.kneighbors_graph.html] \n  and scipy's built-in minimum_spanning_tree\n[https://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.sparse.csgraph.minimum_spanning_tree.html] \n function.\n\nOur goal then is to determine, based on some criteria, which of these\nconnections to maintain. The first step is to direct the network from the PV\ninstallation outwards, so that the model knows where to start in looking for\nconnections to drop or keep. We don't want to accidentally disconnect the PV\nsystem itself! This is a process not dissimilar to the stream ordering used in\nmy hydrological modelling [https://rdrn.me/modelling-hydrological-networks/].\nConceptually they fall in with a broad range of physical, mathematical and \nsocial [https://rdrn.me/visualizing-book-club-ai/]  problems \n[https://en.wikipedia.org/wiki/Network_theory]where network theory is applied.\n\nThere are a number of different ways to cost-optimise this network; I chose a\nbrute force approach to find the configuration with the highest net present\nvalue [https://en.wikipedia.org/wiki/Net_present_value], i.e. the most money for\nthe developer, taking into account the future income streams and costs. This\nsounds like a ruthless way of thinking, but for more mini-grids to get built and\nmore people to get access to electricity, they need to be sustainable. The hope\nis that once the system is running, demand will increase and more households\nwill become profitable to connect.\n\nThe algorithm starts with the complete network, and considers which single \ndeletion of a line a connecting two households provide the biggest boost to\nprofitability. For example, a very small household far away from any others -\nlots of wire, but not much demand or electricity sold. It then repeats this\nprocess over and over again until there are no more profitable configurations to\nbe found and that is the optimum network!\n\nI contrived the following main parameters for the village of Sipungu, along with\nsome heuristics for determining the number of people based on building size.\n\n * Minimum building size: 30 m2\n * Wire cost: 25 USD/m\n * Connection cost: 150 USD/household\n * Tariff: 0.25 USD/kWh\n * Demand: 6 kWh/person/month\n * Generator cost: 7,000 USD/kW\n\nThe resultant optimised network is shown below, where about 80% of the buildings\nare connected by the algorithm. The remaining little clusters are deemed to not\nbe worth connecting, based on the capital outlay required and expected returns\nbased on the demand and tariff above. So with this new data and this model, we\nalready have an estimate of the costs involved and how the mini-grid might end\nup looking (noting, of course that the real network will follow real-world\nconstraints like the existing road).\n\nNote that I mentioned the model optimises for NPV. With these parameters, the\nNPV of this development was calculated to be USD -815,000 – in the optimum case!\nSo either the developer needs to cut costs, or charge higher tariffs, or hope\nfor higher demand. This leads me to another extremely useful feature of this\ntype of model: easy scaling. It's as easy to model Sipungu village as it is to\nmodel hundreds of villages.\n\nSo I did. To explore the relationship between village density and economics, and\nto understand tariffs needed for project profitability, I modelled 100 Tanzanian\nvillages, considering for each one different combinations of costs, demand and\nvillage coverage (percentage of households electrified). In the chart below,\neach point represents a model run, with demand on the horizontal axis (6 kWh,\nfrom the example above, is marked by a vertical red line) and the required\ntariff for a 6-year payback on the vertical.\n\nAs you can see, there are not many villages that can sustain a mini-grid at that\ndemand level and tariff. Even at extremely high demand levels, around 0.24\nUSD/kWh is still needed for projects to be feasible. However, grid electricity\nin Tanzania is below 0.10 USD/kWh, so this is unlikely to be possible for poor\nrural villages. One possible solution: subsidies.\n\n2. Creating a simple GIS web app with Flask\nA web app interface to the model would make it a lot more accessibly to\nnon-coders. So I set out to create a basic app that would allow a user to select\na village and the desired input parameters, and get an interactive map and\nsummary results in-browser.\n\nFlask [https://github.com/pallets/flask]  is a Python web framework – it\ntransforms data and code into web pages and APIs. I selected it for this project\nbecause it is lightweight and easy. A basic Flask app looks as follows. The '/' \nin @app.route()  tells Flask that this method should be run when someone\naccesses the base URL of the website, and the 'Hello World!'  returned is what\nwill be displayed in the user's browser.\n\nfrom flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef hello():\n    return 'Hello World!'\n\n\nMost of the time you want your result to look better than that, so you use an\nHTML template, into which Flask inserts results as follows using the module \nrender_template. I set up a template with buttons and selectors for the model\nparameters, and a big window where the mapped results can be displayed. When the\nuser first arrives, they are greeted with an overview map of Tanzania and a\nselector list on the left. Once they've chosen a village, selected the generator\nsite, and inserts the other parameters, they are shown the mapped results – as\nin the example below for Nakiu.\n\n  [https://gfycat.com/CarefreeRemarkableAardwolf]\n\nOr below for the slightly larger village of Uwemba.\n\nThe front-end is set up with JavaScript to make AJAX calls to the server when\nnecessary. So, for example, when the user clicks 'Run (and be patient)' the\nclient sends a request with all the necessary data to the server app, which uses\nthis data in whatever way, and then responds with a JSON representation of its\noutput. The front-end then uses this data to update the user interface in some\nway – in this case by displaying results and updating the map.\n\nfrom flask import jsonify\n\n@app.route('/run_model')\ndef run_model():\n    args=request.args\n    # model code here\n    # or calls to external module\n    results = ...\n    return jsonify(result=results)\n\n\nThis approach means that the entire web page rarely or never has to reload,\nwhich makes the user experience much faster and more dynamic.\n\nThen there's only one thing left to do: push it to a server where it can run\nwithout keeping my laptop hot. I used a simple git set up to push the latest\nmodel and app to a Google cloud instance, and use supervisor  to keep the Flask\napp up and running. I won't post all of the code here, but it's available at my \nGitHub repo [https://github.com/carderne/minigrid-optimiser].",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "A Flask app for mini-grid planning with a cost-optimised spanning tree",
                        "meta_description": "We've mapped over 4 million buildings in Tanzania. This post explores the possibilities of this data for off-grid planning using a simple Flask web app.",
                        "author_id": "1",
                        "created_at": "2018-10-09 08:22:26",
                        "created_by": "1",
                        "updated_at": "2018-11-19 09:17:18",
                        "updated_by": "1",
                        "published_at": "2018-03-18 13:20:00",
                        "published_by": "1",
                        "custom_excerpt": "We've mapped over 4 million buildings in Tanzania. This post explores the possibilities of this data for off-grid planning using a simple Flask web app.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbc65477cc70a140e7fd124",
                        "uuid": "af4bd9e0-dd23-40e4-acf2-5ace44606b3a",
                        "title": "Modelling the optimum way to achieve universal electrification",
                        "slug": "modelling-universal-electrification",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2018/11/ghs_label-3.png\"}],[\"markdown\",{\"markdown\":\"```python\\nimport rasterio\\nimport geopandas as gpd\\nimport json\\n\\npop = rasterio.open(pop_raster)\\n\\nadm = gpd.read_file(admin_boundary)\\nadm = adm.to_crs(crs=pop.crs)\\ncoords = [json.loads(adm.to_json())['features'][0]['geometry']]\\n\\npop_masked, pop_affine = mask(dataset=ghs, shapes=coords, crop=True)\\n```\"}],[\"markdown\",{\"markdown\":\"```python\\npop_geoms = list(({'properties': {'raster_val': v}, 'geometry': s} \\n              for i, (s, v)\\n              in enumerate(shapes(pop_masked, mask=None, transform=pop_affine))))\\n\\npop_poly = gpd.GeoDataFrame.from_features(pop_geoms)\\npop_poly.crs = pop.crs.data\\n```\"}],[\"markdown\",{\"markdown\":\"```python\\npop_poly['area_m2'] = pop_poly.geometry.area\\npop_poly = pop_poly[pop_poly['area_m2'] < pop_poly['area_m2'].mean() * 5]\\npop_poly = pop_poly[pop_poly['raster_val'] > 50]\\n\\npop_poly['geometry'] = pop_poly.geometry.buffer(150)\\n```\"}],[\"image\",{\"src\":\"/content/images/2018/11/clusters1_label-2.png\"}],[\"image\",{\"src\":\"/content/images/2018/11/image-4.png\"}],[\"markdown\",{\"markdown\":\"```python\\ngrid = gpd.read_file(grid_file)\\ngrid = grid.to_crs(crs=pop_poly.crs)\\n\\ngrid_raster = rasterize(grid.geometry, out_shape=pop_masked[0].shape, fill=1, default_value=0, all_touched=True, transform=pop_affine)\\ndist_raster = ndimage.distance_transform_edt(grid_raster)\\n\\ndists = zonal_stats(vectors=pop_poly, raster=dist_raster, affine=pop_affine, stats='min', nodata=1000)\\npop_poly['grid_dist'] = [x['min'] for x in dists]\\n\\npop_sums = zonal_stats(pop_poly, pop, stats='sum')\\npop_poly['pop'] = [x['sum'] for x in pop_sums]\\n```\"}],[\"image\",{\"src\":\"/content/images/2018/11/clusters2_label.png\"}],[\"image\",{\"src\":\"/content/images/2018/11/algo-1.png\"}],[\"markdown\",{\"markdown\":\"```python\\nfor village in unelectrified_villages:\\n    for arc in connected_arcs:\\n        arc ← enabled\\n```\"}],[\"markdown\",{\"markdown\":\"```python\\nwhile True:\\n    for village in electrified_villages:\\n        for arc in connected_arcs:\\n            if arc is enabled:\\n                new ← connect_neighbours(village, arc)\\n                \\n                if new.cost < mini_grid_cost:\\n                    connect ← new\\n                    \\n    if len(connect) > 0:\\n        if duplicates:\\n            keep lowest cost\\n            \\n        for village, arc in connect:\\n            village ← electrified\\n            arc ← electrified\\n    else:\\n        break\\n```\"}],[\"markdown\",{\"markdown\":\"```python\\ndef connect_neighbours(village, arc, best, current):\\n    if node not electrified:\\n        current.arcs ← current + arc\\n        current.villages ← current + village\\n\\n        if current.cost() < best.cost():\\n            best ← current\\n\\n        for arc in connected_arcs:\\n            if arc is enabled and arc not electrified:\\n                best ← conect_neighbours(village, arc, best, current)  \\n    return best\\n```\"}],[\"image\",{\"src\":\"/content/images/2018/11/res.png\"}]],\"markups\":[[\"a\",[\"href\",\"https://rdrn.me/flask-optimize-minigrid/\"]],[\"a\",[\"href\",\"https://sustainabledevelopment.un.org/sdg7\"]],[\"a\",[\"href\",\"https://github.com/carderne/electrification-planner\"]],[\"a\",[\"href\",\"https://ghsl.jrc.ec.europa.eu/\"]],[\"a\",[\"href\",\"https://github.com/mapbox/rasterio\"]],[\"a\",[\"href\",\"http://geopandas.org/\"]],[\"code\"],[\"a\",[\"href\",\"https://www.scipy.org/\"]],[\"a\",[\"href\",\"https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.ndimage.morphology.distance_transform_edt.html\"]],[\"a\",[\"href\",\"https://github.com/perrygeo/python-rasterstats\"]],[\"em\"],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Network_theory\"]],[\"a\",[\"href\",\"https://data.worldbank.org/indicator/EG.ELC.ACCS.UR.ZS\"]],[\"a\",[\"href\",\"https://www.esmap.org/node/55526\"]],[\"sup\"],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Minimum_spanning_tree\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Recursion_(computer_science)\"]],[\"a\",[\"href\",\"https://data.worldbank.org/indicator/EG.ELC.ACCS.ZS\"]],[\"a\",[\"href\",\"https://endev.info/content/Grid_Densification_Challenge_Fund\"]],[\"a\",[\"href\",\"http://nbviewer.jupyter.org/github/carderne/electrification-planner/blob/master/electrify.ipynb\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Building on the \"],[0,[0],1,\"algorithms I developed for mini-grids\"],[0,[],0,\", I decided to move up a level of abstraction and look at the country- rather than village-level. What follows is the outline of a model that use population and other input data, and techno-economic parameters, to develop a nationally optimised pathway to achieving universal electrification per the UN's \"],[0,[1],1,\"Sustainable Development Goal 7\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"If you're more interested in seeing the code, skip over to the \"],[0,[2],1,\"electrification-planner\"],[0,[],0,\" repository on GitHub.\"]]],[1,\"h3\",[[0,[],0,\"Clustering population into settlements\"]]],[1,\"p\",[[0,[],0,\"Most GIS data on human populations, such as the \"],[0,[3],1,\"GHSL\"],[0,[],0,\" that I'm using in this example, comes in raster format. For example, the population around Kampala, Uganda looks like this. Each pixel represents a grid cell of 250 x 250 metres, and I've shown in here with darker = more people.\"]]],[10,0],[1,\"p\",[[0,[],0,\"This is extremely useful, and allows for many types of analysis, but isn'y inherently useful for planning an electrical grid – the government of Uganda doesn't decide where to build infrastructure on a pixel-by-pixel basis.\"]]],[1,\"p\",[[0,[],0,\"Thus the first step of this model is to transform this population data into something more useful for our purposes, by combining nearby pixels into population 'clusters', which we hope will approximate settlements such as villages, towns and cities. For this process, I'm going to lean heavily on \"],[0,[4],1,\"rasterio\"],[0,[],0,\" for raster processing, and \"],[0,[5],1,\"GeoPandas\"],[0,[],0,\" for managing vectors.\"]]],[1,\"p\",[[0,[],0,\"So the first thing we do is read in the population layer and mask it to our area of interest. In this case, the GHSL data is global but we only want to focus on Uganda.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Then we can use rasterio's \"],[0,[6],1,\"shapes\"],[0,[],0,\" module to convert the clipped rastero into a set of polygons. This just converts each pixel into a vector square.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Then we filter out polygons that are more than fives times average, as these are probably artefacts, and remove all polygons with below a cutoff population, so that we focus on actual villages and towns. Finally, we buffer each polygon out by 150 metres so that neighbouring polygons will overlap.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Then we use the GeoPandas \"],[0,[6],1,\"dissolve\"],[0,[],0,\" and \"],[0,[6],1,\"explode\"],[0,[],0,\" modules to merge these touching polygons into single polygons. After all these steps, we get the following, where each separate polygon is assigned a random colour. As you can see, Kampala (turquoise) and Jinja (in pink, another large Ugandan town) have become sprawling, unwieldy polygons that aren't ideal for simple modelling. However, big cities are not really our goal here – hopefully in most cases they already have electricity connections.\"]]],[10,4],[1,\"p\",[[0,[],0,\"There is one final step to make these clusters a bit more useful. We want to know how many people are in each cluster, and how far they are from existing electricity grid infrastructure. For the grid distances, we need to read in our grid file, and convert it to a raster. In the section below, the red vector lines are transformed into the black raster data, with 250 x 250 metres grid cells as in our population data.\"]]],[10,5],[1,\"p\",[[0,[],0,\"An important thing to remember at this point is that a raster is just a 2-dimensional array, plus geospatial information. Thus, we can use \"],[0,[7],1,\"SciPy\"],[0,[],0,\" and the \"],[0,[8],1,\"Euclidean distance transform\"],[0,[],0,\" to calculate the distance from every point in a raster to preset points of interest, which in this case is the black electricity grid in the image above. These distances are shown above, with bluer cells meaning further distances.\"]]],[1,\"p\",[[0,[],0,\"With this done, we use a neat little library called \"],[0,[9],1,\"rasterstats\"],[0,[],0,\", which creates summary statistics of rasters based on vector geometries. We use this to get the \"],[0,[10],1,\"minimum\"],[0,[],0,\" distance a cluster is from any grid infrastructure. We do the same for population, but take the \"],[0,[10],1,\"sum\"],[0,[],0,\", as we want to know the total population hiding under each cluster.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Finally we get the following result, where all clusters within 1 km of the grid have been excluded. The remaining villages are coloured by population, with higher populations being more blue.\"]]],[10,7],[1,\"h3\",[[0,[],0,\"Choosing the optimum technology for each cluster\"]]],[1,\"p\",[[0,[],0,\"Now that we have a sensible representation of settlements, along with their populations and distance from infrastructure, we can start to look at how best to provide each settlement with electricity. In reality, there are a number of things we'd additionally need to do: estimate demand based on various economic factors, consider resource availability such as solar radiation, exclude areas that are too high/steep/sensitive for whatever technology to be used. For now I'm simplifying things so we can focus on the core modelling process.\"]]],[1,\"p\",[[0,[],0,\"Similar to the \"],[0,[0],1,\"process I described for mini-grids\"],[0,[],0,\", we take these grid lines and clusters and from them create a \"],[0,[11],1,\"network\"],[0,[],0,\", where each line and each cluster is aware of who its neighbours are. The difference is that mini-grids are a greenfield with no existing grid lines, whereas Uganda already has several thousand km of grid lines. As above, we take these into account by specifying that every village within 1 km of grid lines is already electrified. However, as Uganda has an urban electricity access rate of \"],[0,[12],1,\"around 60%\"],[0,[],0,\", only that portion of each cluster actually has electricity coming into their houses.\"]]],[1,\"p\",[[0,[],0,\"Then the primary question is this: for each cluster, is it more economical to connect with on-grid or off-grid technology. First we calculate for each cluster what it would cost to connect with off-grid technology. In reality this should consider a range of possibilities, including solar-home systems, solar mini-grids, diesel hybrids and others, to see which can most affordably serve a particular community.\"]]],[1,\"p\",[[0,[],0,\"For this proof-of-concept, I'm simply calculating the off-grid cost as follows:\"]]],[3,\"ul\",[[[0,[10],1,\"cost = demand × generator-cost + area × wiring-cost\"]]]],[1,\"p\",[[0,[],0,\"where demand is estimated simply estimated by the population, and the wiring cost is an estimate of how much electrical wire is needed depending on the size of the village. For this example, I've used a demand of 6 kWh/person/month (corresponding to Tier 2 from the World Bank's \"],[0,[13],1,\"Multi-Tier Framework\"],[0,[],0,\"), 4000 USD/kW for generators and 2 USD/m\"],[0,[14],1,\"2\"],[0,[],0,\" for wiring.\"]]],[1,\"p\",[[0,[],0,\"With this done, we're ready to start looking into grid extensions, and each time the algorithm finds a potential candidate, it can compare to the already-calculate off-grid cost to see if grid is more suitable. I'm using 50,000 USD/km for grid wiring and the same in-village costs as above for low-voltage wiring.\"]]],[1,\"p\",[[0,[],0,\"We start off with a \"],[0,[15],1,\"minimum spanning tree\"],[0,[],0,\" connecting all the electrified villages (those that already have electricity access) to all of the remaining villages with the least total amount of wire. However, it gets complicated: the spanning tree doesn't know about the existing grid lines, so it can create multiple paths to the same village.\"]]],[1,\"p\",[[0,[],0,\"Consider the image below, which was produced by the final output from the model. Already connected villages in green, new connections in blue and off-grid villages in red. The existing grid is dark grey, new grid lines purple, while the yellow dashed lines represent lines from the spanning tree that the model rejected. The two villages on the left circle in blue could have been connected by the yellow line, but the model found that the bottom one was more cheaply connected by its southern neighbour, while the top one was cheaply connected by its eastern neighbour.\"]]],[1,\"p\",[[0,[],0,\"The two red off-grid villages were locations where the population was too low, or the grid distance too far, for grid connection to be feasible. So these yellow lines should not be constructed, and some kind of solar solution should instead be used.\"]]],[10,8],[1,\"p\",[[0,[],0,\"To achieve this heuristic of finding the best connections to keep and which to toss, the model begins as follows (in pseudocode). This only enables those network arcs that don't connect already electrified villages – as they already have grid lines connecting them.\"]]],[10,9],[1,\"p\",[[0,[],0,\"Then we're ready to loop through all \"],[0,[10],1,\"electrified \"],[0,[],0,\"villages, and look in their neighbourhood to see if there are any nearby un-electrified villages that they can extend grid lines to. Each time, it calls the \"],[0,[6],1,\"connect_neighbours()\"],[0,[],0,\" function (described below) and if the results are better than the mini-grid costs we calculated, it keeps them. Before making the changes permanent, it compares any duplicates and keeps the cheapest one – this is how the decision is made for the two circled villages in the image above.\"]]],[10,10],[1,\"p\",[[0,[],0,\"Finally, let's look at the most important part, the \"],[0,[6],1,\"connect_neighbours()\"],[0,[],0,\" function. This starts at the given village and branches outwards looking for the most affordable way to connect nearby villages. This type of tree search is best achieved with a \"],[0,[16],1,\"recursive function\"],[0,[],0,\" – note the functions calls itself on the second-last line.\"]]],[1,\"p\",[[0,[],0,\"At any moment, the function is tracking two configurations that it has found: the \"],[0,[6],1,\"current\"],[0,[],0,\" one that it is looking at, and the \"],[0,[6],1,\"best\"],[0,[],0,\" one it has found so far. At any point if the current is cheaper than the best it has found, the best is replaced. It then takes advantage of a very useful property of recursive functions: the ability to pass some data in both directions, and some in only one direction. Note that both \"],[0,[6],1,\"current\"],[0,[],0,\" and \"],[0,[6],1,\"best\"],[0,[],0,\" are passed to the function call, while only \"],[0,[6],1,\"best\"],[0,[],0,\" is returned at the end. This means that the algorithm is free to explore side-paths to its heart's content, but if no better solution is found, the main search is not bothered by the \"],[0,[6],1,\"current\"],[0,[],0,\" solution found on that side tree. However, a new \"],[0,[6],1,\"best\"],[0,[],0,\" solution will be returned to the main branch.\"]]],[10,11],[1,\"p\",[[0,[],0,\"For this example, the \"],[0,[6],1,\"while\"],[0,[],0,\" loop from two blocks up ran eight times, and found a total of 2,686 new villages to connect, with a remaining 263 that were deemed cheaper to connect with off-grid technology. The final results are shown in the image below, following the same colour scheme as before.\"]]],[10,12],[1,\"p\",[[0,[],0,\"Let's do a quick sanity check of these results. The current population of Uganda is around 43 million, of whom \"],[0,[17],1,\"about 30%\"],[0,[],0,\" have access to electricity, or 13 million people. According to my heuristic that any cluster within 1 km of the grid has electricity access, and of these 60% have electricity in their house, the number is 15 million people, so not too far from the official measurements. What about the remaining 40% of urban people that aren't considered by this model? Most likely the government should be focusing on \"],[0,[18],1,\"grid densification\"],[0,[],0,\" – providing electricity to those already in sight of the grid.\"]]],[1,\"p\",[[0,[],0,\"There are 12 million people in the 2,686 new villages to connect, and hopefully more than 60% of these would get electricity access if the grid arrives. There are a further 230,000 people in the 263 off-grid villages, where a mini-grid solar PV system is probably best. According to the model, the combined cost to connect these people to the grid USD 4.5 billion – but note that this is based on extremely rough guesses of infrastructure costs.\"]]],[1,\"p\",[[0,[],0,\"Finally, what about the people that were left out when we created the clusters? That process ignored 4 million people (about 9%) from the least densely populated parts of Uganda, who are potentially the most in need of public support. It's difficult to model how best to include this group if they are very rural, dispersed populations, it's probably to safe to say that the quickest and cheapest would be to for them to use solar-home systems, such as solar lanterns and individual roof-mounted solar panels.\"]]],[1,\"p\",[[0,[],0,\"You can view a static version of the entire Python notebook \"],[0,[19],1,\"here\"],[0,[],0,\", or visit the \"],[0,[2],1,\"GitHub repo\"],[0,[],0,\" to see the entire package.\"]]]]}",
                        "html": "<p>Building on the <a href=\"https://rdrn.me/flask-optimize-minigrid/\">algorithms I developed for mini-grids</a>, I decided to move up a level of abstraction and look at the country- rather than village-level. What follows is the outline of a model that use population and other input data, and techno-economic parameters, to develop a nationally optimised pathway to achieving universal electrification per the UN's <a href=\"https://sustainabledevelopment.un.org/sdg7\">Sustainable Development Goal 7</a>.</p><p>If you're more interested in seeing the code, skip over to the <a href=\"https://github.com/carderne/electrification-planner\">electrification-planner</a> repository on GitHub.</p><h3 id=\"clustering-population-into-settlements\">Clustering population into settlements</h3><p>Most GIS data on human populations, such as the <a href=\"https://ghsl.jrc.ec.europa.eu/\">GHSL</a> that I'm using in this example, comes in raster format. For example, the population around Kampala, Uganda looks like this. Each pixel represents a grid cell of 250 x 250 metres, and I've shown in here with darker = more people.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/ghs_label-3.png\" class=\"kg-image\"></figure><p>This is extremely useful, and allows for many types of analysis, but isn'y inherently useful for planning an electrical grid – the government of Uganda doesn't decide where to build infrastructure on a pixel-by-pixel basis.</p><p>Thus the first step of this model is to transform this population data into something more useful for our purposes, by combining nearby pixels into population 'clusters', which we hope will approximate settlements such as villages, towns and cities. For this process, I'm going to lean heavily on <a href=\"https://github.com/mapbox/rasterio\">rasterio</a> for raster processing, and <a href=\"http://geopandas.org/\">GeoPandas</a> for managing vectors.</p><p>So the first thing we do is read in the population layer and mask it to our area of interest. In this case, the GHSL data is global but we only want to focus on Uganda.</p><pre><code class=\"language-python\">import rasterio\nimport geopandas as gpd\nimport json\n\npop = rasterio.open(pop_raster)\n\nadm = gpd.read_file(admin_boundary)\nadm = adm.to_crs(crs=pop.crs)\ncoords = [json.loads(adm.to_json())['features'][0]['geometry']]\n\npop_masked, pop_affine = mask(dataset=ghs, shapes=coords, crop=True)\n</code></pre>\n<p>Then we can use rasterio's <code>shapes</code> module to convert the clipped rastero into a set of polygons. This just converts each pixel into a vector square.</p><pre><code class=\"language-python\">pop_geoms = list(({'properties': {'raster_val': v}, 'geometry': s} \n              for i, (s, v)\n              in enumerate(shapes(pop_masked, mask=None, transform=pop_affine))))\n\npop_poly = gpd.GeoDataFrame.from_features(pop_geoms)\npop_poly.crs = pop.crs.data\n</code></pre>\n<p>Then we filter out polygons that are more than fives times average, as these are probably artefacts, and remove all polygons with below a cutoff population, so that we focus on actual villages and towns. Finally, we buffer each polygon out by 150 metres so that neighbouring polygons will overlap.</p><pre><code class=\"language-python\">pop_poly['area_m2'] = pop_poly.geometry.area\npop_poly = pop_poly[pop_poly['area_m2'] &lt; pop_poly['area_m2'].mean() * 5]\npop_poly = pop_poly[pop_poly['raster_val'] &gt; 50]\n\npop_poly['geometry'] = pop_poly.geometry.buffer(150)\n</code></pre>\n<p>Then we use the GeoPandas <code>dissolve</code> and <code>explode</code> modules to merge these touching polygons into single polygons. After all these steps, we get the following, where each separate polygon is assigned a random colour. As you can see, Kampala (turquoise) and Jinja (in pink, another large Ugandan town) have become sprawling, unwieldy polygons that aren't ideal for simple modelling. However, big cities are not really our goal here – hopefully in most cases they already have electricity connections.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/clusters1_label-2.png\" class=\"kg-image\"></figure><p>There is one final step to make these clusters a bit more useful. We want to know how many people are in each cluster, and how far they are from existing electricity grid infrastructure. For the grid distances, we need to read in our grid file, and convert it to a raster. In the section below, the red vector lines are transformed into the black raster data, with 250 x 250 metres grid cells as in our population data.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/image-4.png\" class=\"kg-image\"></figure><p>An important thing to remember at this point is that a raster is just a 2-dimensional array, plus geospatial information. Thus, we can use <a href=\"https://www.scipy.org/\">SciPy</a> and the <a href=\"https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.ndimage.morphology.distance_transform_edt.html\">Euclidean distance transform</a> to calculate the distance from every point in a raster to preset points of interest, which in this case is the black electricity grid in the image above. These distances are shown above, with bluer cells meaning further distances.</p><p>With this done, we use a neat little library called <a href=\"https://github.com/perrygeo/python-rasterstats\">rasterstats</a>, which creates summary statistics of rasters based on vector geometries. We use this to get the <em>minimum</em> distance a cluster is from any grid infrastructure. We do the same for population, but take the <em>sum</em>, as we want to know the total population hiding under each cluster.</p><pre><code class=\"language-python\">grid = gpd.read_file(grid_file)\ngrid = grid.to_crs(crs=pop_poly.crs)\n\ngrid_raster = rasterize(grid.geometry, out_shape=pop_masked[0].shape, fill=1, default_value=0, all_touched=True, transform=pop_affine)\ndist_raster = ndimage.distance_transform_edt(grid_raster)\n\ndists = zonal_stats(vectors=pop_poly, raster=dist_raster, affine=pop_affine, stats='min', nodata=1000)\npop_poly['grid_dist'] = [x['min'] for x in dists]\n\npop_sums = zonal_stats(pop_poly, pop, stats='sum')\npop_poly['pop'] = [x['sum'] for x in pop_sums]\n</code></pre>\n<p>Finally we get the following result, where all clusters within 1 km of the grid have been excluded. The remaining villages are coloured by population, with higher populations being more blue.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/clusters2_label.png\" class=\"kg-image\"></figure><h3 id=\"choosing-the-optimum-technology-for-each-cluster\">Choosing the optimum technology for each cluster</h3><p>Now that we have a sensible representation of settlements, along with their populations and distance from infrastructure, we can start to look at how best to provide each settlement with electricity. In reality, there are a number of things we'd additionally need to do: estimate demand based on various economic factors, consider resource availability such as solar radiation, exclude areas that are too high/steep/sensitive for whatever technology to be used. For now I'm simplifying things so we can focus on the core modelling process.</p><p>Similar to the <a href=\"https://rdrn.me/flask-optimize-minigrid/\">process I described for mini-grids</a>, we take these grid lines and clusters and from them create a <a href=\"https://en.wikipedia.org/wiki/Network_theory\">network</a>, where each line and each cluster is aware of who its neighbours are. The difference is that mini-grids are a greenfield with no existing grid lines, whereas Uganda already has several thousand km of grid lines. As above, we take these into account by specifying that every village within 1 km of grid lines is already electrified. However, as Uganda has an urban electricity access rate of <a href=\"https://data.worldbank.org/indicator/EG.ELC.ACCS.UR.ZS\">around 60%</a>, only that portion of each cluster actually has electricity coming into their houses.</p><p>Then the primary question is this: for each cluster, is it more economical to connect with on-grid or off-grid technology. First we calculate for each cluster what it would cost to connect with off-grid technology. In reality this should consider a range of possibilities, including solar-home systems, solar mini-grids, diesel hybrids and others, to see which can most affordably serve a particular community.</p><p>For this proof-of-concept, I'm simply calculating the off-grid cost as follows:</p><ul><li><em>cost = demand × generator-cost + area × wiring-cost</em></li></ul><p>where demand is estimated simply estimated by the population, and the wiring cost is an estimate of how much electrical wire is needed depending on the size of the village. For this example, I've used a demand of 6 kWh/person/month (corresponding to Tier 2 from the World Bank's <a href=\"https://www.esmap.org/node/55526\">Multi-Tier Framework</a>), 4000 USD/kW for generators and 2 USD/m<sup>2</sup> for wiring.</p><p>With this done, we're ready to start looking into grid extensions, and each time the algorithm finds a potential candidate, it can compare to the already-calculate off-grid cost to see if grid is more suitable. I'm using 50,000 USD/km for grid wiring and the same in-village costs as above for low-voltage wiring.</p><p>We start off with a <a href=\"https://en.wikipedia.org/wiki/Minimum_spanning_tree\">minimum spanning tree</a> connecting all the electrified villages (those that already have electricity access) to all of the remaining villages with the least total amount of wire. However, it gets complicated: the spanning tree doesn't know about the existing grid lines, so it can create multiple paths to the same village.</p><p>Consider the image below, which was produced by the final output from the model. Already connected villages in green, new connections in blue and off-grid villages in red. The existing grid is dark grey, new grid lines purple, while the yellow dashed lines represent lines from the spanning tree that the model rejected. The two villages on the left circle in blue could have been connected by the yellow line, but the model found that the bottom one was more cheaply connected by its southern neighbour, while the top one was cheaply connected by its eastern neighbour.</p><p>The two red off-grid villages were locations where the population was too low, or the grid distance too far, for grid connection to be feasible. So these yellow lines should not be constructed, and some kind of solar solution should instead be used.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/algo-1.png\" class=\"kg-image\"></figure><p>To achieve this heuristic of finding the best connections to keep and which to toss, the model begins as follows (in pseudocode). This only enables those network arcs that don't connect already electrified villages – as they already have grid lines connecting them.</p><pre><code class=\"language-python\">for village in unelectrified_villages:\n    for arc in connected_arcs:\n        arc ← enabled\n</code></pre>\n<p>Then we're ready to loop through all <em>electrified </em>villages, and look in their neighbourhood to see if there are any nearby un-electrified villages that they can extend grid lines to. Each time, it calls the <code>connect_neighbours()</code> function (described below) and if the results are better than the mini-grid costs we calculated, it keeps them. Before making the changes permanent, it compares any duplicates and keeps the cheapest one – this is how the decision is made for the two circled villages in the image above.</p><pre><code class=\"language-python\">while True:\n    for village in electrified_villages:\n        for arc in connected_arcs:\n            if arc is enabled:\n                new ← connect_neighbours(village, arc)\n                \n                if new.cost &lt; mini_grid_cost:\n                    connect ← new\n                    \n    if len(connect) &gt; 0:\n        if duplicates:\n            keep lowest cost\n            \n        for village, arc in connect:\n            village ← electrified\n            arc ← electrified\n    else:\n        break\n</code></pre>\n<p>Finally, let's look at the most important part, the <code>connect_neighbours()</code> function. This starts at the given village and branches outwards looking for the most affordable way to connect nearby villages. This type of tree search is best achieved with a <a href=\"https://en.wikipedia.org/wiki/Recursion_(computer_science)\">recursive function</a> – note the functions calls itself on the second-last line.</p><p>At any moment, the function is tracking two configurations that it has found: the <code>current</code> one that it is looking at, and the <code>best</code> one it has found so far. At any point if the current is cheaper than the best it has found, the best is replaced. It then takes advantage of a very useful property of recursive functions: the ability to pass some data in both directions, and some in only one direction. Note that both <code>current</code> and <code>best</code> are passed to the function call, while only <code>best</code> is returned at the end. This means that the algorithm is free to explore side-paths to its heart's content, but if no better solution is found, the main search is not bothered by the <code>current</code> solution found on that side tree. However, a new <code>best</code> solution will be returned to the main branch.</p><pre><code class=\"language-python\">def connect_neighbours(village, arc, best, current):\n    if node not electrified:\n        current.arcs ← current + arc\n        current.villages ← current + village\n\n        if current.cost() &lt; best.cost():\n            best ← current\n\n        for arc in connected_arcs:\n            if arc is enabled and arc not electrified:\n                best ← conect_neighbours(village, arc, best, current)  \n    return best\n</code></pre>\n<p>For this example, the <code>while</code> loop from two blocks up ran eight times, and found a total of 2,686 new villages to connect, with a remaining 263 that were deemed cheaper to connect with off-grid technology. The final results are shown in the image below, following the same colour scheme as before.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/11/res.png\" class=\"kg-image\"></figure><p>Let's do a quick sanity check of these results. The current population of Uganda is around 43 million, of whom <a href=\"https://data.worldbank.org/indicator/EG.ELC.ACCS.ZS\">about 30%</a> have access to electricity, or 13 million people. According to my heuristic that any cluster within 1 km of the grid has electricity access, and of these 60% have electricity in their house, the number is 15 million people, so not too far from the official measurements. What about the remaining 40% of urban people that aren't considered by this model? Most likely the government should be focusing on <a href=\"https://endev.info/content/Grid_Densification_Challenge_Fund\">grid densification</a> – providing electricity to those already in sight of the grid.</p><p>There are 12 million people in the 2,686 new villages to connect, and hopefully more than 60% of these would get electricity access if the grid arrives. There are a further 230,000 people in the 263 off-grid villages, where a mini-grid solar PV system is probably best. According to the model, the combined cost to connect these people to the grid USD 4.5 billion – but note that this is based on extremely rough guesses of infrastructure costs.</p><p>Finally, what about the people that were left out when we created the clusters? That process ignored 4 million people (about 9%) from the least densely populated parts of Uganda, who are potentially the most in need of public support. It's difficult to model how best to include this group if they are very rural, dispersed populations, it's probably to safe to say that the quickest and cheapest would be to for them to use solar-home systems, such as solar lanterns and individual roof-mounted solar panels.</p><p>You can view a static version of the entire Python notebook <a href=\"http://nbviewer.jupyter.org/github/carderne/electrification-planner/blob/master/electrify.ipynb\">here</a>, or visit the <a href=\"https://github.com/carderne/electrification-planner\">GitHub repo</a> to see the entire package.</p>",
                        "comment_id": "5bbc65477cc70a140e7fd124",
                        "markdown": "Building on the algorithms I developed for mini-grids\n[https://rdrn.me/flask-optimize-minigrid/], I decided to move up a level of\nabstraction and look at the country- rather than village-level. What follows is\nthe outline of a model that use population and other input data, and\ntechno-economic parameters, to develop a nationally optimised pathway to\nachieving universal electrification per the UN's Sustainable Development Goal 7\n[https://sustainabledevelopment.un.org/sdg7].\n\nIf you're more interested in seeing the code, skip over to the \nelectrification-planner [https://github.com/carderne/electrification-planner] \nrepository on GitHub.\n\nClustering population into settlements\nMost GIS data on human populations, such as the GHSL\n[https://ghsl.jrc.ec.europa.eu/]  that I'm using in this example, comes in\nraster format. For example, the population around Kampala, Uganda looks like\nthis. Each pixel represents a grid cell of 250 x 250 metres, and I've shown in\nhere with darker = more people.\n\nThis is extremely useful, and allows for many types of analysis, but isn'y\ninherently useful for planning an electrical grid – the government of Uganda\ndoesn't decide where to build infrastructure on a pixel-by-pixel basis.\n\nThus the first step of this model is to transform this population data into\nsomething more useful for our purposes, by combining nearby pixels into\npopulation 'clusters', which we hope will approximate settlements such as\nvillages, towns and cities. For this process, I'm going to lean heavily on \nrasterio [https://github.com/mapbox/rasterio]  for raster processing, and \nGeoPandas [http://geopandas.org/]  for managing vectors.\n\nSo the first thing we do is read in the population layer and mask it to our area\nof interest. In this case, the GHSL data is global but we only want to focus on\nUganda.\n\nimport rasterio\nimport geopandas as gpd\nimport json\n\npop = rasterio.open(pop_raster)\n\nadm = gpd.read_file(admin_boundary)\nadm = adm.to_crs(crs=pop.crs)\ncoords = [json.loads(adm.to_json())['features'][0]['geometry']]\n\npop_masked, pop_affine = mask(dataset=ghs, shapes=coords, crop=True)\n\n\nThen we can use rasterio's shapes  module to convert the clipped rastero into a\nset of polygons. This just converts each pixel into a vector square.\n\npop_geoms = list(({'properties': {'raster_val': v}, 'geometry': s} \n              for i, (s, v)\n              in enumerate(shapes(pop_masked, mask=None, transform=pop_affine))))\n\npop_poly = gpd.GeoDataFrame.from_features(pop_geoms)\npop_poly.crs = pop.crs.data\n\n\nThen we filter out polygons that are more than fives times average, as these are\nprobably artefacts, and remove all polygons with below a cutoff population, so\nthat we focus on actual villages and towns. Finally, we buffer each polygon out\nby 150 metres so that neighbouring polygons will overlap.\n\npop_poly['area_m2'] = pop_poly.geometry.area\npop_poly = pop_poly[pop_poly['area_m2'] < pop_poly['area_m2'].mean() * 5]\npop_poly = pop_poly[pop_poly['raster_val'] > 50]\n\npop_poly['geometry'] = pop_poly.geometry.buffer(150)\n\n\nThen we use the GeoPandas dissolve  and explode  modules to merge these touching\npolygons into single polygons. After all these steps, we get the following,\nwhere each separate polygon is assigned a random colour. As you can see, Kampala\n(turquoise) and Jinja (in pink, another large Ugandan town) have become\nsprawling, unwieldy polygons that aren't ideal for simple modelling. However,\nbig cities are not really our goal here – hopefully in most cases they already\nhave electricity connections.\n\nThere is one final step to make these clusters a bit more useful. We want to\nknow how many people are in each cluster, and how far they are from existing\nelectricity grid infrastructure. For the grid distances, we need to read in our\ngrid file, and convert it to a raster. In the section below, the red vector\nlines are transformed into the black raster data, with 250 x 250 metres grid\ncells as in our population data.\n\nAn important thing to remember at this point is that a raster is just a\n2-dimensional array, plus geospatial information. Thus, we can use SciPy\n[https://www.scipy.org/]  and the Euclidean distance transform\n[https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.ndimage.morphology.distance_transform_edt.html] \n to calculate the distance from every point in a raster to preset points of\ninterest, which in this case is the black electricity grid in the image above.\nThese distances are shown above, with bluer cells meaning further distances.\n\nWith this done, we use a neat little library called rasterstats\n[https://github.com/perrygeo/python-rasterstats], which creates summary\nstatistics of rasters based on vector geometries. We use this to get the minimum \n distance a cluster is from any grid infrastructure. We do the same for\npopulation, but take the sum, as we want to know the total population hiding\nunder each cluster.\n\ngrid = gpd.read_file(grid_file)\ngrid = grid.to_crs(crs=pop_poly.crs)\n\ngrid_raster = rasterize(grid.geometry, out_shape=pop_masked[0].shape, fill=1, default_value=0, all_touched=True, transform=pop_affine)\ndist_raster = ndimage.distance_transform_edt(grid_raster)\n\ndists = zonal_stats(vectors=pop_poly, raster=dist_raster, affine=pop_affine, stats='min', nodata=1000)\npop_poly['grid_dist'] = [x['min'] for x in dists]\n\npop_sums = zonal_stats(pop_poly, pop, stats='sum')\npop_poly['pop'] = [x['sum'] for x in pop_sums]\n\n\nFinally we get the following result, where all clusters within 1 km of the grid\nhave been excluded. The remaining villages are coloured by population, with\nhigher populations being more blue.\n\nChoosing the optimum technology for each cluster\nNow that we have a sensible representation of settlements, along with their\npopulations and distance from infrastructure, we can start to look at how best\nto provide each settlement with electricity. In reality, there are a number of\nthings we'd additionally need to do: estimate demand based on various economic\nfactors, consider resource availability such as solar radiation, exclude areas\nthat are too high/steep/sensitive for whatever technology to be used. For now\nI'm simplifying things so we can focus on the core modelling process.\n\nSimilar to the process I described for mini-grids\n[https://rdrn.me/flask-optimize-minigrid/], we take these grid lines and\nclusters and from them create a network\n[https://en.wikipedia.org/wiki/Network_theory], where each line and each cluster\nis aware of who its neighbours are. The difference is that mini-grids are a\ngreenfield with no existing grid lines, whereas Uganda already has several\nthousand km of grid lines. As above, we take these into account by specifying\nthat every village within 1 km of grid lines is already electrified. However, as\nUganda has an urban electricity access rate of around 60%\n[https://data.worldbank.org/indicator/EG.ELC.ACCS.UR.ZS], only that portion of\neach cluster actually has electricity coming into their houses.\n\nThen the primary question is this: for each cluster, is it more economical to\nconnect with on-grid or off-grid technology. First we calculate for each cluster\nwhat it would cost to connect with off-grid technology. In reality this should\nconsider a range of possibilities, including solar-home systems, solar\nmini-grids, diesel hybrids and others, to see which can most affordably serve a\nparticular community.\n\nFor this proof-of-concept, I'm simply calculating the off-grid cost as follows:\n\n * cost = demand × generator-cost + area × wiring-cost\n\nwhere demand is estimated simply estimated by the population, and the wiring\ncost is an estimate of how much electrical wire is needed depending on the size\nof the village. For this example, I've used a demand of 6 kWh/person/month\n(corresponding to Tier 2 from the World Bank's Multi-Tier Framework\n[https://www.esmap.org/node/55526]), 4000 USD/kW for generators and 2 USD/m2 \nfor wiring.\n\nWith this done, we're ready to start looking into grid extensions, and each time\nthe algorithm finds a potential candidate, it can compare to the\nalready-calculate off-grid cost to see if grid is more suitable. I'm using\n50,000 USD/km for grid wiring and the same in-village costs as above for\nlow-voltage wiring.\n\nWe start off with a minimum spanning tree\n[https://en.wikipedia.org/wiki/Minimum_spanning_tree]  connecting all the\nelectrified villages (those that already have electricity access) to all of the\nremaining villages with the least total amount of wire. However, it gets\ncomplicated: the spanning tree doesn't know about the existing grid lines, so it\ncan create multiple paths to the same village.\n\nConsider the image below, which was produced by the final output from the model.\nAlready connected villages in green, new connections in blue and off-grid\nvillages in red. The existing grid is dark grey, new grid lines purple, while\nthe yellow dashed lines represent lines from the spanning tree that the model\nrejected. The two villages on the left circle in blue could have been connected\nby the yellow line, but the model found that the bottom one was more cheaply\nconnected by its southern neighbour, while the top one was cheaply connected by\nits eastern neighbour.\n\nThe two red off-grid villages were locations where the population was too low,\nor the grid distance too far, for grid connection to be feasible. So these\nyellow lines should not be constructed, and some kind of solar solution should\ninstead be used.\n\nTo achieve this heuristic of finding the best connections to keep and which to\ntoss, the model begins as follows (in pseudocode). This only enables those\nnetwork arcs that don't connect already electrified villages – as they already\nhave grid lines connecting them.\n\nfor village in unelectrified_villages:\n    for arc in connected_arcs:\n        arc ← enabled\n\n\nThen we're ready to loop through all electrified villages, and look in their\nneighbourhood to see if there are any nearby un-electrified villages that they\ncan extend grid lines to. Each time, it calls the connect_neighbours()  function\n(described below) and if the results are better than the mini-grid costs we\ncalculated, it keeps them. Before making the changes permanent, it compares any\nduplicates and keeps the cheapest one – this is how the decision is made for the\ntwo circled villages in the image above.\n\nwhile True:\n    for village in electrified_villages:\n        for arc in connected_arcs:\n            if arc is enabled:\n                new ← connect_neighbours(village, arc)\n                \n                if new.cost < mini_grid_cost:\n                    connect ← new\n                    \n    if len(connect) > 0:\n        if duplicates:\n            keep lowest cost\n            \n        for village, arc in connect:\n            village ← electrified\n            arc ← electrified\n    else:\n        break\n\n\nFinally, let's look at the most important part, the connect_neighbours() \nfunction. This starts at the given village and branches outwards looking for the\nmost affordable way to connect nearby villages. This type of tree search is best\nachieved with a recursive function\n[https://en.wikipedia.org/wiki/Recursion_(computer_science)]  – note the\nfunctions calls itself on the second-last line.\n\nAt any moment, the function is tracking two configurations that it has found:\nthe current  one that it is looking at, and the best  one it has found so far.\nAt any point if the current is cheaper than the best it has found, the best is\nreplaced. It then takes advantage of a very useful property of recursive\nfunctions: the ability to pass some data in both directions, and some in only\none direction. Note that both current  and best  are passed to the function\ncall, while only best  is returned at the end. This means that the algorithm is\nfree to explore side-paths to its heart's content, but if no better solution is\nfound, the main search is not bothered by the current  solution found on that\nside tree. However, a new best  solution will be returned to the main branch.\n\ndef connect_neighbours(village, arc, best, current):\n    if node not electrified:\n        current.arcs ← current + arc\n        current.villages ← current + village\n\n        if current.cost() < best.cost():\n            best ← current\n\n        for arc in connected_arcs:\n            if arc is enabled and arc not electrified:\n                best ← conect_neighbours(village, arc, best, current)  \n    return best\n\n\nFor this example, the while  loop from two blocks up ran eight times, and found\na total of 2,686 new villages to connect, with a remaining 263 that were deemed\ncheaper to connect with off-grid technology. The final results are shown in the\nimage below, following the same colour scheme as before.\n\nLet's do a quick sanity check of these results. The current population of Uganda\nis around 43 million, of whom about 30%\n[https://data.worldbank.org/indicator/EG.ELC.ACCS.ZS]  have access to\nelectricity, or 13 million people. According to my heuristic that any cluster\nwithin 1 km of the grid has electricity access, and of these 60% have\nelectricity in their house, the number is 15 million people, so not too far from\nthe official measurements. What about the remaining 40% of urban people that\naren't considered by this model? Most likely the government should be focusing\non grid densification\n[https://endev.info/content/Grid_Densification_Challenge_Fund]  – providing\nelectricity to those already in sight of the grid.\n\nThere are 12 million people in the 2,686 new villages to connect, and hopefully\nmore than 60% of these would get electricity access if the grid arrives. There\nare a further 230,000 people in the 263 off-grid villages, where a mini-grid\nsolar PV system is probably best. According to the model, the combined cost to\nconnect these people to the grid USD 4.5 billion – but note that this is based\non extremely rough guesses of infrastructure costs.\n\nFinally, what about the people that were left out when we created the clusters?\nThat process ignored 4 million people (about 9%) from the least densely\npopulated parts of Uganda, who are potentially the most in need of public\nsupport. It's difficult to model how best to include this group if they are very\nrural, dispersed populations, it's probably to safe to say that the quickest and\ncheapest would be to for them to use solar-home systems, such as solar lanterns\nand individual roof-mounted solar panels.\n\nYou can view a static version of the entire Python notebook here\n[http://nbviewer.jupyter.org/github/carderne/electrification-planner/blob/master/electrify.ipynb]\n, or visit the GitHub repo [https://github.com/carderne/electrification-planner] \n to see the entire package.",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": null,
                        "meta_description": null,
                        "author_id": "1",
                        "created_at": "2018-10-09 08:22:31",
                        "created_by": "1",
                        "updated_at": "2018-11-09 14:23:12",
                        "updated_by": "1",
                        "published_at": "2018-09-27 13:22:00",
                        "published_by": "1",
                        "custom_excerpt": null,
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbc65567cc70a140e7fd126",
                        "uuid": "5403e2e9-c0b5-4a90-b948-360a39ed9b27",
                        "title": "Modelling hydrological networks at massive scale",
                        "slug": "modelling-hydrological-networks",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2018/10/riv_start-1.png\"}],[\"image\",{\"src\":\"/content/images/2018/10/small_section-1.png\"}],[\"image\",{\"src\":\"/content/images/2018/10/nodes-1.png\"}],[\"markdown\",{\"markdown\":\"```Python\\ndef shreve(arc_index, direction_node_id, network, nodes):\\n    up_stream_orders = []\\n    if len(nodes[direction_node_id]) == 5:\\n        network[arc_index][7] = 1\\n    else:\\n        for index, arc in enumerate(nodes[direction_node_id]):\\n            if index >= 4:\\n                if network[arc][0] != arc_index:\\n                    if network[arc][5] != direction_node_id:\\n                        up_stream_orders.append(shreve(arc,\\n                            network[arc][5], network, nodes))\\n                    else:\\n                        up_stream_orders.append(shreve(arc,\\n                            network[arc][6], network, nodes))\\n        max_orders = heapq.nlargest(2, up_stream_orders)\\n        if len(max_orders) == 2:\\n            order = 0 + max_orders[0] + max_orders[1]\\n        else:\\n            order = 0 + max(up_stream_orders)\\n\\n        network[arc_index][7] = order\\n    return network[arc_index][7]\\n```\"}],[\"image\",{\"src\":\"/content/images/2018/10/so_big.png\"}],[\"image\",{\"src\":\"/content/images/2018/10/with_dem-1.png\"}],[\"image\",{\"src\":\"/content/images/2018/10/hydro2.png\"}]],\"markups\":[[\"a\",[\"href\",\"https://www.kth.se/en/itm/inst/energiteknik/forskning/desa/welcome-to-the-unit-of-energy-systems-analysis-kth-desa-1.197296\"]],[\"a\",[\"href\",\"https://www.weap21.org/index.asp?NewLang=EN\"]],[\"a\",[\"href\",\"https://www.sei.org/\"]],[\"a\"],[\"a\",[\"href\",\"http://www.hydrosheds.org/\"]],[\"a\",[\"href\",\"https://data.jrc.ec.europa.eu/collection/water\"]],[\"a\",[\"href\",\"https://www.mdpi.com/1996-1073/11/11/3100\"]],[\"a\",[\"href\",\"https://github.com/carderne/hydro-networks\"]],[\"a\",[\"href\",\"http://geopandas.org/\"]],[\"em\"],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Stream_order\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Strahler_number\"]],[\"a\",[\"href\",\"https://doi.org/10.1111/j.1752-1688.2004.tb01057.x\"]],[\"a\",[\"href\",\"https://www2.jpl.nasa.gov/srtm/\"]],[\"a\",[\"href\",\"http://www.fao.org/land-water/land/land-governance/land-resources-planning-toolbox/category/details/en/c/1036355/\"]],[\"a\",[\"href\",\"http://pro.arcgis.com/en/pro-app/arcpy/get-started/what-is-arcpy-.htm\"]],[\"a\",[\"href\",\"https://github.com/mapbox/rasterio\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Run-of-the-river_hydroelectricity\"]],[\"sup\"],[\"a\",[\"href\",\"http://www.weap21.org/webhelp/hydrology.htm\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Ironically, a large part of my work at KTH's \"],[0,[0],1,\"Division of Energy Systems Analysis\"],[0,[],0,\" was modelling complex hydrological systems. Often, this was while modelling the 'nexus' between different systems, such as energy, water and climate – as opposed to treating these as separate fields of study.\"]]],[1,\"p\",[[0,[],0,\"A lot of this was done in \"],[0,[1],1,\"WEAP\"],[0,[],0,\", a hydrological modelling package courtesy of the \"],[0,[2],1,\"Stockholm Environmental Institute\"],[0,[3],1,\".\"],[0,[],0,\" This provided an easy user interface, and access to a variety of complex models and systems for things such as rainwater runoff and crop requirements. However, it isn't easily scriptable, and is mostly suited to very localised systems.\"]]],[1,\"p\",[[0,[],0,\"So when my colleagues and I wanted to conduct a continent-scale assessment of mini-hydropower potential, we had to turn elsewhere. For the first version of this, I created a simple script to run down every river in a given network and calculate the elevation drop (head) between points to estimate hydropower potential. We applied this to the whole of Sub-Saharan Africa, using river networks from \"],[0,[4],1,\"HydroSHEDS\"],[0,[],0,\" and runoff data from the EU's \"],[0,[5],1,\"Joint Research Centre\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Update: The paper we wrote on this has recently been published with the journal Energies: \"],[0,[6],1,\"A Geospatial Assessment of Small-Scale Hydropower Potential in Sub-Saharan Africa\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Later on, I decided to improve and generalise this simple model and came with an unwieldy bit of code called \"],[0,[7],1,\"hydro-networks\"],[0,[],0,\". Instead of just creating points all over the show, I set out to create a model that would:\"]]],[3,\"ul\",[[[0,[],0,\"Conduct massive scale hydrological modelling\"]],[[0,[],0,\"Calculate runoff and streamflow using precipitation and land-use data\"]],[[0,[],0,\"Model rivers in a network-aware manner\"]],[[0,[],0,\"Allow point sources/drains such as farms and dams to be added procedurally\"]]]],[1,\"p\",[[0,[],0,\"At a rough estimate, I achieved about 3/4 of this, and realised runoff modelling is damn hard. What I did manage was still pretty fun, so I'm going to go over an example below, in the hopes that one day I'll pick this up again and complete it.\"]]],[1,\"h3\",[[0,[],0,\"Create direction-aware river networks\"]]],[1,\"p\",[[0,[],0,\"The model uses the wonderful \"],[0,[8],1,\"GeoPandas\"],[0,[],0,\" library to read in the river network data from \"],[0,[4],1,\"HydroSHEDS\"],[0,[],0,\". It is very happy crunching the data for the whole African continent, but to make this easier, I've clipped out a small river called \"],[0,[9],1,\"Dieprivier\"],[0,[],0,\" just outside Cape Town (yes, they exist).\"]]],[10,0],[1,\"p\",[[0,[],0,\"If we zoom into a small section, we see the the model-generated layer (purple) matches pretty well with the painstakingly traced data (light blue) from OpenStreetMap.\"]]],[10,1],[1,\"p\",[[0,[],0,\"The model then goes through a couple of steps to convert this GIS data into something we can use for modelling.\"]]],[3,\"ol\",[[[0,[],0,\"Go through every river segment in the input data, and create for it a separate \"],[0,[9],1,\"arc\"],[0,[],0,\", which altogether form the \"],[0,[9],1,\"network \"],[0,[],0,\"data structure\"],[0,[9],1,\".\"]],[[0,[],0,\"As it does this, create another data structure called \"],[0,[9],1,\"nodes \"],[0,[],0,\"that contains all of these points where arcs meet or terminate.\"]],[[0,[],0,\"Then tell every \"],[0,[9],1,\"arc\"],[0,[],0,\" which two nodes it is connected to, and tell each \"],[0,[9],1,\"node \"],[0,[],0,\"which arcs it is connected to. This means if we know a node location, we know which arcs connect to it, and therefore which other nodes are connected, and so on.\"]]]],[1,\"p\",[[0,[],0,\"A small section of the resulting layers is shown below, with the nodes at the intersections of river arcs. The large green node \"],[0,[9],1,\"knows \"],[0,[],0,\"which arcs are connected to it (also in green) and they in turn know about it.\"]]],[10,2],[1,\"h3\",[[0,[],0,\"Giving the network some order\"]]],[1,\"p\",[[0,[],0,\"This is all very well, but it's still just a bunch of lines and dots. To make this network a lot easier to use, we must assign \"],[0,[10],1,\"stream orders\"],[0,[],0,\" to the arcs – essentially indicating how many upstream branches they have. This is a useful proxy for how 'big' any part of a river is relative to the network, but also allows the model to easily orientate itself to what is up- and down-stream of any node.\"]]],[1,\"p\",[[0,[],0,\"There are two main approaches to this, the \"],[0,[11],1,\"Strahler number\"],[0,[],0,\" and the Shreve number. For the Strahler number, the smallest tributaries are assigned an order of 1. These are then followed down, and when two 1's join, they form a 2. If two streams with a different number join, it gets the higher of the two, i.e. 1+2=2. The Shreve number is similar, except the numbers always add, so 1+2=3! For this model, I used the Shreve number, as it ensures that a downstream section always has a higher number that the sections upstream of it.\"]]],[1,\"p\",[[0,[],0,\"To achieve this, I adapted the algorithm from \"],[0,[12],1,\"this paper\"],[0,[],0,\" (Gleyzer, et al., 2007), a beautiful but not very intuitive recursive function. Basically, it starts at the mouth of a given river (identified by a separate bit of code) and then follows recursively up the network until it reaches the mountain-top tributaries. Then it trickles back down to the mouth, adding up the stream orders as it goes.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Applied to the entire river network, it looks something like this.\"]]],[10,4],[1,\"h3\",[[0,[],0,\"Adding data layers and doing things\"]]],[1,\"p\",[[0,[],0,\"Now that we have the network set up and ordered, it's time to do something with it! In addition to the runoff data mentioned further up, there are a few other important layers:\"]]],[3,\"ul\",[[[0,[],0,\"Digital elevation model (DEM), normally from \"],[0,[13],1,\"NASA's SRTM\"]],[[0,[],0,\"Flow accumulation, which is derived from the DEM and also available at \"],[0,[4],1,\"HydroSHEDS\"]],[[0,[],0,\"Land cover, used for modelling runoff and available from the \"],[0,[14],1,\"FAO\"]],[[0,[],0,\"ETo, the reference evapotranspiration for an area, also available from the FAO\"]],[[0,[],0,\"Precipitation, from many sources, hopefully monthly, never easy to use\"]]]],[1,\"p\",[[0,[],0,\"For example, here's our same river overlaid with the DEM elevation data.\"]]],[10,5],[1,\"p\",[[0,[],0,\"Previously I used the laborious and buggy \"],[0,[15],1,\"ArcPy\"],[0,[],0,\" to extract all of this information in the \"],[0,[9],1,\"network \"],[0,[],0,\"and \"],[0,[9],1,\"nodes \"],[0,[],0,\"data structures, but now \"],[0,[16],1,\"rasterio\"],[0,[],0,\" makes this a walk in the park. It's a straightforward library for reading raster GIS data and sampling and manipulating it, and takes only a few lines to load all of this new data.\"]]],[1,\"h3\",[[0,[],0,\"Calculating hydropower potential\"]]],[1,\"p\",[[0,[],0,\"One thing that we can do with all of this data is replicate the hydropower estimates, from the paper we wrote, except now just for \"],[0,[9],1,\"Dieprivier \"],[0,[],0,\"in Cape Town. Note that this is exclusively for \"],[0,[17],1,\"run-of-river\"],[0,[],0,\" mini-hydropower. To estimate power output, we use the hydropower formula as follows:\"]]],[3,\"ul\",[[[0,[9],1,\"P = ηρgQH\"]]]],[1,\"p\",[[0,[],0,\"where \"],[0,[9],1,\"P\"],[0,[],0,\" is the power output, \"],[0,[9],1,\"η\"],[0,[],0,\" is the efficiency, \"],[0,[9],1,\"ρ\"],[0,[],0,\" is the density of water, and \"],[0,[9],1,\"g \"],[0,[],0,\"is acceleration due to gravity. \"],[0,[9],1,\"Q \"],[0,[],0,\"is the flow-rate, and \"],[0,[9],1,\"H \"],[0,[],0,\"is the head, or height difference available. These last two must be calculated for each point using the data described above.\"]]],[1,\"p\",[[0,[],0,\"The head is simple: we get the height for our chosen point, and then look a set distance up-stream and get the height there – the difference between these is the head. The flow-rate is more complicated. The global runoff data we have is provided in m/s, where we need m\"],[0,[18],1,\"3\"],[0,[],0,\"/s. So we do the following:\"]]],[3,\"ul\",[[[0,[9],1,\"Q = runoff × catchment-area\"]]]],[1,\"p\",[[0,[],0,\"where \"],[0,[9],1,\"catchment-area \"],[0,[],0,\"is the total area upstream of the selected point. Multiplying these together calculates the theoretical amount of water that should flow past this point.\"]]],[1,\"p\",[[0,[],0,\"Applying this to \"],[0,[9],1,\"Dieprivier\"],[0,[],0,\", the model creates a point every 500 metres and calculates the head over the preceding 500 metres. By filtering to only include those with at least 10 metres of head and more than 100 kW output, we get the following suggested point of 162 kW, with 12 metres of head and flow rate of 2.75 m\"],[0,[18],1,\"3\"],[0,[],0,\"/s.\"]]],[10,6],[1,\"p\",[[0,[9],1,\"Note that this is an unchecked, un-calibrated example result, I'm not at all suggesting someone should build a mini-hydropower site there.\"]]],[1,\"h2\",[[0,[],0,\"Going further with rainfall runoff and discharge\"]]],[1,\"p\",[[0,[],0,\"The result above was calculated using the GSCD, which provides only a single value, with no monthly or yearly variations. This doesn't provide much information about seasonal changes, nor allow for any calibrations with stream gauges, which will likely be on a daily or monthly basis.\"]]],[1,\"p\",[[0,[],0,\"To improve this, I extended the model to work with precipitation as an input instead, which is often available as monthly (or even daily data). For each node then, the model takes local precipitation, land cover and evapotranspiration data and uses the \"],[0,[19],1,\"Simplified Coefficeint Method\"],[0,[],0,\" to calculate local rainfall runoff. This is then carried downstream in the model, and when stream join, their flows are combined. At the same time, there are certain losses on each stream due to various causes.\"]]],[1,\"p\",[[0,[],0,\"Then every river section has a (potentially) more accurate discharge associated with it, which is now able to vary by month and day. So in the example above, we could specify not only the mean power output, but also show which months we expect to have lower and higher output.\"]]],[1,\"p\",[[0,[],0,\"The code for this is all with the model in the \"],[0,[7],1,\"GitHub repo\"],[0,[],0,\", but be aware – it takes a lot of fiddling and calibration to get useful numbers out, and precipitation and stream gauge data often require a lot more data wrangling to make ready for the model. I was on the verge of setting up the model to calibrate against some measurements automatically, but that'll have to be a project for another day.\"]]],[1,\"h3\",[[0,[],0,\"Towards a generalised model\"]]],[1,\"p\",[[0,[],0,\"From there, it's not a huge step to add other point withdrawals (such as city water requirements or a farm) and use the model to make predictions about the system. For example, by including projected precipitation changes and increased population (and hence increased withdrawals) we could model whether there would be a water shortfall, and in which months this would be most severe.\"]]],[1,\"p\",[[0,[],0,\"As I said, the model isn't quite there, but hopefully I'll come back to it at some point.\"]]],[1,\"p\",[]]]}",
                        "html": "<p>Ironically, a large part of my work at KTH's <a href=\"https://www.kth.se/en/itm/inst/energiteknik/forskning/desa/welcome-to-the-unit-of-energy-systems-analysis-kth-desa-1.197296\">Division of Energy Systems Analysis</a> was modelling complex hydrological systems. Often, this was while modelling the 'nexus' between different systems, such as energy, water and climate – as opposed to treating these as separate fields of study.</p><p>A lot of this was done in <a href=\"https://www.weap21.org/index.asp?NewLang=EN\">WEAP</a>, a hydrological modelling package courtesy of the <a href=\"https://www.sei.org/\">Stockholm Environmental Institute</a><a>.</a> This provided an easy user interface, and access to a variety of complex models and systems for things such as rainwater runoff and crop requirements. However, it isn't easily scriptable, and is mostly suited to very localised systems.</p><p>So when my colleagues and I wanted to conduct a continent-scale assessment of mini-hydropower potential, we had to turn elsewhere. For the first version of this, I created a simple script to run down every river in a given network and calculate the elevation drop (head) between points to estimate hydropower potential. We applied this to the whole of Sub-Saharan Africa, using river networks from <a href=\"http://www.hydrosheds.org/\">HydroSHEDS</a> and runoff data from the EU's <a href=\"https://data.jrc.ec.europa.eu/collection/water\">Joint Research Centre</a>.</p><p>Update: The paper we wrote on this has recently been published with the journal Energies: <a href=\"https://www.mdpi.com/1996-1073/11/11/3100\">A Geospatial Assessment of Small-Scale Hydropower Potential in Sub-Saharan Africa</a>.</p><p>Later on, I decided to improve and generalise this simple model and came with an unwieldy bit of code called <a href=\"https://github.com/carderne/hydro-networks\">hydro-networks</a>. Instead of just creating points all over the show, I set out to create a model that would:</p><ul><li>Conduct massive scale hydrological modelling</li><li>Calculate runoff and streamflow using precipitation and land-use data</li><li>Model rivers in a network-aware manner</li><li>Allow point sources/drains such as farms and dams to be added procedurally</li></ul><p>At a rough estimate, I achieved about 3/4 of this, and realised runoff modelling is damn hard. What I did manage was still pretty fun, so I'm going to go over an example below, in the hopes that one day I'll pick this up again and complete it.</p><h3 id=\"create-direction-aware-river-networks\">Create direction-aware river networks</h3><p>The model uses the wonderful <a href=\"http://geopandas.org/\">GeoPandas</a> library to read in the river network data from <a href=\"http://www.hydrosheds.org/\">HydroSHEDS</a>. It is very happy crunching the data for the whole African continent, but to make this easier, I've clipped out a small river called <em>Dieprivier</em> just outside Cape Town (yes, they exist).</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/riv_start-1.png\" class=\"kg-image\"></figure><p>If we zoom into a small section, we see the the model-generated layer (purple) matches pretty well with the painstakingly traced data (light blue) from OpenStreetMap.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/small_section-1.png\" class=\"kg-image\"></figure><p>The model then goes through a couple of steps to convert this GIS data into something we can use for modelling.</p><ol><li>Go through every river segment in the input data, and create for it a separate <em>arc</em>, which altogether form the <em>network </em>data structure<em>.</em></li><li>As it does this, create another data structure called <em>nodes </em>that contains all of these points where arcs meet or terminate.</li><li>Then tell every <em>arc</em> which two nodes it is connected to, and tell each <em>node </em>which arcs it is connected to. This means if we know a node location, we know which arcs connect to it, and therefore which other nodes are connected, and so on.</li></ol><p>A small section of the resulting layers is shown below, with the nodes at the intersections of river arcs. The large green node <em>knows </em>which arcs are connected to it (also in green) and they in turn know about it.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/nodes-1.png\" class=\"kg-image\"></figure><h3 id=\"giving-the-network-some-order\">Giving the network some order</h3><p>This is all very well, but it's still just a bunch of lines and dots. To make this network a lot easier to use, we must assign <a href=\"https://en.wikipedia.org/wiki/Stream_order\">stream orders</a> to the arcs – essentially indicating how many upstream branches they have. This is a useful proxy for how 'big' any part of a river is relative to the network, but also allows the model to easily orientate itself to what is up- and down-stream of any node.</p><p>There are two main approaches to this, the <a href=\"https://en.wikipedia.org/wiki/Strahler_number\">Strahler number</a> and the Shreve number. For the Strahler number, the smallest tributaries are assigned an order of 1. These are then followed down, and when two 1's join, they form a 2. If two streams with a different number join, it gets the higher of the two, i.e. 1+2=2. The Shreve number is similar, except the numbers always add, so 1+2=3! For this model, I used the Shreve number, as it ensures that a downstream section always has a higher number that the sections upstream of it.</p><p>To achieve this, I adapted the algorithm from <a href=\"https://doi.org/10.1111/j.1752-1688.2004.tb01057.x\">this paper</a> (Gleyzer, et al., 2007), a beautiful but not very intuitive recursive function. Basically, it starts at the mouth of a given river (identified by a separate bit of code) and then follows recursively up the network until it reaches the mountain-top tributaries. Then it trickles back down to the mouth, adding up the stream orders as it goes.</p><pre><code class=\"language-Python\">def shreve(arc_index, direction_node_id, network, nodes):\n    up_stream_orders = []\n    if len(nodes[direction_node_id]) == 5:\n        network[arc_index][7] = 1\n    else:\n        for index, arc in enumerate(nodes[direction_node_id]):\n            if index &gt;= 4:\n                if network[arc][0] != arc_index:\n                    if network[arc][5] != direction_node_id:\n                        up_stream_orders.append(shreve(arc,\n                            network[arc][5], network, nodes))\n                    else:\n                        up_stream_orders.append(shreve(arc,\n                            network[arc][6], network, nodes))\n        max_orders = heapq.nlargest(2, up_stream_orders)\n        if len(max_orders) == 2:\n            order = 0 + max_orders[0] + max_orders[1]\n        else:\n            order = 0 + max(up_stream_orders)\n\n        network[arc_index][7] = order\n    return network[arc_index][7]\n</code></pre>\n<p>Applied to the entire river network, it looks something like this.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/so_big.png\" class=\"kg-image\"></figure><h3 id=\"adding-data-layers-and-doing-things\">Adding data layers and doing things</h3><p>Now that we have the network set up and ordered, it's time to do something with it! In addition to the runoff data mentioned further up, there are a few other important layers:</p><ul><li>Digital elevation model (DEM), normally from <a href=\"https://www2.jpl.nasa.gov/srtm/\">NASA's SRTM</a></li><li>Flow accumulation, which is derived from the DEM and also available at <a href=\"http://www.hydrosheds.org/\">HydroSHEDS</a></li><li>Land cover, used for modelling runoff and available from the <a href=\"http://www.fao.org/land-water/land/land-governance/land-resources-planning-toolbox/category/details/en/c/1036355/\">FAO</a></li><li>ETo, the reference evapotranspiration for an area, also available from the FAO</li><li>Precipitation, from many sources, hopefully monthly, never easy to use</li></ul><p>For example, here's our same river overlaid with the DEM elevation data.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/with_dem-1.png\" class=\"kg-image\"></figure><p>Previously I used the laborious and buggy <a href=\"http://pro.arcgis.com/en/pro-app/arcpy/get-started/what-is-arcpy-.htm\">ArcPy</a> to extract all of this information in the <em>network </em>and <em>nodes </em>data structures, but now <a href=\"https://github.com/mapbox/rasterio\">rasterio</a> makes this a walk in the park. It's a straightforward library for reading raster GIS data and sampling and manipulating it, and takes only a few lines to load all of this new data.</p><h3 id=\"calculating-hydropower-potential\">Calculating hydropower potential</h3><p>One thing that we can do with all of this data is replicate the hydropower estimates, from the paper we wrote, except now just for <em>Dieprivier </em>in Cape Town. Note that this is exclusively for <a href=\"https://en.wikipedia.org/wiki/Run-of-the-river_hydroelectricity\">run-of-river</a> mini-hydropower. To estimate power output, we use the hydropower formula as follows:</p><ul><li><em>P = ηρgQH</em></li></ul><p>where <em>P</em> is the power output, <em>η</em> is the efficiency, <em>ρ</em> is the density of water, and <em>g </em>is acceleration due to gravity. <em>Q </em>is the flow-rate, and <em>H </em>is the head, or height difference available. These last two must be calculated for each point using the data described above.</p><p>The head is simple: we get the height for our chosen point, and then look a set distance up-stream and get the height there – the difference between these is the head. The flow-rate is more complicated. The global runoff data we have is provided in m/s, where we need m<sup>3</sup>/s. So we do the following:</p><ul><li><em>Q = runoff × catchment-area</em></li></ul><p>where <em>catchment-area </em>is the total area upstream of the selected point. Multiplying these together calculates the theoretical amount of water that should flow past this point.</p><p>Applying this to <em>Dieprivier</em>, the model creates a point every 500 metres and calculates the head over the preceding 500 metres. By filtering to only include those with at least 10 metres of head and more than 100 kW output, we get the following suggested point of 162 kW, with 12 metres of head and flow rate of 2.75 m<sup>3</sup>/s.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/hydro2.png\" class=\"kg-image\"></figure><p><em>Note that this is an unchecked, un-calibrated example result, I'm not at all suggesting someone should build a mini-hydropower site there.</em></p><h2 id=\"going-further-with-rainfall-runoff-and-discharge\">Going further with rainfall runoff and discharge</h2><p>The result above was calculated using the GSCD, which provides only a single value, with no monthly or yearly variations. This doesn't provide much information about seasonal changes, nor allow for any calibrations with stream gauges, which will likely be on a daily or monthly basis.</p><p>To improve this, I extended the model to work with precipitation as an input instead, which is often available as monthly (or even daily data). For each node then, the model takes local precipitation, land cover and evapotranspiration data and uses the <a href=\"http://www.weap21.org/webhelp/hydrology.htm\">Simplified Coefficeint Method</a> to calculate local rainfall runoff. This is then carried downstream in the model, and when stream join, their flows are combined. At the same time, there are certain losses on each stream due to various causes.</p><p>Then every river section has a (potentially) more accurate discharge associated with it, which is now able to vary by month and day. So in the example above, we could specify not only the mean power output, but also show which months we expect to have lower and higher output.</p><p>The code for this is all with the model in the <a href=\"https://github.com/carderne/hydro-networks\">GitHub repo</a>, but be aware – it takes a lot of fiddling and calibration to get useful numbers out, and precipitation and stream gauge data often require a lot more data wrangling to make ready for the model. I was on the verge of setting up the model to calibrate against some measurements automatically, but that'll have to be a project for another day.</p><h3 id=\"towards-a-generalised-model\">Towards a generalised model</h3><p>From there, it's not a huge step to add other point withdrawals (such as city water requirements or a farm) and use the model to make predictions about the system. For example, by including projected precipitation changes and increased population (and hence increased withdrawals) we could model whether there would be a water shortfall, and in which months this would be most severe.</p><p>As I said, the model isn't quite there, but hopefully I'll come back to it at some point.</p>",
                        "comment_id": "5bbc65567cc70a140e7fd126",
                        "markdown": "Ironically, a large part of my work at KTH's Division of Energy Systems Analysis\n[https://www.kth.se/en/itm/inst/energiteknik/forskning/desa/welcome-to-the-unit-of-energy-systems-analysis-kth-desa-1.197296] \n was modelling complex hydrological systems. Often, this was while modelling the\n'nexus' between different systems, such as energy, water and climate – as\nopposed to treating these as separate fields of study.\n\nA lot of this was done in WEAP [https://www.weap21.org/index.asp?NewLang=EN], a\nhydrological modelling package courtesy of the Stockholm Environmental Institute\n[https://www.sei.org/].  This provided an easy user interface, and access to a\nvariety of complex models and systems for things such as rainwater runoff and\ncrop requirements. However, it isn't easily scriptable, and is mostly suited to\nvery localised systems.\n\nSo when my colleagues and I wanted to conduct a continent-scale assessment of\nmini-hydropower potential, we had to turn elsewhere. For the first version of\nthis, I created a simple script to run down every river in a given network and\ncalculate the elevation drop (head) between points to estimate hydropower\npotential. We applied this to the whole of Sub-Saharan Africa, using river\nnetworks from HydroSHEDS [http://www.hydrosheds.org/]  and runoff data from the\nEU's Joint Research Centre [https://data.jrc.ec.europa.eu/collection/water].\n\nUpdate: The paper we wrote on this has recently been published with the journal\nEnergies: A Geospatial Assessment of Small-Scale Hydropower Potential in\nSub-Saharan Africa [https://www.mdpi.com/1996-1073/11/11/3100].\n\nLater on, I decided to improve and generalise this simple model and came with an\nunwieldy bit of code called hydro-networks\n[https://github.com/carderne/hydro-networks]. Instead of just creating points\nall over the show, I set out to create a model that would:\n\n * Conduct massive scale hydrological modelling\n * Calculate runoff and streamflow using precipitation and land-use data\n * Model rivers in a network-aware manner\n * Allow point sources/drains such as farms and dams to be added procedurally\n\nAt a rough estimate, I achieved about 3/4 of this, and realised runoff modelling\nis damn hard. What I did manage was still pretty fun, so I'm going to go over an\nexample below, in the hopes that one day I'll pick this up again and complete\nit.\n\nCreate direction-aware river networks\nThe model uses the wonderful GeoPandas [http://geopandas.org/]  library to read\nin the river network data from HydroSHEDS [http://www.hydrosheds.org/]. It is\nvery happy crunching the data for the whole African continent, but to make this\neasier, I've clipped out a small river called Dieprivier  just outside Cape Town\n(yes, they exist).\n\nIf we zoom into a small section, we see the the model-generated layer (purple)\nmatches pretty well with the painstakingly traced data (light blue) from\nOpenStreetMap.\n\nThe model then goes through a couple of steps to convert this GIS data into\nsomething we can use for modelling.\n\n 1. Go through every river segment in the input data, and create for it a\n    separate arc, which altogether form the network data structure.\n 2. As it does this, create another data structure called nodes that contains\n    all of these points where arcs meet or terminate.\n 3. Then tell every arc  which two nodes it is connected to, and tell each node \n    which arcs it is connected to. This means if we know a node location, we\n    know which arcs connect to it, and therefore which other nodes are\n    connected, and so on.\n\nA small section of the resulting layers is shown below, with the nodes at the\nintersections of river arcs. The large green node knows which arcs are connected\nto it (also in green) and they in turn know about it.\n\nGiving the network some order\nThis is all very well, but it's still just a bunch of lines and dots. To make\nthis network a lot easier to use, we must assign stream orders\n[https://en.wikipedia.org/wiki/Stream_order]  to the arcs – essentially\nindicating how many upstream branches they have. This is a useful proxy for how\n'big' any part of a river is relative to the network, but also allows the model\nto easily orientate itself to what is up- and down-stream of any node.\n\nThere are two main approaches to this, the Strahler number\n[https://en.wikipedia.org/wiki/Strahler_number]  and the Shreve number. For the\nStrahler number, the smallest tributaries are assigned an order of 1. These are\nthen followed down, and when two 1's join, they form a 2. If two streams with a\ndifferent number join, it gets the higher of the two, i.e. 1+2=2. The Shreve\nnumber is similar, except the numbers always add, so 1+2=3! For this model, I\nused the Shreve number, as it ensures that a downstream section always has a\nhigher number that the sections upstream of it.\n\nTo achieve this, I adapted the algorithm from this paper\n[https://doi.org/10.1111/j.1752-1688.2004.tb01057.x]  (Gleyzer, et al., 2007), a\nbeautiful but not very intuitive recursive function. Basically, it starts at the\nmouth of a given river (identified by a separate bit of code) and then follows\nrecursively up the network until it reaches the mountain-top tributaries. Then\nit trickles back down to the mouth, adding up the stream orders as it goes.\n\ndef shreve(arc_index, direction_node_id, network, nodes):\n    up_stream_orders = []\n    if len(nodes[direction_node_id]) == 5:\n        network[arc_index][7] = 1\n    else:\n        for index, arc in enumerate(nodes[direction_node_id]):\n            if index >= 4:\n                if network[arc][0] != arc_index:\n                    if network[arc][5] != direction_node_id:\n                        up_stream_orders.append(shreve(arc,\n                            network[arc][5], network, nodes))\n                    else:\n                        up_stream_orders.append(shreve(arc,\n                            network[arc][6], network, nodes))\n        max_orders = heapq.nlargest(2, up_stream_orders)\n        if len(max_orders) == 2:\n            order = 0 + max_orders[0] + max_orders[1]\n        else:\n            order = 0 + max(up_stream_orders)\n\n        network[arc_index][7] = order\n    return network[arc_index][7]\n\n\nApplied to the entire river network, it looks something like this.\n\nAdding data layers and doing things\nNow that we have the network set up and ordered, it's time to do something with\nit! In addition to the runoff data mentioned further up, there are a few other\nimportant layers:\n\n * Digital elevation model (DEM), normally from NASA's SRTM\n   [https://www2.jpl.nasa.gov/srtm/]\n * Flow accumulation, which is derived from the DEM and also available at \n   HydroSHEDS [http://www.hydrosheds.org/]\n * Land cover, used for modelling runoff and available from the FAO\n   [http://www.fao.org/land-water/land/land-governance/land-resources-planning-toolbox/category/details/en/c/1036355/]\n * ETo, the reference evapotranspiration for an area, also available from the\n   FAO\n * Precipitation, from many sources, hopefully monthly, never easy to use\n\nFor example, here's our same river overlaid with the DEM elevation data.\n\nPreviously I used the laborious and buggy ArcPy\n[http://pro.arcgis.com/en/pro-app/arcpy/get-started/what-is-arcpy-.htm]  to\nextract all of this information in the network and nodes data structures, but\nnow rasterio [https://github.com/mapbox/rasterio]  makes this a walk in the\npark. It's a straightforward library for reading raster GIS data and sampling\nand manipulating it, and takes only a few lines to load all of this new data.\n\nCalculating hydropower potential\nOne thing that we can do with all of this data is replicate the hydropower\nestimates, from the paper we wrote, except now just for Dieprivier in Cape Town.\nNote that this is exclusively for run-of-river\n[https://en.wikipedia.org/wiki/Run-of-the-river_hydroelectricity] \nmini-hydropower. To estimate power output, we use the hydropower formula as\nfollows:\n\n * P = ηρgQH\n\nwhere P  is the power output, η  is the efficiency, ρ  is the density of water,\nand g is acceleration due to gravity. Q is the flow-rate, and H is the head, or\nheight difference available. These last two must be calculated for each point\nusing the data described above.\n\nThe head is simple: we get the height for our chosen point, and then look a set\ndistance up-stream and get the height there – the difference between these is\nthe head. The flow-rate is more complicated. The global runoff data we have is\nprovided in m/s, where we need m3/s. So we do the following:\n\n * Q = runoff × catchment-area\n\nwhere catchment-area is the total area upstream of the selected point.\nMultiplying these together calculates the theoretical amount of water that\nshould flow past this point.\n\nApplying this to Dieprivier, the model creates a point every 500 metres and\ncalculates the head over the preceding 500 metres. By filtering to only include\nthose with at least 10 metres of head and more than 100 kW output, we get the\nfollowing suggested point of 162 kW, with 12 metres of head and flow rate of\n2.75 m3/s.\n\nNote that this is an unchecked, un-calibrated example result, I'm not at all\nsuggesting someone should build a mini-hydropower site there.\n\nGoing further with rainfall runoff and discharge\nThe result above was calculated using the GSCD, which provides only a single\nvalue, with no monthly or yearly variations. This doesn't provide much\ninformation about seasonal changes, nor allow for any calibrations with stream\ngauges, which will likely be on a daily or monthly basis.\n\nTo improve this, I extended the model to work with precipitation as an input\ninstead, which is often available as monthly (or even daily data). For each node\nthen, the model takes local precipitation, land cover and evapotranspiration\ndata and uses the Simplified Coefficeint Method\n[http://www.weap21.org/webhelp/hydrology.htm]  to calculate local rainfall\nrunoff. This is then carried downstream in the model, and when stream join,\ntheir flows are combined. At the same time, there are certain losses on each\nstream due to various causes.\n\nThen every river section has a (potentially) more accurate discharge associated\nwith it, which is now able to vary by month and day. So in the example above, we\ncould specify not only the mean power output, but also show which months we\nexpect to have lower and higher output.\n\nThe code for this is all with the model in the GitHub repo\n[https://github.com/carderne/hydro-networks], but be aware – it takes a lot of\nfiddling and calibration to get useful numbers out, and precipitation and stream\ngauge data often require a lot more data wrangling to make ready for the model.\nI was on the verge of setting up the model to calibrate against some\nmeasurements automatically, but that'll have to be a project for another day.\n\nTowards a generalised model\nFrom there, it's not a huge step to add other point withdrawals (such as city\nwater requirements or a farm) and use the model to make predictions about the\nsystem. For example, by including projected precipitation changes and increased\npopulation (and hence increased withdrawals) we could model whether there would\nbe a water shortfall, and in which months this would be most severe.\n\nAs I said, the model isn't quite there, but hopefully I'll come back to it at\nsome point.",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "Modelling hydrological networks at massive scale",
                        "meta_description": "A network-aware hydrological modelling tool using GeoPandas and rasterio, aimed at country-scale scriptable hydrological modelling.",
                        "author_id": "1",
                        "created_at": "2018-10-09 08:22:46",
                        "created_by": "1",
                        "updated_at": "2018-11-09 14:44:19",
                        "updated_by": "1",
                        "published_at": "2017-04-15 13:26:00",
                        "published_by": "1",
                        "custom_excerpt": "Ironically, a large part of my work at KTH's Division of Energy Systems Analysis was modelling complex hydrological systems. I set out to create a model that would conduct massive scale hydrological modelling.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbde820ec5d5922fde79bf1",
                        "uuid": "ec8c0920-dd3c-438b-bbb8-27e74a69ccfd",
                        "title": "A hackathon with iRise in Mogadishu",
                        "slug": "hackathon-irise-mogadishu",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"embed\",{\"url\":\"https://twitter.com/mpfsomalia/status/1009440875951394821\",\"html\":\"<blockquote class=\\\"twitter-tweet\\\"><p lang=\\\"en\\\" dir=\\\"ltr\\\">.<a href=\\\"https://twitter.com/iRiseHub?ref_src=twsrc%5Etfw\\\">@iRiseHub</a> just concluded Day 1 of the Bootcamp for the <a href=\\\"https://twitter.com/hashtag/MogadishuWatt?src=hash&amp;ref_src=twsrc%5Etfw\\\">#MogadishuWatt</a> open innovation challenge, supported by <a href=\\\"https://twitter.com/WorldBank?ref_src=twsrc%5Etfw\\\">@WorldBank</a>. Young Somalis are innovating to <a href=\\\"https://twitter.com/hashtag/EndEnergyPoverty?src=hash&amp;ref_src=twsrc%5Etfw\\\">#EndEnergyPoverty</a> <a href=\\\"https://twitter.com/hashtag/SDG7?src=hash&amp;ref_src=twsrc%5Etfw\\\">#SDG7</a> ☀️🌪🔭👩🏾‍🔧👨🏾‍🔬<br><br>More 👉🏿 <a href=\\\"https://t.co/F9IfudndLA\\\">https://t.co/F9IfudndLA</a> <a href=\\\"https://t.co/ci7qitOhVE\\\">pic.twitter.com/ci7qitOhVE</a></p>&mdash; Multi Partner Fund (@mpfsomalia) <a href=\\\"https://twitter.com/mpfsomalia/status/1009440875951394821?ref_src=twsrc%5Etfw\\\">June 20, 2018</a></blockquote>\\n<script async src=\\\"https://platform.twitter.com/widgets.js\\\" charset=\\\"utf-8\\\"></script>\\n\",\"type\":\"rich\"}],[\"embed\",{\"url\":\"https://twitter.com/iRiseHub/status/1012368927542927361\",\"html\":\"<blockquote class=\\\"twitter-tweet\\\"><p lang=\\\"en\\\" dir=\\\"ltr\\\">The winner of the <a href=\\\"https://twitter.com/hashtag/MogadishuWatt?src=hash&amp;ref_src=twsrc%5Etfw\\\">#MogadishuWatt</a> open innovation challenge is BulshoBille, a startup that provides access to solar equipment to IDPs &amp; poor families. The pay-as-you-go model provides a better &amp; affordable approach. <a href=\\\"https://twitter.com/hashtag/SDG7?src=hash&amp;ref_src=twsrc%5Etfw\\\">#SDG7</a> <a href=\\\"https://twitter.com/hashtag/EndEnergyPoverty?src=hash&amp;ref_src=twsrc%5Etfw\\\">#EndEnergyPoverty</a> <a href=\\\"https://twitter.com/hashtag/SomaliaRising?src=hash&amp;ref_src=twsrc%5Etfw\\\">#SomaliaRising</a> <a href=\\\"https://t.co/5eiecXncfr\\\">pic.twitter.com/5eiecXncfr</a></p>&mdash; iRise Hub (@iRiseHub) <a href=\\\"https://twitter.com/iRiseHub/status/1012368927542927361?ref_src=twsrc%5Etfw\\\">June 28, 2018</a></blockquote>\\n<script async src=\\\"https://platform.twitter.com/widgets.js\\\" charset=\\\"utf-8\\\"></script>\\n\",\"type\":\"rich\"}]],\"markups\":[[\"a\",[\"href\",\"http://irisehub.so/\"]],[\"a\",[\"href\",\"https://twitter.com/hashtag/MogadishuWatt\"]],[\"a\",[\"href\",\"http://blogs.worldbank.org/ic4d/node/762\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Together with a colleague at the World Bank, I ran a small project aimed at supporting the Mogadishu tech community. We proposed this project to the Youth Innovation Fund and were supported with a small grant to carry out the project. We worked with Awil Osman at \"],[0,[0],1,\"iRise Hub\"],[0,[],0,\" to put together \"],[0,[1],1,\"#MogadishuWatt\"],[0,[],0,\", focused on using technology to solve energy issues in Somalia.\"]]],[10,0],[10,1],[1,\"p\",[[0,[],0,\"We wrote another blog post with information on some of the interesting tech projects happening in Mogadishu: \"],[0,[2],1,\"blogs.worldbank.org/ic4d/node/762\"]]]]}",
                        "html": "<p>Together with a colleague at the World Bank, I ran a small project aimed at supporting the Mogadishu tech community. We proposed this project to the Youth Innovation Fund and were supported with a small grant to carry out the project. We worked with Awil Osman at <a href=\"http://irisehub.so/\">iRise Hub</a> to put together <a href=\"https://twitter.com/hashtag/MogadishuWatt\">#MogadishuWatt</a>, focused on using technology to solve energy issues in Somalia.</p><figure class=\"kg-card kg-embed-card\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">.<a href=\"https://twitter.com/iRiseHub?ref_src=twsrc%5Etfw\">@iRiseHub</a> just concluded Day 1 of the Bootcamp for the <a href=\"https://twitter.com/hashtag/MogadishuWatt?src=hash&amp;ref_src=twsrc%5Etfw\">#MogadishuWatt</a> open innovation challenge, supported by <a href=\"https://twitter.com/WorldBank?ref_src=twsrc%5Etfw\">@WorldBank</a>. Young Somalis are innovating to <a href=\"https://twitter.com/hashtag/EndEnergyPoverty?src=hash&amp;ref_src=twsrc%5Etfw\">#EndEnergyPoverty</a> <a href=\"https://twitter.com/hashtag/SDG7?src=hash&amp;ref_src=twsrc%5Etfw\">#SDG7</a> ☀️🌪🔭👩🏾‍🔧👨🏾‍🔬<br><br>More 👉🏿 <a href=\"https://t.co/F9IfudndLA\">https://t.co/F9IfudndLA</a> <a href=\"https://t.co/ci7qitOhVE\">pic.twitter.com/ci7qitOhVE</a></p>&mdash; Multi Partner Fund (@mpfsomalia) <a href=\"https://twitter.com/mpfsomalia/status/1009440875951394821?ref_src=twsrc%5Etfw\">June 20, 2018</a></blockquote>\n<script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</figure><figure class=\"kg-card kg-embed-card\"><blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">The winner of the <a href=\"https://twitter.com/hashtag/MogadishuWatt?src=hash&amp;ref_src=twsrc%5Etfw\">#MogadishuWatt</a> open innovation challenge is BulshoBille, a startup that provides access to solar equipment to IDPs &amp; poor families. The pay-as-you-go model provides a better &amp; affordable approach. <a href=\"https://twitter.com/hashtag/SDG7?src=hash&amp;ref_src=twsrc%5Etfw\">#SDG7</a> <a href=\"https://twitter.com/hashtag/EndEnergyPoverty?src=hash&amp;ref_src=twsrc%5Etfw\">#EndEnergyPoverty</a> <a href=\"https://twitter.com/hashtag/SomaliaRising?src=hash&amp;ref_src=twsrc%5Etfw\">#SomaliaRising</a> <a href=\"https://t.co/5eiecXncfr\">pic.twitter.com/5eiecXncfr</a></p>&mdash; iRise Hub (@iRiseHub) <a href=\"https://twitter.com/iRiseHub/status/1012368927542927361?ref_src=twsrc%5Etfw\">June 28, 2018</a></blockquote>\n<script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n</figure><p>We wrote another blog post with information on some of the interesting tech projects happening in Mogadishu: <a href=\"http://blogs.worldbank.org/ic4d/node/762\">blogs.worldbank.org/ic4d/node/762</a></p>",
                        "comment_id": "5bbde820ec5d5922fde79bf1",
                        "markdown": "Together with a colleague at the World Bank, I ran a small project aimed at\nsupporting the Mogadishu tech community. We proposed this project to the Youth\nInnovation Fund and were supported with a small grant to carry out the project.\nWe worked with Awil Osman at iRise Hub [http://irisehub.so/]  to put together \n#MogadishuWatt [https://twitter.com/hashtag/MogadishuWatt], focused on using\ntechnology to solve energy issues in Somalia.\n\n.@iRiseHub [https://twitter.com/iRiseHub?ref_src=twsrc%5Etfw]  just concluded\nDay 1 of the Bootcamp for the #MogadishuWatt\n[https://twitter.com/hashtag/MogadishuWatt?src=hash&ref_src=twsrc%5Etfw]  open\ninnovation challenge, supported by @WorldBank\n[https://twitter.com/WorldBank?ref_src=twsrc%5Etfw]. Young Somalis are\ninnovating to #EndEnergyPoverty\n[https://twitter.com/hashtag/EndEnergyPoverty?src=hash&ref_src=twsrc%5Etfw]  \n#SDG7 [https://twitter.com/hashtag/SDG7?src=hash&ref_src=twsrc%5Etfw] \n☀️🌪🔭👩🏾‍🔧👨🏾‍🔬\n\nMore 👉🏿 https://t.co/F9IfudndLA  pic.twitter.com/ci7qitOhVE\n[https://t.co/ci7qitOhVE]\n\n— Multi Partner Fund (@mpfsomalia) June 20, 2018\n[https://twitter.com/mpfsomalia/status/1009440875951394821?ref_src=twsrc%5Etfw]\nThe winner of the #MogadishuWatt\n[https://twitter.com/hashtag/MogadishuWatt?src=hash&ref_src=twsrc%5Etfw]  open\ninnovation challenge is BulshoBille, a startup that provides access to solar\nequipment to IDPs & poor families. The pay-as-you-go model provides a better &\naffordable approach. #SDG7\n[https://twitter.com/hashtag/SDG7?src=hash&ref_src=twsrc%5Etfw]  \n#EndEnergyPoverty\n[https://twitter.com/hashtag/EndEnergyPoverty?src=hash&ref_src=twsrc%5Etfw]  \n#SomaliaRising\n[https://twitter.com/hashtag/SomaliaRising?src=hash&ref_src=twsrc%5Etfw]  \npic.twitter.com/5eiecXncfr [https://t.co/5eiecXncfr]\n\n— iRise Hub (@iRiseHub) June 28, 2018\n[https://twitter.com/iRiseHub/status/1012368927542927361?ref_src=twsrc%5Etfw]We\nwrote another blog post with information on some of the interesting tech\nprojects happening in Mogadishu: blogs.worldbank.org/ic4d/node/762\n[http://blogs.worldbank.org/ic4d/node/762]",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "A hackathon with iRise in Mogadishu",
                        "meta_description": "Together with a colleague at the World Bank, I ran a small project aimed at supporting the Mogadishu tech community.",
                        "author_id": "1",
                        "created_at": "2018-10-10 11:53:04",
                        "created_by": "1",
                        "updated_at": "2018-10-17 10:11:08",
                        "updated_by": "1",
                        "published_at": "2018-07-09 08:54:00",
                        "published_by": "1",
                        "custom_excerpt": "Together with a colleague at the World Bank, I ran a small project aimed at supporting the Mogadishu tech community. We worked with Awil Osman at iRise Hub to put together #MogadishuWatt, focused on using technology to solve energy issues in Somalia.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bbf7fac51a3090cf9b3242a",
                        "uuid": "e2da537e-8982-4c04-b314-6499f1cba8f8",
                        "title": "Rudderless in the Richtersveld",
                        "slug": "rudderless-richtersveld",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"caption\":\"Golden quiver trees punctuate the sparse brush.\",\"src\":\"/content/images/2018/10/1.jpg\"}],[\"image\",{\"caption\":\"Matt and Zoom investigate the bone-dry Zebrawater, with the majestic <a href=\\\"https://en.wikipedia.org/wiki/Dernberg\\\">Dernberg</a> in the background.\",\"src\":\"/content/images/2018/10/2.jpg\"}],[\"image\",{\"caption\":\"Inside the stunning Amphitheare\",\"src\":\"/content/images/2018/10/3.jpg\"}],[\"image\",{\"caption\":\"Zoom and I doing some scrambling\",\"src\":\"/content/images/2018/10/4.jpg\"}],[\"image\",{\"caption\":\"When in doubt, heel hook.\",\"src\":\"/content/images/2018/10/5.jpg\"}],[\"image\",{\"src\":\"/content/images/2018/10/6.jpg\"}],[\"image\",{\"caption\":\"The Venstervalle, with Zoom in the bottom left and me on the right lying down\",\"src\":\"/content/images/2018/10/7.jpg\"}],[\"image\",{\"caption\":\"The view from the top of <a href=\\\"https://en.wikipedia.org/wiki/Dernberg\\\">Dernberg</a>!\",\"src\":\"/content/images/2018/10/8.jpg\"}]],\"markups\":[[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Dernberg\"]],[\"a\",[\"href\",\"https://lossupertramps.wordpress.com/2016/07/20/rudderless-in-the-richtersveld/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"At the end of June I joined my brothers in South Africa for a jaunt  to the border of Namibia and the |Ai-|Ais/Richtersveld Transfrontier  Park. It’s a harsh and barren landscape, with the tail end of the Orange  River providing the only evidence that water ever reaches the area. The  80 km of super-corrugated mining roads at the end of our drive reminded  us repeatedly and shakily that we’d left the city.\"]]],[1,\"p\",[[0,[],0,\"When we arrived, the very frantic park ranger told us that he didn’t  think there’d be any water in the entire area, so it might not be  possible to complete the hike. We decided to shorten our target to three  days, ditched any non-essentials, and loaded about twelve litres of  water into our bags.\"]]],[1,\"p\",[[0,[],0,\"It’s a two hour land cruiser drive to the trail-head, along some  pretty serious 4×4 roads. Most of the way is completely barren, but as  we neared our destination a few grand quiver trees and low bushes  started to appear.\"]]],[10,0],[1,\"p\",[[0,[],0,\"We investigated the Zebrawater river(bed) on the first day, and  unsurprisingly, there was no water to be found. We were still treated to  a stunning view of \"],[0,[0],1,\"Dernberg\"],[0,[],0,\", one of the most attractive peaks in the  park.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Our first short day of hiking ended in the Amphitheatre, and my  iPhone camera and mediocre photography skills fail to do justice to the  place. It’s the end point of the valley we hiked up, terminating on all  sides  (except the one we came in on) with sheer 100 metre high cliffs.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Zoom and I went for some scrambling up the least steep section, and  the perfect acoustics meant we could talk to Matt back at the bottom  without raising our voices, even from around 100 metres away. It got  dark pretty quickly inside there, so we got a fire going and enjoyed our  sparse few rusks and sips of whiskey. The complaints about discomfort  and cold from my less camping-n-hiking-smitten brothers were kept to an  impressive minimum.\"]]],[10,3],[1,\"p\",[[0,[],0,\"We started off bright and early the next morning, after I’d had a  bowl of oats, and Matt and Zoom had their Futurelife and Aeropress  coffee. Constantly counting the droplets of water we used, to make sure  our twelve litres would last (no spitting after you brush your teeth).\"]]],[10,4],[1,\"p\",[[0,[],0,\"But then we found water! A murky little spring, too small and still  to be very inviting, but definite potential if we ran out of other  options. We dumped our bags there and set off for the Venstervalle (the  namesake of the hike), stopping for a group self timer on the way.\"]]],[10,5],[1,\"p\",[[0,[],0,\"The Venstervalle is a beautiful arch, with a waterfall (dry now,  obviously) flowing out underneath it with about a 50 metre drop.\"]]],[10,6],[1,\"p\",[[0,[],0,\"We pushed on to God’s Window, but it wasn’t very impressive and it’s  an overused name anyway, so we returned to camp to enjoy the most  peaceful sunset possible. No people or running water for at least 50 km  in any direction, and barely an animal either. Really intense silence,  followed after by sunset by the starry Northern Cape heavens opening  above us. The night was colder than the one before, so some time after  midnight Matt knocked on the tent door and came to join Zoom and me on  the (not actually so) cosy inside.\"]]],[1,\"p\",[[0,[],0,\"The next day we’d set a rendezvous time with the park rangers (back  at our original starting point, so we set of early to wind our way back  out of the valley. Stopping only to summit \"],[0,[0],1,\"Dernberg\"],[0,[],0,\"! Matt opted out of  the slightly hairy scramble to the top, so Zoom and I enjoyed our  panoramic view before rushing down to make the rendezvous on time.\"]]],[10,7],[1,\"p\",[[0,[],0,\"It was a really fun brotherly trip, made more awesome by the sheer  remoteness and aloneness it offered. ‘n Veldie was nooit beter gewes  nie. By the time the land cruiser picked us up again, we were completely  out of food, water, rusks and whiskey, and very much looking forward to  the relative civilisation offered by Sendelingsdrif border post.\"]]],[1,\"p\",[[0,[],0,\"Originally published here: \"],[0,[1],1,\"https://lossupertramps.wordpress.com/2016/07/20/rudderless-in-the-richtersveld/\"]]]]}",
                        "html": "<p>At the end of June I joined my brothers in South Africa for a jaunt  to the border of Namibia and the |Ai-|Ais/Richtersveld Transfrontier  Park. It’s a harsh and barren landscape, with the tail end of the Orange  River providing the only evidence that water ever reaches the area. The  80 km of super-corrugated mining roads at the end of our drive reminded  us repeatedly and shakily that we’d left the city.</p><p>When we arrived, the very frantic park ranger told us that he didn’t  think there’d be any water in the entire area, so it might not be  possible to complete the hike. We decided to shorten our target to three  days, ditched any non-essentials, and loaded about twelve litres of  water into our bags.</p><p>It’s a two hour land cruiser drive to the trail-head, along some  pretty serious 4×4 roads. Most of the way is completely barren, but as  we neared our destination a few grand quiver trees and low bushes  started to appear.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/1.jpg\" class=\"kg-image\"><figcaption>Golden quiver trees punctuate the sparse brush.</figcaption></figure><p>We investigated the Zebrawater river(bed) on the first day, and  unsurprisingly, there was no water to be found. We were still treated to  a stunning view of <a href=\"https://en.wikipedia.org/wiki/Dernberg\">Dernberg</a>, one of the most attractive peaks in the  park.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/2.jpg\" class=\"kg-image\"><figcaption>Matt and Zoom investigate the bone-dry Zebrawater, with the majestic <a href=\"https://en.wikipedia.org/wiki/Dernberg\">Dernberg</a> in the background.</figcaption></figure><p>Our first short day of hiking ended in the Amphitheatre, and my  iPhone camera and mediocre photography skills fail to do justice to the  place. It’s the end point of the valley we hiked up, terminating on all  sides  (except the one we came in on) with sheer 100 metre high cliffs.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/3.jpg\" class=\"kg-image\"><figcaption>Inside the stunning Amphitheare</figcaption></figure><p>Zoom and I went for some scrambling up the least steep section, and  the perfect acoustics meant we could talk to Matt back at the bottom  without raising our voices, even from around 100 metres away. It got  dark pretty quickly inside there, so we got a fire going and enjoyed our  sparse few rusks and sips of whiskey. The complaints about discomfort  and cold from my less camping-n-hiking-smitten brothers were kept to an  impressive minimum.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/4.jpg\" class=\"kg-image\"><figcaption>Zoom and I doing some scrambling</figcaption></figure><p>We started off bright and early the next morning, after I’d had a  bowl of oats, and Matt and Zoom had their Futurelife and Aeropress  coffee. Constantly counting the droplets of water we used, to make sure  our twelve litres would last (no spitting after you brush your teeth).</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/5.jpg\" class=\"kg-image\"><figcaption>When in doubt, heel hook.</figcaption></figure><p>But then we found water! A murky little spring, too small and still  to be very inviting, but definite potential if we ran out of other  options. We dumped our bags there and set off for the Venstervalle (the  namesake of the hike), stopping for a group self timer on the way.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/6.jpg\" class=\"kg-image\"></figure><p>The Venstervalle is a beautiful arch, with a waterfall (dry now,  obviously) flowing out underneath it with about a 50 metre drop.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/7.jpg\" class=\"kg-image\"><figcaption>The Venstervalle, with Zoom in the bottom left and me on the right lying down</figcaption></figure><p>We pushed on to God’s Window, but it wasn’t very impressive and it’s  an overused name anyway, so we returned to camp to enjoy the most  peaceful sunset possible. No people or running water for at least 50 km  in any direction, and barely an animal either. Really intense silence,  followed after by sunset by the starry Northern Cape heavens opening  above us. The night was colder than the one before, so some time after  midnight Matt knocked on the tent door and came to join Zoom and me on  the (not actually so) cosy inside.</p><p>The next day we’d set a rendezvous time with the park rangers (back  at our original starting point, so we set of early to wind our way back  out of the valley. Stopping only to summit <a href=\"https://en.wikipedia.org/wiki/Dernberg\">Dernberg</a>! Matt opted out of  the slightly hairy scramble to the top, so Zoom and I enjoyed our  panoramic view before rushing down to make the rendezvous on time.</p><figure class=\"kg-card kg-image-card\"><img src=\"/content/images/2018/10/8.jpg\" class=\"kg-image\"><figcaption>The view from the top of <a href=\"https://en.wikipedia.org/wiki/Dernberg\">Dernberg</a>!</figcaption></figure><p>It was a really fun brotherly trip, made more awesome by the sheer  remoteness and aloneness it offered. ‘n Veldie was nooit beter gewes  nie. By the time the land cruiser picked us up again, we were completely  out of food, water, rusks and whiskey, and very much looking forward to  the relative civilisation offered by Sendelingsdrif border post.</p><p>Originally published here: <a href=\"https://lossupertramps.wordpress.com/2016/07/20/rudderless-in-the-richtersveld/\">https://lossupertramps.wordpress.com/2016/07/20/rudderless-in-the-richtersveld/</a></p>",
                        "comment_id": "5bbf7fac51a3090cf9b3242a",
                        "markdown": "At the end of June I joined my brothers in South Africa for a jaunt  to the\nborder of Namibia and the |Ai-|Ais/Richtersveld Transfrontier  Park. It’s a\nharsh and barren landscape, with the tail end of the Orange  River providing the\nonly evidence that water ever reaches the area. The  80 km of super-corrugated\nmining roads at the end of our drive reminded  us repeatedly and shakily that\nwe’d left the city.\n\nWhen we arrived, the very frantic park ranger told us that he didn’t  think\nthere’d be any water in the entire area, so it might not be  possible to\ncomplete the hike. We decided to shorten our target to three  days, ditched any\nnon-essentials, and loaded about twelve litres of  water into our bags.\n\nIt’s a two hour land cruiser drive to the trail-head, along some  pretty serious\n4×4 roads. Most of the way is completely barren, but as  we neared our\ndestination a few grand quiver trees and low bushes  started to appear.\n\nGolden quiver trees punctuate the sparse brush.We investigated the Zebrawater\nriver(bed) on the first day, and  unsurprisingly, there was no water to be\nfound. We were still treated to  a stunning view of Dernberg\n[https://en.wikipedia.org/wiki/Dernberg], one of the most attractive peaks in\nthe  park.\n\nMatt and Zoom investigate the bone-dry Zebrawater, with the majestic Dernberg\n[https://en.wikipedia.org/wiki/Dernberg]  in the background.Our first short day\nof hiking ended in the Amphitheatre, and my  iPhone camera and mediocre\nphotography skills fail to do justice to the  place. It’s the end point of the\nvalley we hiked up, terminating on all  sides  (except the one we came in on)\nwith sheer 100 metre high cliffs.\n\nInside the stunning AmphitheareZoom and I went for some scrambling up the least\nsteep section, and  the perfect acoustics meant we could talk to Matt back at\nthe bottom  without raising our voices, even from around 100 metres away. It got\n dark pretty quickly inside there, so we got a fire going and enjoyed our\n sparse few rusks and sips of whiskey. The complaints about discomfort  and cold\nfrom my less camping-n-hiking-smitten brothers were kept to an  impressive\nminimum.\n\nZoom and I doing some scramblingWe started off bright and early the next\nmorning, after I’d had a  bowl of oats, and Matt and Zoom had their Futurelife\nand Aeropress  coffee. Constantly counting the droplets of water we used, to\nmake sure  our twelve litres would last (no spitting after you brush your\nteeth).\n\nWhen in doubt, heel hook.But then we found water! A murky little spring, too\nsmall and still  to be very inviting, but definite potential if we ran out of\nother  options. We dumped our bags there and set off for the Venstervalle (the\n namesake of the hike), stopping for a group self timer on the way.\n\nThe Venstervalle is a beautiful arch, with a waterfall (dry now,  obviously)\nflowing out underneath it with about a 50 metre drop.\n\nThe Venstervalle, with Zoom in the bottom left and me on the right lying downWe\npushed on to God’s Window, but it wasn’t very impressive and it’s  an overused\nname anyway, so we returned to camp to enjoy the most  peaceful sunset possible.\nNo people or running water for at least 50 km  in any direction, and barely an\nanimal either. Really intense silence,  followed after by sunset by the starry\nNorthern Cape heavens opening  above us. The night was colder than the one\nbefore, so some time after  midnight Matt knocked on the tent door and came to\njoin Zoom and me on  the (not actually so) cosy inside.\n\nThe next day we’d set a rendezvous time with the park rangers (back  at our\noriginal starting point, so we set of early to wind our way back  out of the\nvalley. Stopping only to summit Dernberg\n[https://en.wikipedia.org/wiki/Dernberg]! Matt opted out of  the slightly hairy\nscramble to the top, so Zoom and I enjoyed our  panoramic view before rushing\ndown to make the rendezvous on time.\n\nThe view from the top of Dernberg [https://en.wikipedia.org/wiki/Dernberg]!It\nwas a really fun brotherly trip, made more awesome by the sheer  remoteness and\naloneness it offered. ‘n Veldie was nooit beter gewes  nie. By the time the land\ncruiser picked us up again, we were completely  out of food, water, rusks and\nwhiskey, and very much looking forward to  the relative civilisation offered by\nSendelingsdrif border post.\n\nOriginally published here: \nhttps://lossupertramps.wordpress.com/2016/07/20/rudderless-in-the-richtersveld/",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "Rudderless in the Richtersveld",
                        "meta_description": "At the end of June I joined my brothers in South Africa for a jaunt  to the border of Namibia and the |Ai-|Ais/Richtersveld Transfrontier  Park.",
                        "author_id": "1",
                        "created_at": "2018-10-11 16:51:56",
                        "created_by": "1",
                        "updated_at": "2018-10-17 10:09:22",
                        "updated_by": "1",
                        "published_at": "2016-07-20 19:17:00",
                        "published_by": "1",
                        "custom_excerpt": "At the end of June I joined my brothers in South Africa for a jaunt  to the border of Namibia and the |Ai-|Ais/Richtersveld Transfrontier  Park. It’s a harsh and barren landscape, with the tail end of the Orange  River providing the only evidence that water ever reaches the area.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bc07fdaf6b2f324744f5437",
                        "uuid": "63cc92db-0fcb-4da8-99a3-5d1ea244f569",
                        "title": "A music app in Java, that still works eight years later!",
                        "slug": "music-app-for-me",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"html\",{\"html\":\" <video width=\\\"100%\\\" height=\\\"500\\\" controls>\\n  <source src=\\\"https://rdrn.me/music-app-for-me/camo.mp4\\\" type=\\\"video/mp4\\\">\\nYour browser does not support the video tag.\\n</video> \"}]],\"markups\":[[\"a\",[\"href\",\"http://www.javazoom.net/jlgui/api.html\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Swing_(Java)\"]],[\"a\",[\"href\",\"https://github.com/carderne/CAMO\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"My high school IT class (so, 2010) culminated in a programming project – we were free to create whatever we wanted (in Java), so long as we demonstrated what we'd learned in the class. I'd started teaching myself Java two years earlier, with a very simple command-line based music organizer: you typed in metadata, had it displayed back to you in a simple table, and probably didn't expect it to still be there next time you ran the program.\"]]],[1,\"p\",[[0,[],0,\"In the intervening year, a friend and I had spent many late dorm-room nights fiddling with the program. Coding without internet (no StackOverflow, no new packages) seems unimaginable looking back.\"]]],[1,\"p\",[[0,[],0,\"So it seemed like the obvious choice to pick this up again for my high school project, but with a GUI (all the rage) and actual music-playing abilities. I hijacked an mp3 reading library (\"],[0,[0],1,\"JavaZOOM\"],[0,[],0,\"), (mis-)used a lot of \"],[0,[1],1,\"javax.swing\"],[0,[],0,\" and created an assortment of lovely Objects, and ended up with something almost as useful as iTunes v1.0. Thus was born the \"],[0,[2],1,\"Chris Arderne Music O\"],[0,[],0,\"rganiser!\"]]],[1,\"p\",[[0,[],0,\"Miraculously – writing this in late 2018 – the program still (mostly) works!\"]]],[10,0],[1,\"p\",[]]]}",
                        "html": "<p>My high school IT class (so, 2010) culminated in a programming project – we were free to create whatever we wanted (in Java), so long as we demonstrated what we'd learned in the class. I'd started teaching myself Java two years earlier, with a very simple command-line based music organizer: you typed in metadata, had it displayed back to you in a simple table, and probably didn't expect it to still be there next time you ran the program.</p><p>In the intervening year, a friend and I had spent many late dorm-room nights fiddling with the program. Coding without internet (no StackOverflow, no new packages) seems unimaginable looking back.</p><p>So it seemed like the obvious choice to pick this up again for my high school project, but with a GUI (all the rage) and actual music-playing abilities. I hijacked an mp3 reading library (<a href=\"http://www.javazoom.net/jlgui/api.html\">JavaZOOM</a>), (mis-)used a lot of <a href=\"https://en.wikipedia.org/wiki/Swing_(Java)\">javax.swing</a> and created an assortment of lovely Objects, and ended up with something almost as useful as iTunes v1.0. Thus was born the <a href=\"https://github.com/carderne/CAMO\">Chris Arderne Music O</a>rganiser!</p><p>Miraculously – writing this in late 2018 – the program still (mostly) works!</p> <video width=\"100%\" height=\"500\" controls>\n  <source src=\"https://rdrn.me/music-app-for-me/camo.mp4\" type=\"video/mp4\">\nYour browser does not support the video tag.\n</video> ",
                        "comment_id": "5bc07fdaf6b2f324744f5437",
                        "markdown": "My high school IT class (so, 2010) culminated in a programming project – we were\nfree to create whatever we wanted (in Java), so long as we demonstrated what\nwe'd learned in the class. I'd started teaching myself Java two years earlier,\nwith a very simple command-line based music organizer: you typed in metadata,\nhad it displayed back to you in a simple table, and probably didn't expect it to\nstill be there next time you ran the program.\n\nIn the intervening year, a friend and I had spent many late dorm-room nights\nfiddling with the program. Coding without internet (no StackOverflow, no new\npackages) seems unimaginable looking back.\n\nSo it seemed like the obvious choice to pick this up again for my high school\nproject, but with a GUI (all the rage) and actual music-playing abilities. I\nhijacked an mp3 reading library (JavaZOOM\n[http://www.javazoom.net/jlgui/api.html]), (mis-)used a lot of javax.swing\n[https://en.wikipedia.org/wiki/Swing_(Java)]  and created an assortment of\nlovely Objects, and ended up with something almost as useful as iTunes v1.0.\nThus was born the Chris Arderne Music O [https://github.com/carderne/CAMO]\nrganiser!\n\nMiraculously – writing this in late 2018 – the program still (mostly) works!\n\nYour browser does not support the video tag.",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "A music app in Java, that still works eight years later!",
                        "meta_description": "My high school IT class (so, 2010) culminated in a programming project – we were free to create whatever we wanted (in Java).",
                        "author_id": "1",
                        "created_at": "2018-10-12 11:04:58",
                        "created_by": "1",
                        "updated_at": "2018-10-17 10:50:00",
                        "updated_by": "1",
                        "published_at": "2014-01-29 12:25:00",
                        "published_by": "1",
                        "custom_excerpt": "My high school IT class (so, 2010) culminated in a programming project – we were free to create whatever we wanted (in Java), so long as we demonstrated what we'd learned in the class. ",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bc07fe4f6b2f324744f5439",
                        "uuid": "256e17a1-9920-437d-b2b4-c4d8448ae2e8",
                        "title": "Fun with population dynamics",
                        "slug": "population-dynamics",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"html\",{\"html\":\"<div style=\\\"width:100%;height:0;padding-bottom:79%;position:relative;\\\"><iframe src=\\\"https://giphy.com/embed/t6leavMMQwBQIrYiTo\\\" width=\\\"100%\\\" height=\\\"100%\\\" style=\\\"position:absolute\\\" frameBorder=\\\"0\\\" class=\\\"giphy-embed\\\" allowFullScreen></iframe></div><p><a href=\\\"https://giphy.com/gifs/t6leavMMQwBQIrYiTo\\\">via GIPHY</a></p>\"}]],\"markups\":[[\"a\",[\"href\",\"https://github.com/carderne/Altruism\"]],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Ultimatum_game\"]],[\"em\"]],\"sections\":[[1,\"p\",[[0,[],0,\"Several years ago, when I was still very excited about Java, and read a lot of books on evolution, I had the fun idea to combine the two. I created a simple Java program (\"],[0,[0],1,\"here on GitHub\"],[0,[],0,\") to model one of the more interesting examples of game theory used to explain the origins of altruism (and its evolutionary benefits): \"],[0,[1],1,\"The Ultimatum Game\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"I'll let Wikipedia explain:\"]]],[1,\"blockquote\",[[0,[],0,\"One player, the proposer, is endowed with a sum of money. They are  tasked with splitting it with another player, the responder. Once the  proposer communicates their decision, the responder may accept it or  reject it. If the responder accepts, the money is split per the  proposal; if the responder rejects, both players receive nothing.\"]]],[1,\"p\",[[0,[],0,\" So I created a simple algorithm, and since I was neck-deep in the Object-Oriented Programming way of thinking, the players in the game were naturally represented with Classes and Objects! I set up the model to accept an arbitrary number of players (in the obnoxious GIF below it was 4000) and assign each player with a 'strategy': what kind of offers they make and what kind they accept. These are represented by numbers in the model:\"]]],[3,\"ol\",[[[0,[],0,\"Very generous: offers large amounts, but accepts any amount offered\"]],[[0,[],0,\"...\"]],[[0,[],0,\"...\"]],[[0,[],0,\"...\"]],[[0,[],0,\"The middling player: offers half, but only accepts if half or more is offered\"]],[[0,[],0,\"...\"]],[[0,[],0,\"...\"]],[[0,[],0,\"...\"]],[[0,[],0,\"Stingy: offers small amounts, and only accepts large offers\"]]]],[1,\"p\",[[0,[],0,\"The players then randomly play against each other, and keep track of how much money they've won. After each round, the player with least in their coffers is... killed. Then they play again and again until there are only a few players left.\"]]],[1,\"p\",[[0,[],0,\"As you can see in the video below, the 5's last the longest, with their in-between strategy! Note that I didn't allow players to combine strategies, as this would have complicated it a bit, and (if I remember) there is a suggestion that the \"],[0,[2],1,\"offer \"],[0,[],0,\"and \"],[0,[2],1,\"accept \"],[0,[],0,\"parameters are somehow linked evolutionarily.\"]]],[10,0],[1,\"p\",[]]]}",
                        "html": "<p>Several years ago, when I was still very excited about Java, and read a lot of books on evolution, I had the fun idea to combine the two. I created a simple Java program (<a href=\"https://github.com/carderne/Altruism\">here on GitHub</a>) to model one of the more interesting examples of game theory used to explain the origins of altruism (and its evolutionary benefits): <a href=\"https://en.wikipedia.org/wiki/Ultimatum_game\">The Ultimatum Game</a>.</p><p>I'll let Wikipedia explain:</p><blockquote>One player, the proposer, is endowed with a sum of money. They are  tasked with splitting it with another player, the responder. Once the  proposer communicates their decision, the responder may accept it or  reject it. If the responder accepts, the money is split per the  proposal; if the responder rejects, both players receive nothing.</blockquote><p> So I created a simple algorithm, and since I was neck-deep in the Object-Oriented Programming way of thinking, the players in the game were naturally represented with Classes and Objects! I set up the model to accept an arbitrary number of players (in the obnoxious GIF below it was 4000) and assign each player with a 'strategy': what kind of offers they make and what kind they accept. These are represented by numbers in the model:</p><ol><li>Very generous: offers large amounts, but accepts any amount offered</li><li>...</li><li>...</li><li>...</li><li>The middling player: offers half, but only accepts if half or more is offered</li><li>...</li><li>...</li><li>...</li><li>Stingy: offers small amounts, and only accepts large offers</li></ol><p>The players then randomly play against each other, and keep track of how much money they've won. After each round, the player with least in their coffers is... killed. Then they play again and again until there are only a few players left.</p><p>As you can see in the video below, the 5's last the longest, with their in-between strategy! Note that I didn't allow players to combine strategies, as this would have complicated it a bit, and (if I remember) there is a suggestion that the <em>offer </em>and <em>accept </em>parameters are somehow linked evolutionarily.</p><div style=\"width:100%;height:0;padding-bottom:79%;position:relative;\"><iframe src=\"https://giphy.com/embed/t6leavMMQwBQIrYiTo\" width=\"100%\" height=\"100%\" style=\"position:absolute\" frameBorder=\"0\" class=\"giphy-embed\" allowFullScreen></iframe></div><p><a href=\"https://giphy.com/gifs/t6leavMMQwBQIrYiTo\">via GIPHY</a></p>",
                        "comment_id": "5bc07fe4f6b2f324744f5439",
                        "markdown": "Several years ago, when I was still very excited about Java, and read a lot of\nbooks on evolution, I had the fun idea to combine the two. I created a simple\nJava program (here on GitHub [https://github.com/carderne/Altruism]) to model\none of the more interesting examples of game theory used to explain the origins\nof altruism (and its evolutionary benefits): The Ultimatum Game\n[https://en.wikipedia.org/wiki/Ultimatum_game].\n\nI'll let Wikipedia explain:\n\nOne player, the proposer, is endowed with a sum of money. They are  tasked with\nsplitting it with another player, the responder. Once the  proposer communicates\ntheir decision, the responder may accept it or  reject it. If the responder\naccepts, the money is split per the  proposal; if the responder rejects, both\nplayers receive nothing.  So I created a simple algorithm, and since I was\nneck-deep in the Object-Oriented Programming way of thinking, the players in the\ngame were naturally represented with Classes and Objects! I set up the model to\naccept an arbitrary number of players (in the obnoxious GIF below it was 4000)\nand assign each player with a 'strategy': what kind of offers they make and what\nkind they accept. These are represented by numbers in the model:\n\n 1. Very generous: offers large amounts, but accepts any amount offered\n 2. ...\n 3. ...\n 4. ...\n 5. The middling player: offers half, but only accepts if half or more is\n    offered\n 6. ...\n 7. ...\n 8. ...\n 9. Stingy: offers small amounts, and only accepts large offers\n\nThe players then randomly play against each other, and keep track of how much\nmoney they've won. After each round, the player with least in their coffers\nis... killed. Then they play again and again until there are only a few players\nleft.\n\nAs you can see in the video below, the 5's last the longest, with their\nin-between strategy! Note that I didn't allow players to combine strategies, as\nthis would have complicated it a bit, and (if I remember) there is a suggestion\nthat the offer and accept parameters are somehow linked evolutionarily.\n\nvia GIPHY [https://giphy.com/gifs/t6leavMMQwBQIrYiTo]",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "Fun with population dynamics",
                        "meta_description": "Some time, several years ago when I still very excited about Java, and read a lot of books on evolution, I had the fun idea to combine the two.",
                        "author_id": "1",
                        "created_at": "2018-10-12 11:05:08",
                        "created_by": "1",
                        "updated_at": "2018-10-18 09:37:19",
                        "updated_by": "1",
                        "published_at": "2014-10-23 11:41:00",
                        "published_by": "1",
                        "custom_excerpt": "Some time, several years ago when I still very excited about Java, and read a lot of books on evolution, I had the fun idea to combine the two. I created a simple program to model one of the more interesting examples of game theory used to explain the origins of altruism: The Ultimatum Game.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bc1a905b95e280b5623ca74",
                        "uuid": "0afdf2b6-3a0a-4de4-9d1c-5b211a08f9a0",
                        "title": "About",
                        "slug": "about",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[],\"markups\":[[\"strong\"],[\"a\",[\"href\",\"http://www.worldbank.org/\"]],[\"a\",[\"href\",\"https://africagrid.energydata.info/\"]],[\"a\",[\"href\",\"https://www.hotosm.org/\"]],[\"a\",[\"href\",\"https://www.hotosm.org/projects/mini-grids/\"]],[\"a\",[\"href\",\"http://irisehub.so/\"]],[\"a\",[\"href\",\"https://rdrn.me/about/cv.pdf\"]],[\"a\",[\"href\",\"https://www.ifc.org/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"My name is \"],[0,[0],1,\"Chris\"],[0,[],0,\" and I'm an engineer (because that's what I studied) from South Africa, working on global development issues (energy and finance). This involves exploring cool techniques in data analysis and modelling, but also working with stakeholders at all levels of various systems.\"]]],[1,\"p\",[[0,[],0,\"Since January 2017, I've been working at the \"],[0,[1],1,\"World Bank\"],[0,[],0,\"*, mostly on off-grid energy solutions in Africa. I've been pushing the use of data in energy planning (e.g. the most complete \"],[0,[2],1,\"electrical grid map\"],[0,[],0,\" of Africa) and supporting the private sector ecosystem with open data. I've also worked extensively with \"],[0,[3],1,\"HOT\"],[0,[],0,\" on very exciting OpenStreetMap work, including a project to map several million buildings in \"],[0,[4],1,\"Tanzania\"],[0,[],0,\". In the last year I've worked on broader topics related to finance and technology, and have been lucky enough to work with \"],[0,[5],1,\"iRise Hub\"],[0,[],0,\" in Mogadishu, and currently have a project on tech-enabled credit scoring in the pipeline.\"]]],[1,\"p\",[[0,[],0,\"Apart from this, I spend time exploring data and the geospatial world in Python (and JavaScript when called for) and thinking of interesting ways to present whatever I find.\"]]],[1,\"p\",[[0,[],0,\"Mostly, I like to be outside, either in the mountains or in the sea. I've documented some of my larger trips on the blog, and currently have a Pacific crossing (by sail) in the mid-term pipeline.\"]]],[1,\"p\",[[0,[6],1,\"Click here for my CV\"]]],[1,\"p\",[[0,[],0,\"*Also the \"],[0,[7],1,\"IFC\"],[0,[],0,\", which is part of the World Bank Group, but not part of the World Bank...\"]]]]}",
                        "html": "<p>My name is <strong>Chris</strong> and I'm an engineer (because that's what I studied) from South Africa, working on global development issues (energy and finance). This involves exploring cool techniques in data analysis and modelling, but also working with stakeholders at all levels of various systems.</p><p>Since January 2017, I've been working at the <a href=\"http://www.worldbank.org/\">World Bank</a>*, mostly on off-grid energy solutions in Africa. I've been pushing the use of data in energy planning (e.g. the most complete <a href=\"https://africagrid.energydata.info/\">electrical grid map</a> of Africa) and supporting the private sector ecosystem with open data. I've also worked extensively with <a href=\"https://www.hotosm.org/\">HOT</a> on very exciting OpenStreetMap work, including a project to map several million buildings in <a href=\"https://www.hotosm.org/projects/mini-grids/\">Tanzania</a>. In the last year I've worked on broader topics related to finance and technology, and have been lucky enough to work with <a href=\"http://irisehub.so/\">iRise Hub</a> in Mogadishu, and currently have a project on tech-enabled credit scoring in the pipeline.</p><p>Apart from this, I spend time exploring data and the geospatial world in Python (and JavaScript when called for) and thinking of interesting ways to present whatever I find.</p><p>Mostly, I like to be outside, either in the mountains or in the sea. I've documented some of my larger trips on the blog, and currently have a Pacific crossing (by sail) in the mid-term pipeline.</p><p><a href=\"https://rdrn.me/about/cv.pdf\">Click here for my CV</a></p><p>*Also the <a href=\"https://www.ifc.org/\">IFC</a>, which is part of the World Bank Group, but not part of the World Bank...</p>",
                        "comment_id": "5bc1a905b95e280b5623ca74",
                        "markdown": "My name is Chris  and I'm an engineer (because that's what I studied) from South\nAfrica, working on global development issues (energy and finance). This involves\nexploring cool techniques in data analysis and modelling, but also working with\nstakeholders at all levels of various systems.\n\nSince January 2017, I've been working at the World Bank\n[http://www.worldbank.org/]*, mostly on off-grid energy solutions in Africa.\nI've been pushing the use of data in energy planning (e.g. the most complete \nelectrical grid map [https://africagrid.energydata.info/]  of Africa) and\nsupporting the private sector ecosystem with open data. I've also worked\nextensively with HOT [https://www.hotosm.org/]  on very exciting OpenStreetMap\nwork, including a project to map several million buildings in Tanzania\n[https://www.hotosm.org/projects/mini-grids/]. In the last year I've worked on\nbroader topics related to finance and technology, and have been lucky enough to\nwork with iRise Hub [http://irisehub.so/]  in Mogadishu, and currently have a\nproject on tech-enabled credit scoring in the pipeline.\n\nApart from this, I spend time exploring data and the geospatial world in Python\n(and JavaScript when called for) and thinking of interesting ways to present\nwhatever I find.\n\nMostly, I like to be outside, either in the mountains or in the sea. I've\ndocumented some of my larger trips on the blog, and currently have a Pacific\ncrossing (by sail) in the mid-term pipeline.\n\nClick here for my CV [https://rdrn.me/about/cv.pdf]\n\n*Also the IFC [https://www.ifc.org/], which is part of the World Bank Group, but\nnot part of the World Bank...",
                        "feature_image": null,
                        "featured": 0,
                        "page": 1,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "About",
                        "meta_description": "My name is Chris and I'm an engineer (because that's what I studied) from South Africa, working on global development issues (energy and finance).",
                        "author_id": "1",
                        "created_at": "2018-10-13 08:12:53",
                        "created_by": "1",
                        "updated_at": "2018-10-23 08:28:17",
                        "updated_by": "1",
                        "published_at": "2018-10-13 11:45:57",
                        "published_by": "1",
                        "custom_excerpt": "My name is Chris and I'm an engineer (because that's what I studied) from South Africa, working on global development issues (energy and finance).",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bc2ec443e94a80ccd4f5547",
                        "uuid": "bbf6ff91-473f-4732-99ab-8daa89527416",
                        "title": "A workflow for Python mapping with automatic updating",
                        "slug": "python-mapping-automatic-updating",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"html\",{\"html\":\"<div style=\\\"text-align:center;\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"499px\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 499 252\\\" style=\\\"max-width:100%;max-height:252px;\\\"><defs/><g transform=\\\"translate(0.5,0.5)\\\"><a xlink:href=\\\"https://developers.google.com/apis-explorer/\\\"><path d=\\\"M 70 31 L 184.03 31\\\" fill=\\\"none\\\" stroke=\\\"#d79b00\\\" stroke-miterlimit=\\\"10\\\"/><path d=\\\"M 189.28 31 L 182.28 34.5 L 184.03 31 L 182.28 27.5 Z\\\" fill=\\\"#d79b00\\\" stroke=\\\"#d79b00\\\" stroke-miterlimit=\\\"10\\\"/><g transform=\\\"translate(84.5,15.5)\\\"><switch><foreignObject style=\\\"overflow:visible;\\\" pointer-events=\\\"all\\\" width=\\\"70\\\" height=\\\"11\\\" requiredFeatures=\\\"http://www.w3.org/TR/SVG11/feature#Extensibility\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;\\\">Google APIs</div></div></foreignObject><text x=\\\"35\\\" y=\\\"11\\\" fill=\\\"#000000\\\" text-anchor=\\\"middle\\\" font-size=\\\"11px\\\" font-family=\\\"Verdana\\\">Google APIs</text></switch></g></a><a xlink:href=\\\"https://www.google.com/sheets/about/\\\"><rect x=\\\"0\\\" y=\\\"11\\\" width=\\\"70\\\" height=\\\"40\\\" fill=\\\"#ffe6cc\\\" stroke=\\\"#d79b00\\\"/><g transform=\\\"translate(1.5,18.5)\\\"><switch><foreignObject style=\\\"overflow:visible;\\\" pointer-events=\\\"all\\\" width=\\\"66\\\" height=\\\"24\\\" requiredFeatures=\\\"http://www.w3.org/TR/SVG11/feature#Extensibility\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 66px; white-space: normal; overflow-wrap: normal; text-align: center;\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display:inline-block;text-align:inherit;text-decoration:inherit;\\\">Google Sheets</div></div></foreignObject><text x=\\\"33\\\" y=\\\"18\\\" fill=\\\"#000000\\\" text-anchor=\\\"middle\\\" font-size=\\\"11px\\\" font-family=\\\"Verdana\\\">Google Sheets</text></switch></g></a><a xlink:href=\\\"http://geopandas.org/\\\"><path d=\\\"M 225 51 L 225 144.63\\\" fill=\\\"none\\\" stroke=\\\"#6c8ebf\\\" stroke-miterlimit=\\\"10\\\"/><path d=\\\"M 225 149.88 L 221.5 142.88 L 225 144.63 L 228.5 142.88 Z\\\" fill=\\\"#6c8ebf\\\" stroke=\\\"#6c8ebf\\\" stroke-miterlimit=\\\"10\\\"/><g transform=\\\"translate(178.5,89.5)rotate(-90,31,5.5)\\\"><switch><foreignObject style=\\\"overflow:visible;\\\" pointer-events=\\\"all\\\" width=\\\"62\\\" height=\\\"11\\\" requiredFeatures=\\\"http://www.w3.org/TR/SVG11/feature#Extensibility\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;\\\">geopandas</div></div></foreignObject><text x=\\\"31\\\" y=\\\"11\\\" fill=\\\"#000000\\\" text-anchor=\\\"middle\\\" font-size=\\\"11px\\\" font-family=\\\"Verdana\\\">geopandas</text></switch></g></a><a xlink:href=\\\"https://github.com/burnash/gspread\\\"><rect x=\\\"190\\\" y=\\\"11\\\" width=\\\"70\\\" height=\\\"40\\\" fill=\\\"#dae8fc\\\" stroke=\\\"#6c8ebf\\\"/><g transform=\\\"translate(201.5,25.5)\\\"><switch><foreignObject style=\\\"overflow:visible;\\\" pointer-events=\\\"all\\\" width=\\\"46\\\" height=\\\"11\\\" requiredFeatures=\\\"http://www.w3.org/TR/SVG11/feature#Extensibility\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 47px; white-space: nowrap; overflow-wrap: normal; text-align: center;\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display:inline-block;text-align:inherit;text-decoration:inherit;\\\">gspread</div></div></foreignObject><text x=\\\"23\\\" y=\\\"11\\\" fill=\\\"#000000\\\" text-anchor=\\\"middle\\\" font-size=\\\"11px\\\" font-family=\\\"Verdana\\\">gspread</text></switch></g></a><path d=\\\"M 260 171 L 343.63 171\\\" fill=\\\"none\\\" stroke=\\\"#6c8ebf\\\" stroke-miterlimit=\\\"10\\\"/><path d=\\\"M 348.88 171 L 341.88 174.5 L 343.63 171 L 341.88 167.5 Z\\\" fill=\\\"#6c8ebf\\\" stroke=\\\"#6c8ebf\\\" stroke-miterlimit=\\\"10\\\"/><g transform=\\\"translate(281.5,155.5)\\\"><switch><foreignObject style=\\\"overflow:visible;\\\" pointer-events=\\\"all\\\" width=\\\"45\\\" height=\\\"11\\\" requiredFeatures=\\\"http://www.w3.org/TR/SVG11/feature#Extensibility\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;\\\"><div style=\\\"font-size: 11px\\\">git push</div></div></div></foreignObject><text x=\\\"23\\\" y=\\\"11\\\" fill=\\\"#000000\\\" text-anchor=\\\"middle\\\" font-size=\\\"11px\\\" font-family=\\\"Verdana\\\">[Not supported by viewer]</text></switch></g><a xlink:href=\\\"https://github.com/python-visualization/folium\\\"><rect x=\\\"190\\\" y=\\\"151\\\" width=\\\"70\\\" height=\\\"40\\\" fill=\\\"#dae8fc\\\" stroke=\\\"#6c8ebf\\\"/><g transform=\\\"translate(206.5,165.5)\\\"><switch><foreignObject style=\\\"overflow:visible;\\\" pointer-events=\\\"all\\\" width=\\\"37\\\" height=\\\"11\\\" requiredFeatures=\\\"http://www.w3.org/TR/SVG11/feature#Extensibility\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 38px; white-space: nowrap; overflow-wrap: normal; text-align: center;\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display:inline-block;text-align:inherit;text-decoration:inherit;\\\">Folium</div></div></foreignObject><text x=\\\"19\\\" y=\\\"11\\\" fill=\\\"#000000\\\" text-anchor=\\\"middle\\\" font-size=\\\"11px\\\" font-family=\\\"Verdana\\\">Folium</text></switch></g></a><path d=\\\"M 420 171 L 483.63 171\\\" fill=\\\"none\\\" stroke=\\\"#82b366\\\" stroke-miterlimit=\\\"10\\\" stroke-dasharray=\\\"3 3\\\"/><path d=\\\"M 488.88 171 L 481.88 174.5 L 483.63 171 L 481.88 167.5 Z\\\" fill=\\\"#82b366\\\" stroke=\\\"#82b366\\\" stroke-miterlimit=\\\"10\\\"/><g transform=\\\"translate(427.5,155.5)\\\"><switch><foreignObject style=\\\"overflow:visible;\\\" pointer-events=\\\"all\\\" width=\\\"54\\\" height=\\\"11\\\" requiredFeatures=\\\"http://www.w3.org/TR/SVG11/feature#Extensibility\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;\\\"><div style=\\\"font-size: 11px\\\">map.html</div></div></div></foreignObject><text x=\\\"27\\\" y=\\\"11\\\" fill=\\\"#000000\\\" text-anchor=\\\"middle\\\" font-size=\\\"11px\\\" font-family=\\\"Verdana\\\">[Not supported by viewer]</text></switch></g><a xlink:href=\\\"https://github.com/carderne/environmental-mapping\\\"><rect x=\\\"350\\\" y=\\\"151\\\" width=\\\"70\\\" height=\\\"40\\\" fill=\\\"#d5e8d4\\\" stroke=\\\"#82b366\\\"/><g transform=\\\"translate(365.5,165.5)\\\"><switch><foreignObject style=\\\"overflow:visible;\\\" pointer-events=\\\"all\\\" width=\\\"38\\\" height=\\\"11\\\" requiredFeatures=\\\"http://www.w3.org/TR/SVG11/feature#Extensibility\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 39px; white-space: nowrap; overflow-wrap: normal; text-align: center;\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display:inline-block;text-align:inherit;text-decoration:inherit;\\\"><div style=\\\"font-size: 11px\\\">GitHub</div></div></div></foreignObject><text x=\\\"19\\\" y=\\\"11\\\" fill=\\\"#000000\\\" text-anchor=\\\"middle\\\" font-size=\\\"11px\\\" font-family=\\\"Verdana\\\">[Not supported by viewer]</text></switch></g></a><rect x=\\\"180\\\" y=\\\"1\\\" width=\\\"90\\\" height=\\\"250\\\" fill=\\\"none\\\" stroke=\\\"#7ea6e0\\\" stroke-width=\\\"2\\\" stroke-dasharray=\\\"6 6\\\"/><a xlink:href=\\\"https://cloud.google.com/compute/\\\"><rect x=\\\"180\\\" y=\\\"201\\\" width=\\\"90\\\" height=\\\"50\\\" fill=\\\"none\\\" stroke=\\\"none\\\"/><g transform=\\\"translate(180.5,206.5)\\\"><switch><foreignObject style=\\\"overflow:visible;\\\" pointer-events=\\\"all\\\" width=\\\"88\\\" height=\\\"38\\\" requiredFeatures=\\\"http://www.w3.org/TR/SVG11/feature#Extensibility\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 88px; white-space: normal; overflow-wrap: normal; text-align: center;\\\"><div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" style=\\\"display:inline-block;text-align:inherit;text-decoration:inherit;\\\">Google Compute Engine</div></div></foreignObject><text x=\\\"44\\\" y=\\\"25\\\" fill=\\\"#000000\\\" text-anchor=\\\"middle\\\" font-size=\\\"11px\\\" font-family=\\\"Verdana\\\">Google Compute Engine</text></switch></g></a></g></svg></div>\"}],[\"markdown\",{\"markdown\":\"```python\\nimport pandas as pd\\nimport gspread\\nfrom oauth2client.service_account import ServiceAccountCredentials\\n\\nscope = ['https://spreadsheets.google.com/feeds',\\n         'https://www.googleapis.com/auth/drive']\\ncredentials = ServiceAccountCredentials.from_json_keyfile_name(\\n    'google-api-key.json', scope)\\ngc = gspread.authorize(credentials)\\n\\nwks = gc.open(\\\"sheet\\\").sheet1  # sheet is the name of the Google Sheet\\nwks_vals = wks.get_all_values()\\ndf = pd.DataFrame(wks_vals[1:], columns=wks_vals[0])\\n```\"}],[\"markdown\",{\"markdown\":\"```python\\nimport geopandas as gpd\\nfrom shapely.geometry import Point\\n\\ndf = df.astype({'X': int, 'Y':int})\\ngeo = [Point(xy) for xy in zip(laws['Y'], laws['X'])]\\ngdf = gpd.GeoDataFrame(df, crs={'init':'epsg:4326'}, geometry=geo)\\n```\"}],[\"markdown\",{\"markdown\":\"```python\\nimport folium\\n\\nm = folium.Map([40, -100], zoom_start=5)\\nc = folium.GeoJson(gdf)     \\nc.add_to(m)  \\n\\n# m\\n# m.save('map.html')\\n```\"}],[\"markdown\",{\"markdown\":\"cron entry:\\n```bash\\n0 * * * * /home/username/update_map.sh\\n```\"}],[\"markdown\",{\"markdown\":\"update_map.sh:\\n```bash\\npython enviro_map.py\\ngit add .\\ngit commit -m \\\"Hourly map update\\\"\\ngit pull --no-edit\\ngit push\\n```\"}],[\"html\",{\"html\":\"<iframe src=\\\"https://rdrn.me/leaflet-maps-google-sheets/leaflet-gsheets-nosidebar.html\\\" style=\\\"width: 100%; height: 600px\\\" name=\\\"internal\\\" frameBorder=\\\"0\\\"></iframe>\"}]],\"markups\":[[\"em\"],[\"a\",[\"href\",\"https://rdrn.me/leaflet-maps-google-sheets/\"]],[\"a\",[\"href\",\"https://www.google.com/mymaps\"]],[\"a\",[\"href\",\"https://docs.google.com/spreadsheets/d/1WyZNokrgj5NmbyYrRIOQDa2mZ0_SEdbjBohR2RmKXp8/edit?usp=sharing\"]],[\"a\",[\"href\",\"https://docs.google.com/spreadsheets/d/15t8dZIab3cNoN3y3WVYVy4a-RITFhfvlPWIKSKAuV0Y/edit?usp=sharing\"]],[\"a\",[\"href\",\"https://github.com/burnash/gspread\"]],[\"a\",[\"href\",\"https://pandas.pydata.org/\"]],[\"a\",[\"href\",\"http://geopandas.org/\"]],[\"a\",[\"href\",\"http://toblerity.org/shapely/\"]],[\"a\",[\"href\",\"http://toblerity.org/fiona/\"]],[\"a\",[\"href\",\"https://github.com/carderne/web-mapping/tree/master/folium-gspread\"]],[\"a\",[\"href\",\"https://github.com/carderne/leaflet-gsheets\"]]],\"sections\":[[1,\"p\",[[0,[0],0,\"This is intended as a workflow for a Python application focused on modelling and mapping. For a much simpler solution to produce dynamic maps from Google Sheets data using JavaScript, see my other post \"],[0,[1],1,\"here\"],[0,[],1,\".\"]]],[1,\"p\",[[0,[],0,\"A friend needed a map of the US displayed with points at specific locations with attached information, and overviews for certain states with summaries. And for this to be done (and updated) as easily as possible by people with no coding knowledge. Their solution was \"],[0,[2],1,\"Google My Maps\"],[0,[],0,\", which was probably more than adequate for what they're trying to achieve.\"]]],[1,\"p\",[[0,[],0,\"So (mostly for the fun of it) I decided to see if I could help out, using Folium and some simple tables. My first proposal (\\\"just run this Jupyter notebook and embed the output\\\") didn't go over well. So I decided to explore how to make it as simple as possible, and this is what I came up with.\"]]],[10,0],[1,\"p\",[[0,[],0,\"Firstly there are two Google Sheets with a simple format. The \"],[0,[3],1,\"first\"],[0,[],0,\" contains specific point data with coordinates in decimal degrees, and the \"],[0,[4],1,\"second\"],[0,[],0,\" contains summary state-level data with polygon representations of each state. These are then shared with anyone who might need access to updating the map data.\"]]],[1,\"p\",[[0,[],0,\"Then the Python package \"],[0,[5],1,\"gspread\"],[0,[],0,\" makes it extremely easy to pull this data using OAuth2. It has great instructions on how to set up a Google API key and access specific sheets. It's only a few lines of code to pull the data and convert into a \"],[0,[6],1,\"pandas\"],[0,[],0,\" DataFrame.\"]]],[10,1],[1,\"p\",[[0,[],0,\"And then a few more to convert this into a \"],[0,[7],1,\"GeoPandas\"],[0,[],0,\" GeoDataFrame, which extends pandas with a \"],[0,[0],1,\"geometry\"],[0,[],0,\" attribute and provides easy access to the geospatial packages \"],[0,[8],1,\"Shapely\"],[0,[],0,\" and \"],[0,[9],1,\"Fiona\"],[0,[],0,\". More importantly, they play nicely with Folium, my preferred shortcut to easy JavaScript web-maps.\"]]],[10,2],[1,\"p\",[[0,[],0,\"With a similar process for the other Sheet, it is a simple process to create a basic map based on this GeoDataFrame. Please have a look at my repo \"],[0,[10],1,\"here\"],[0,[],0,\" for the complete code and output.\"]]],[10,3],[1,\"p\",[[0,[],0,\"The final step is to make this all happen in a predictable way that doesn't force anyone to get their hands covered in code, who doesn't particularly want to. So we set this code up on a Google Compute instance and have it output the results as an embeddable html file. To avoid dealing with servers and firewalls, I cloned into a new \"],[0,[10],1,\"GitHub repo\"],[0,[],0,\" and set up a cron-job to run the following script every hour.\"]]],[10,4],[10,5],[1,\"p\",[[0,[],0,\"This pushes the updated html file to the repo, where my so-called clients can easily \"],[0,[11],1,\"access it\"],[0,[],0,\" to embed in their website. Then all they have to do to update their website is edit the Google Sheets and wait for the new results to appear embedded in their website.\"]]],[10,6],[1,\"p\",[]]]}",
                        "html": "<p><em>This is intended as a workflow for a Python application focused on modelling and mapping. For a much simpler solution to produce dynamic maps from Google Sheets data using JavaScript, see my other post <a href=\"https://rdrn.me/leaflet-maps-google-sheets/\">here</a>.</em></p><p>A friend needed a map of the US displayed with points at specific locations with attached information, and overviews for certain states with summaries. And for this to be done (and updated) as easily as possible by people with no coding knowledge. Their solution was <a href=\"https://www.google.com/mymaps\">Google My Maps</a>, which was probably more than adequate for what they're trying to achieve.</p><p>So (mostly for the fun of it) I decided to see if I could help out, using Folium and some simple tables. My first proposal (\"just run this Jupyter notebook and embed the output\") didn't go over well. So I decided to explore how to make it as simple as possible, and this is what I came up with.</p><div style=\"text-align:center;\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"499px\" version=\"1.1\" viewBox=\"0 0 499 252\" style=\"max-width:100%;max-height:252px;\"><defs/><g transform=\"translate(0.5,0.5)\"><a xlink:href=\"https://developers.google.com/apis-explorer/\"><path d=\"M 70 31 L 184.03 31\" fill=\"none\" stroke=\"#d79b00\" stroke-miterlimit=\"10\"/><path d=\"M 189.28 31 L 182.28 34.5 L 184.03 31 L 182.28 27.5 Z\" fill=\"#d79b00\" stroke=\"#d79b00\" stroke-miterlimit=\"10\"/><g transform=\"translate(84.5,15.5)\"><switch><foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"70\" height=\"11\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;\">Google APIs</div></div></foreignObject><text x=\"35\" y=\"11\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"11px\" font-family=\"Verdana\">Google APIs</text></switch></g></a><a xlink:href=\"https://www.google.com/sheets/about/\"><rect x=\"0\" y=\"11\" width=\"70\" height=\"40\" fill=\"#ffe6cc\" stroke=\"#d79b00\"/><g transform=\"translate(1.5,18.5)\"><switch><foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"66\" height=\"24\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 66px; white-space: normal; overflow-wrap: normal; text-align: center;\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;\">Google Sheets</div></div></foreignObject><text x=\"33\" y=\"18\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"11px\" font-family=\"Verdana\">Google Sheets</text></switch></g></a><a xlink:href=\"http://geopandas.org/\"><path d=\"M 225 51 L 225 144.63\" fill=\"none\" stroke=\"#6c8ebf\" stroke-miterlimit=\"10\"/><path d=\"M 225 149.88 L 221.5 142.88 L 225 144.63 L 228.5 142.88 Z\" fill=\"#6c8ebf\" stroke=\"#6c8ebf\" stroke-miterlimit=\"10\"/><g transform=\"translate(178.5,89.5)rotate(-90,31,5.5)\"><switch><foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"62\" height=\"11\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;\">geopandas</div></div></foreignObject><text x=\"31\" y=\"11\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"11px\" font-family=\"Verdana\">geopandas</text></switch></g></a><a xlink:href=\"https://github.com/burnash/gspread\"><rect x=\"190\" y=\"11\" width=\"70\" height=\"40\" fill=\"#dae8fc\" stroke=\"#6c8ebf\"/><g transform=\"translate(201.5,25.5)\"><switch><foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"46\" height=\"11\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 47px; white-space: nowrap; overflow-wrap: normal; text-align: center;\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;\">gspread</div></div></foreignObject><text x=\"23\" y=\"11\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"11px\" font-family=\"Verdana\">gspread</text></switch></g></a><path d=\"M 260 171 L 343.63 171\" fill=\"none\" stroke=\"#6c8ebf\" stroke-miterlimit=\"10\"/><path d=\"M 348.88 171 L 341.88 174.5 L 343.63 171 L 341.88 167.5 Z\" fill=\"#6c8ebf\" stroke=\"#6c8ebf\" stroke-miterlimit=\"10\"/><g transform=\"translate(281.5,155.5)\"><switch><foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"45\" height=\"11\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;\"><div style=\"font-size: 11px\">git push</div></div></div></foreignObject><text x=\"23\" y=\"11\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"11px\" font-family=\"Verdana\">[Not supported by viewer]</text></switch></g><a xlink:href=\"https://github.com/python-visualization/folium\"><rect x=\"190\" y=\"151\" width=\"70\" height=\"40\" fill=\"#dae8fc\" stroke=\"#6c8ebf\"/><g transform=\"translate(206.5,165.5)\"><switch><foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"37\" height=\"11\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 38px; white-space: nowrap; overflow-wrap: normal; text-align: center;\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;\">Folium</div></div></foreignObject><text x=\"19\" y=\"11\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"11px\" font-family=\"Verdana\">Folium</text></switch></g></a><path d=\"M 420 171 L 483.63 171\" fill=\"none\" stroke=\"#82b366\" stroke-miterlimit=\"10\" stroke-dasharray=\"3 3\"/><path d=\"M 488.88 171 L 481.88 174.5 L 483.63 171 L 481.88 167.5 Z\" fill=\"#82b366\" stroke=\"#82b366\" stroke-miterlimit=\"10\"/><g transform=\"translate(427.5,155.5)\"><switch><foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"54\" height=\"11\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;\"><div style=\"font-size: 11px\">map.html</div></div></div></foreignObject><text x=\"27\" y=\"11\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"11px\" font-family=\"Verdana\">[Not supported by viewer]</text></switch></g><a xlink:href=\"https://github.com/carderne/environmental-mapping\"><rect x=\"350\" y=\"151\" width=\"70\" height=\"40\" fill=\"#d5e8d4\" stroke=\"#82b366\"/><g transform=\"translate(365.5,165.5)\"><switch><foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"38\" height=\"11\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 39px; white-space: nowrap; overflow-wrap: normal; text-align: center;\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;\"><div style=\"font-size: 11px\">GitHub</div></div></div></foreignObject><text x=\"19\" y=\"11\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"11px\" font-family=\"Verdana\">[Not supported by viewer]</text></switch></g></a><rect x=\"180\" y=\"1\" width=\"90\" height=\"250\" fill=\"none\" stroke=\"#7ea6e0\" stroke-width=\"2\" stroke-dasharray=\"6 6\"/><a xlink:href=\"https://cloud.google.com/compute/\"><rect x=\"180\" y=\"201\" width=\"90\" height=\"50\" fill=\"none\" stroke=\"none\"/><g transform=\"translate(180.5,206.5)\"><switch><foreignObject style=\"overflow:visible;\" pointer-events=\"all\" width=\"88\" height=\"38\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; font-size: 11px; font-family: Verdana; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 88px; white-space: normal; overflow-wrap: normal; text-align: center;\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display:inline-block;text-align:inherit;text-decoration:inherit;\">Google Compute Engine</div></div></foreignObject><text x=\"44\" y=\"25\" fill=\"#000000\" text-anchor=\"middle\" font-size=\"11px\" font-family=\"Verdana\">Google Compute Engine</text></switch></g></a></g></svg></div><p>Firstly there are two Google Sheets with a simple format. The <a href=\"https://docs.google.com/spreadsheets/d/1WyZNokrgj5NmbyYrRIOQDa2mZ0_SEdbjBohR2RmKXp8/edit?usp=sharing\">first</a> contains specific point data with coordinates in decimal degrees, and the <a href=\"https://docs.google.com/spreadsheets/d/15t8dZIab3cNoN3y3WVYVy4a-RITFhfvlPWIKSKAuV0Y/edit?usp=sharing\">second</a> contains summary state-level data with polygon representations of each state. These are then shared with anyone who might need access to updating the map data.</p><p>Then the Python package <a href=\"https://github.com/burnash/gspread\">gspread</a> makes it extremely easy to pull this data using OAuth2. It has great instructions on how to set up a Google API key and access specific sheets. It's only a few lines of code to pull the data and convert into a <a href=\"https://pandas.pydata.org/\">pandas</a> DataFrame.</p><pre><code class=\"language-python\">import pandas as pd\nimport gspread\nfrom oauth2client.service_account import ServiceAccountCredentials\n\nscope = ['https://spreadsheets.google.com/feeds',\n         'https://www.googleapis.com/auth/drive']\ncredentials = ServiceAccountCredentials.from_json_keyfile_name(\n    'google-api-key.json', scope)\ngc = gspread.authorize(credentials)\n\nwks = gc.open(&quot;sheet&quot;).sheet1  # sheet is the name of the Google Sheet\nwks_vals = wks.get_all_values()\ndf = pd.DataFrame(wks_vals[1:], columns=wks_vals[0])\n</code></pre>\n<p>And then a few more to convert this into a <a href=\"http://geopandas.org/\">GeoPandas</a> GeoDataFrame, which extends pandas with a <em>geometry</em> attribute and provides easy access to the geospatial packages <a href=\"http://toblerity.org/shapely/\">Shapely</a> and <a href=\"http://toblerity.org/fiona/\">Fiona</a>. More importantly, they play nicely with Folium, my preferred shortcut to easy JavaScript web-maps.</p><pre><code class=\"language-python\">import geopandas as gpd\nfrom shapely.geometry import Point\n\ndf = df.astype({'X': int, 'Y':int})\ngeo = [Point(xy) for xy in zip(laws['Y'], laws['X'])]\ngdf = gpd.GeoDataFrame(df, crs={'init':'epsg:4326'}, geometry=geo)\n</code></pre>\n<p>With a similar process for the other Sheet, it is a simple process to create a basic map based on this GeoDataFrame. Please have a look at my repo <a href=\"https://github.com/carderne/web-mapping/tree/master/folium-gspread\">here</a> for the complete code and output.</p><pre><code class=\"language-python\">import folium\n\nm = folium.Map([40, -100], zoom_start=5)\nc = folium.GeoJson(gdf)     \nc.add_to(m)  \n\n# m\n# m.save('map.html')\n</code></pre>\n<p>The final step is to make this all happen in a predictable way that doesn't force anyone to get their hands covered in code, who doesn't particularly want to. So we set this code up on a Google Compute instance and have it output the results as an embeddable html file. To avoid dealing with servers and firewalls, I cloned into a new <a href=\"https://github.com/carderne/web-mapping/tree/master/folium-gspread\">GitHub repo</a> and set up a cron-job to run the following script every hour.</p><p>cron entry:</p>\n<pre><code class=\"language-bash\">0 * * * * /home/username/update_map.sh\n</code></pre>\n<p>update_map.sh:</p>\n<pre><code class=\"language-bash\">python enviro_map.py\ngit add .\ngit commit -m &quot;Hourly map update&quot;\ngit pull --no-edit\ngit push\n</code></pre>\n<p>This pushes the updated html file to the repo, where my so-called clients can easily <a href=\"https://github.com/carderne/leaflet-gsheets\">access it</a> to embed in their website. Then all they have to do to update their website is edit the Google Sheets and wait for the new results to appear embedded in their website.</p><iframe src=\"https://rdrn.me/leaflet-maps-google-sheets/leaflet-gsheets-nosidebar.html\" style=\"width: 100%; height: 600px\" name=\"internal\" frameBorder=\"0\"></iframe>",
                        "comment_id": "5bc2ec443e94a80ccd4f5547",
                        "markdown": "This is intended as a workflow for a Python application focused on modelling and\nmapping. For a much simpler solution to produce dynamic maps from Google Sheets\ndata using JavaScript, see my other post here\n[https://rdrn.me/leaflet-maps-google-sheets/].\n\nA friend needed a map of the US displayed with points at specific locations with\nattached information, and overviews for certain states with summaries. And for\nthis to be done (and updated) as easily as possible by people with no coding\nknowledge. Their solution was Google My Maps [https://www.google.com/mymaps],\nwhich was probably more than adequate for what they're trying to achieve.\n\nSo (mostly for the fun of it) I decided to see if I could help out, using Folium\nand some simple tables. My first proposal (\"just run this Jupyter notebook and\nembed the output\") didn't go over well. So I decided to explore how to make it\nas simple as possible, and this is what I came up with.\n\nGoogle APIsGoogle APIsGoogle SheetsGoogle Sheetsgeopandasgeopandasgspreadgspread\ngit push[Not supported by viewer]FoliumFoliummap.html[Not supported by viewer]\nGitHub[Not supported by viewer]Google Compute EngineGoogle Compute EngineFirstly\nthere are two Google Sheets with a simple format. The first\n[https://docs.google.com/spreadsheets/d/1WyZNokrgj5NmbyYrRIOQDa2mZ0_SEdbjBohR2RmKXp8/edit?usp=sharing] \n contains specific point data with coordinates in decimal degrees, and the \nsecond\n[https://docs.google.com/spreadsheets/d/15t8dZIab3cNoN3y3WVYVy4a-RITFhfvlPWIKSKAuV0Y/edit?usp=sharing] \n contains summary state-level data with polygon representations of each state.\nThese are then shared with anyone who might need access to updating the map\ndata.\n\nThen the Python package gspread [https://github.com/burnash/gspread]  makes it\nextremely easy to pull this data using OAuth2. It has great instructions on how\nto set up a Google API key and access specific sheets. It's only a few lines of\ncode to pull the data and convert into a pandas [https://pandas.pydata.org/] \nDataFrame.\n\nimport pandas as pd\nimport gspread\nfrom oauth2client.service_account import ServiceAccountCredentials\n\nscope = ['https://spreadsheets.google.com/feeds',\n         'https://www.googleapis.com/auth/drive']\ncredentials = ServiceAccountCredentials.from_json_keyfile_name(\n    'google-api-key.json', scope)\ngc = gspread.authorize(credentials)\n\nwks = gc.open(\"sheet\").sheet1  # sheet is the name of the Google Sheet\nwks_vals = wks.get_all_values()\ndf = pd.DataFrame(wks_vals[1:], columns=wks_vals[0])\n\n\nAnd then a few more to convert this into a GeoPandas [http://geopandas.org/] \nGeoDataFrame, which extends pandas with a geometry  attribute and provides easy\naccess to the geospatial packages Shapely [http://toblerity.org/shapely/]  and \nFiona [http://toblerity.org/fiona/]. More importantly, they play nicely with\nFolium, my preferred shortcut to easy JavaScript web-maps.\n\nimport geopandas as gpd\nfrom shapely.geometry import Point\n\ndf = df.astype({'X': int, 'Y':int})\ngeo = [Point(xy) for xy in zip(laws['Y'], laws['X'])]\ngdf = gpd.GeoDataFrame(df, crs={'init':'epsg:4326'}, geometry=geo)\n\n\nWith a similar process for the other Sheet, it is a simple process to create a\nbasic map based on this GeoDataFrame. Please have a look at my repo here\n[https://github.com/carderne/web-mapping/tree/master/folium-gspread]  for the\ncomplete code and output.\n\nimport folium\n\nm = folium.Map([40, -100], zoom_start=5)\nc = folium.GeoJson(gdf)     \nc.add_to(m)  \n\n# m\n# m.save('map.html')\n\n\nThe final step is to make this all happen in a predictable way that doesn't\nforce anyone to get their hands covered in code, who doesn't particularly want\nto. So we set this code up on a Google Compute instance and have it output the\nresults as an embeddable html file. To avoid dealing with servers and firewalls,\nI cloned into a new GitHub repo\n[https://github.com/carderne/web-mapping/tree/master/folium-gspread]  and set up\na cron-job to run the following script every hour.\n\ncron entry:\n\n0 * * * * /home/username/update_map.sh\n\n\nupdate_map.sh:\n\npython enviro_map.py\ngit add .\ngit commit -m \"Hourly map update\"\ngit pull --no-edit\ngit push\n\n\nThis pushes the updated html file to the repo, where my so-called clients can\neasily access it [https://github.com/carderne/leaflet-gsheets]  to embed in\ntheir website. Then all they have to do to update their website is edit the\nGoogle Sheets and wait for the new results to appear embedded in their website.",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "A workflow for Python mapping with automatic updating",
                        "meta_description": "A friend needed a map of the US displayed with points at specific locations with attached information, and overviews for certain states with summaries. ",
                        "author_id": "1",
                        "created_at": "2018-10-14 07:12:04",
                        "created_by": "1",
                        "updated_at": "2018-10-23 14:05:50",
                        "updated_by": "1",
                        "published_at": "2018-06-20 06:47:00",
                        "published_by": "1",
                        "custom_excerpt": "A friend needed a map of the US displayed with points at specific locations with attached information, and overviews for certain states with summaries. And for this to be done (and updated) as easily as possible by people with no coding knowledge.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    },
                    {
                        "id": "5bc9f471fb49665c9058d756",
                        "uuid": "d0cdfae8-dadf-499e-828b-fe7b35667e71",
                        "title": "Leaflet maps with data from Google Sheets",
                        "slug": "leaflet-maps-google-sheets",
                        "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"markdown\",{\"markdown\":\"```JavaScript\\nfunction init() {\\n    Tabletop.init({\\n        key: sheetsUrl,\\n        callback: myFunction,\\n        simpleSheet: true\\n    })\\n}\\n\\nwindow.addEventListener('DOMContentLoaded', init)\\n\\nfunction myFunction(data, tabletop) {\\n    console.log(data);\\n}\\n```\"}],[\"markdown\",{\"markdown\":\"```HTML\\n<!DOCTYPE html>\\n<html>\\n<head>\\n    <script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://unpkg.com/leaflet@1.3.4/dist/leaflet.css\\\"/>\\n    <script src=\\\"https://unpkg.com/leaflet@1.3.4/dist/leaflet.js\\\"></script>\\n</head>\\n<body>\\n    <div id=\\\"map\\\"></div>\\n    <script type=\\\"text/javascript\\\" src=\\\"leaflet-example.js\\\"></script>\\n</body>\\n</html>\\n```\"}],[\"markdown\",{\"markdown\":\"```JavaScript\\nvar map = L.map('map-div').setView([startLat, startLong], startZoom);\\nvar basemap = L.tileLayer(baseMapURL, {\\n\\tattribution: attributionText\\n});\\nbasemap.addTo(map);\\n```\"}],[\"markdown\",{\"markdown\":\"```JavaScript\\nfunction addPoints(data, tabletop) {\\n    for (var row in data) {\\n    \\tvar marker = L.marker([\\n            data[row].lat,\\n            data[row].long\\n        ]).addTo(map);\\n      \\tmarker.bindPopup(data[row].category);\\n    }\\n}\\n```\"}],[\"markdown\",{\"markdown\":\"```JavaScript\\nfunction addPolygons(data, tabletop) {\\n    // the empty GeoJSON waiting to be populated with features\\n    var polygons = {\\n        \\\"type\\\": \\\"FeatureCollection\\\",\\n        \\\"features\\\": []\\n    }\\n\\n    for (var row in data) {\\n        // JSON.parse converts the geometry strings into JSON objects\\n        var coords = JSON.parse(data[row].geometry);\\n\\n        polygons.features.push({\\n            \\\"type\\\": \\\"Feature\\\",\\n            \\\"geometry\\\": {\\n                \\\"type\\\": \\\"MultiPolygon\\\",\\n                \\\"coordinates\\\": coords\\n            },\\n            \\\"properties\\\": {\\n                \\\"name\\\": data[row].name,\\n            }\\n        });\\n    }\\n}\\n```\"}],[\"markdown\",{\"markdown\":\"```JavaScript\\npolygonMarkers = L.geoJSON(polygons, {\\n    onEachFeature: function (feature, layer) {\\n        layer.bindPopup(feature.properties.name);\\n    },\\n}).addTo(map);\\n```\"}],[\"html\",{\"html\":\"<iframe src=\\\"https://rdrn.me/leaflet-maps-google-sheets/leaflet-gsheets-nosidebar.html\\\" style=\\\"width: 100%; height: 600px\\\" name=\\\"internal\\\" frameBorder=\\\"0\\\"></iframe>\"}]],\"markups\":[[\"em\"],[\"a\",[\"href\",\"https://rdrn.me/python-mapping-automatic-updating/\"]],[\"a\",[\"href\",\"https://www.datavizforall.org/leaflet/with-google-sheets/\"]],[\"a\",[\"href\",\"https://github.com/carderne/leaflet-gsheets\"]],[\"a\",[\"href\",\"https://nodejs.org/\"]],[\"a\",[\"href\",\"https://aws.amazon.com/\"]],[\"a\",[\"href\",\"https://azure.microsoft.com/\"]],[\"a\",[\"href\",\"https://blog.codinghorror.com/the-principle-of-least-power/\"]],[\"a\",[\"href\",\"https://openlayers.org/\"]],[\"a\",[\"href\",\"https://developers.google.com/maps/documentation/javascript/tutorial\"]],[\"a\",[\"href\",\"https://www.mapbox.com/mapbox-gl-js/api/\"]],[\"a\",[\"href\",\"https://www.mapbox.com/help/define-mapbox-js/\"]],[\"a\",[\"href\",\"https://www.mapbox.com/mapbox-studio/\"]],[\"a\",[\"href\",\"https://www.mapbox.com/geocoding/\"]],[\"a\",[\"href\",\"https://leafletjs.com/\"]],[\"a\",[\"href\",\"http://ledeprogram.com/2015/absolutely-everything-you-need-to-know-about-mapping-tools/\"]],[\"a\",[\"href\",\"https://carto.com/\"]],[\"a\",[\"href\",\"https://github.com/jsoma/tabletop\"]],[\"code\"],[\"a\",[\"href\",\"https://docs.google.com/spreadsheets/d/1WyZNokrgj5NmbyYrRIOQDa2mZ0_SEdbjBohR2RmKXp8/edit?usp=sharing\"]],[\"a\",[\"href\",\"https://docs.google.com/spreadsheets/d/1p9pdXDgaLLVFj1agny5m1Y5gHSeRYJP-K0hrENLkfJo/edit?usp=sharing\"]],[\"a\",[\"href\",\"http://leaflet-extras.github.io/leaflet-providers/preview/\"]],[\"a\",[\"href\",\"https://macwright.org/2015/03/23/geojson-second-bite.html#featurecollection\"]],[\"a\",[\"href\",\"https://rdrn.me/leaflet-gsheets/leaflet-gsheets.html\"]]],\"sections\":[[1,\"p\",[[0,[0],0,\"I wrote another post \"],[0,[1],1,\"here\"],[0,[],1,\", outlining how this can be achieved without stepping out of a Python environment.\"]]],[1,\"p\",[[0,[],0,\"I love working with Python, but as soon as you want to put something online, JavaScript's ability to process in the browser is a clear winner. For one, you can have statically served HTML files performing complex tasks, whereas with Python you'd need a cloud instance running and a system for communicating between front- and back-end.\"]]],[1,\"p\",[[0,[],0,\"In this post I'm going to go through making a web map in JavaScript that pulls data from Google Sheets – where non-coders can easily make updates. This seems to be a common request and something that is not well covered by the various GUI solutions available. There is a \"],[0,[2],1,\"Data Visualization for All\"],[0,[],0,\" guide, but it didn't seem to work well (potentially due to changes in Google's API) and is overly complex.\"]]],[1,\"p\",[[0,[0],0,\"Skip the first two sections if you just want the juicy stuff, or go straight to the \"],[0,[3],1,\"repo\"],[0,[],1,\".\"]]],[1,\"h3\",[[0,[],0,\"Client-side programming\"]]],[1,\"p\",[[0,[],0,\"JavaScript is unique in being used on both the client- and server-sides of a web application. This means it can run directly in a user's browser without anything happening on the server, but can also be used on the back-end (via \"],[0,[4],1,\"Node.js\"],[0,[],0,\") for moving data around and doing the heavy lifting. For this example, I'm basically taking advantage of the user's computer to do the processing, so that I don't have to pay \"],[0,[5],1,\"Amazon\"],[0,[],0,\"/\"],[0,[5],1,\"Google\"],[0,[],0,\"/\"],[0,[6],1,\"Microsoft\"],[0,[],0,\" to do it for me on a cloud instance. This dual nature of JavaScript is one of the reasons for its booming popularity in web development.\"]]],[1,\"h3\",[[0,[],0,\"Mapping libraries available in JavaScript\"]]],[1,\"p\",[[0,[],0,\"Another reason for JavaScript's ubiquity is the endless variety of libraries available, and the ease with which these can be used, thanks, in part, to \"],[0,[7],1,\"Atwood's Law\"],[0,[],0,\":\"]]],[1,\"blockquote\",[[0,[],0,\"any application that \"],[0,[0],1,\"can\"],[0,[],0,\" be written in JavaScript, \"],[0,[0],1,\"will\"],[0,[],0,\" eventually be written in JavaScript\"]]],[1,\"p\",[[0,[],0,\"As for web mapping, there are a few obvious choices:\"]]],[3,\"ul\",[[[0,[8],1,\"OpenLayers\"],[0,[],0,\" – the most mature and powerful option, but also heavy and quite complex to use\"]],[[0,[9],1,\"Google Maps JavaScript API\"],[0,[],0,\" – limited basemap options and it's closed source (noting the irony that this post is all about Google Sheets)\"]],[[0,[10],1,\"Mapbox GL JS\"],[0,[],0,\" (or the older \"],[0,[11],1,\"Mapbox.js\"],[0,[],0,\") – great for integrating with \"],[0,[12],1,\"Mapbox Studio\"],[0,[],0,\" (designing basemaps) and their \"],[0,[13],1,\"geocoding\"],[0,[],0,\" service\"]],[[0,[14],1,\"Leaflet\"],[0,[],0,\" – light-weight, well-documented and easy to use for simple projects – goldilocks!\"]]]],[1,\"p\",[[0,[],0,\"You can read a more complete overview \"],[0,[15],1,\"here\"],[0,[],0,\"; it's a bit out of date, but includes comparisons with non JavaScript solutions such as \"],[0,[16],1,\"Carto\"],[0,[],0,\" (not cheap, unfortunately). \"]]],[1,\"h3\",[[0,[],0,\"Pulling data from Google Sheets\"]]],[1,\"p\",[[0,[0],0,\"In all the code excerpts, I'm stripping it to the bare essentials for readability. The full code is available at the \"],[0,[3],1,\"repo\"],[0,[],1,\".\"]]],[1,\"p\",[[0,[],0,\"To make maps from Google Sheets, we first need to get data \"],[0,[0],1,\"from \"],[0,[],0,\"Google Sheets. This is made exceedingly easy by \"],[0,[17],1,\"Tabletop.js\"],[0,[],0,\", a simple library for pulling in entire sheets as JSON objects. This is done in a few lines of code:\"]]],[10,0],[1,\"p\",[[0,[],0,\"You just need to get the public sharing link from your Sheet (follow the instructions at the Tabletop.js repo) and assign it to \"],[0,[18],1,\"sheetsUrl\"],[0,[],0,\" and you're done! \"]]],[1,\"p\",[[0,[],0,\"The data I pulled in for this web map was two separate tables, which you can preview \"],[0,[19],1,\"here\"],[0,[],0,\" and \"],[0,[20],1,\"here\"],[0,[],0,\". The first has simple \"],[0,[18],1,\"lat\"],[0,[],0,\" and \"],[0,[18],1,\"long\"],[0,[],0,\" coordinates for a few points, while the second has a more complicated \"],[0,[18],1,\"geometry\"],[0,[],0,\" column with polygon representations of each US state. In addition they each have extra columns with more information.\"]]],[1,\"h3\",[[0,[],0,\"Putting it together for an easy web map\"]]],[1,\"p\",[[0,[],0,\"My objective for this web map was to show these point and polygon items on a map of the US, with pop-ups for each element showing additional information. With a few more steps, it's easy to style each element based on other columns in the data.\"]]],[1,\"p\",[[0,[],0,\"Firstly, let's create a basic HTML file to hold our map. The example below provides the bare minimum of importing Tabletop.js, Leaflet.js and the Leaflet CSS styling. It then creates a \"],[0,[18],1,\"div\"],[0,[],0,\" with \"],[0,[18],1,\"id=\\\"map\\\"\"],[0,[],0,\", which is where our map will go, and then imports \"],[0,[18],1,\"leaflet-example.js\"],[0,[],0,\", which is where our new JavaScript code goes.\"]]],[10,1],[1,\"p\",[[0,[],0,\"With that set up, let's create a Leaflet map and insert it into our \"],[0,[18],1,\"div\"],[0,[],0,\", and add a beautiful basemap (basically a background map). A number of basemap options are demoed \"],[0,[21],1,\"here\"],[0,[],0,\" – just copy the provided URL into \"],[0,[18],1,\"baseMapURL\"],[0,[],0,\" in the code below (and add the suggested attributions).\"]]],[10,2],[1,\"p\",[[0,[],0,\"Next we need to add things to the map! The points are easier, and we can add them by simply looping through each item in the JSON and adding a Leaflet \"],[0,[18],1,\"marker\"],[0,[],0,\". This function is called by the \"],[0,[18],1,\"init()\"],[0,[],0,\" function from further up, once the data has been retrieved from Google Sheets.\"]]],[10,3],[1,\"p\",[[0,[],0,\"The polygons are slightly more complicated, as Leaflet needs a \"],[0,[22],1,\"GeoJSON\"],[0,[],0,\" object to represent them. So in a new function like the previous one (also called by the \"],[0,[18],1,\"init()\"],[0,[],0,\" function), we have the following code to create a single GeoJSON containing all of our polygons.\"]]],[10,4],[1,\"p\",[[0,[],0,\"This sets up an empty GeoJSON and then loops through each element in \"],[0,[18],1,\"data\"],[0,[],0,\" and inserts the coordinates and names as \"],[0,[18],1,\"Feature\"],[0,[],0,\" elements within the GeoJSON. With this set up, it's just a few lines to add this new object to our Leaflet map. The lines below can be added at the bottom of the \"],[0,[18],1,\"addPolygon\"],[0,[],0,\" function for simplicity.\"]]],[10,5],[1,\"p\",[[0,[],0,\"As for the points further up, this includes the code to add a popup, but nothing on styling. That's probably a post for another day, but you can have a look at the \"],[0,[3],1,\"repo\"],[0,[],0,\" if you want to see what I used for this example.\"]]],[1,\"p\",[[0,[],0,\"And we're done! The result (with styling) is shown below, or click \"],[0,[23],1,\"here\"],[0,[],0,\" to see it full screen. Every time a user loads this map in their browser, it will automatically hop over to the specified Google Sheets and pull the latest data to display it.\"]]],[10,6],[1,\"p\",[]]]}",
                        "html": "<p><em>I wrote another post <a href=\"https://rdrn.me/python-mapping-automatic-updating/\">here</a>, outlining how this can be achieved without stepping out of a Python environment.</em></p><p>I love working with Python, but as soon as you want to put something online, JavaScript's ability to process in the browser is a clear winner. For one, you can have statically served HTML files performing complex tasks, whereas with Python you'd need a cloud instance running and a system for communicating between front- and back-end.</p><p>In this post I'm going to go through making a web map in JavaScript that pulls data from Google Sheets – where non-coders can easily make updates. This seems to be a common request and something that is not well covered by the various GUI solutions available. There is a <a href=\"https://www.datavizforall.org/leaflet/with-google-sheets/\">Data Visualization for All</a> guide, but it didn't seem to work well (potentially due to changes in Google's API) and is overly complex.</p><p><em>Skip the first two sections if you just want the juicy stuff, or go straight to the <a href=\"https://github.com/carderne/leaflet-gsheets\">repo</a>.</em></p><h3 id=\"client-side-programming\">Client-side programming</h3><p>JavaScript is unique in being used on both the client- and server-sides of a web application. This means it can run directly in a user's browser without anything happening on the server, but can also be used on the back-end (via <a href=\"https://nodejs.org/\">Node.js</a>) for moving data around and doing the heavy lifting. For this example, I'm basically taking advantage of the user's computer to do the processing, so that I don't have to pay <a href=\"https://aws.amazon.com/\">Amazon</a>/<a href=\"https://aws.amazon.com/\">Google</a>/<a href=\"https://azure.microsoft.com/\">Microsoft</a> to do it for me on a cloud instance. This dual nature of JavaScript is one of the reasons for its booming popularity in web development.</p><h3 id=\"mapping-libraries-available-in-javascript\">Mapping libraries available in JavaScript</h3><p>Another reason for JavaScript's ubiquity is the endless variety of libraries available, and the ease with which these can be used, thanks, in part, to <a href=\"https://blog.codinghorror.com/the-principle-of-least-power/\">Atwood's Law</a>:</p><blockquote>any application that <em>can</em> be written in JavaScript, <em>will</em> eventually be written in JavaScript</blockquote><p>As for web mapping, there are a few obvious choices:</p><ul><li><a href=\"https://openlayers.org/\">OpenLayers</a> – the most mature and powerful option, but also heavy and quite complex to use</li><li><a href=\"https://developers.google.com/maps/documentation/javascript/tutorial\">Google Maps JavaScript API</a> – limited basemap options and it's closed source (noting the irony that this post is all about Google Sheets)</li><li><a href=\"https://www.mapbox.com/mapbox-gl-js/api/\">Mapbox GL JS</a> (or the older <a href=\"https://www.mapbox.com/help/define-mapbox-js/\">Mapbox.js</a>) – great for integrating with <a href=\"https://www.mapbox.com/mapbox-studio/\">Mapbox Studio</a> (designing basemaps) and their <a href=\"https://www.mapbox.com/geocoding/\">geocoding</a> service</li><li><a href=\"https://leafletjs.com/\">Leaflet</a> – light-weight, well-documented and easy to use for simple projects – goldilocks!</li></ul><p>You can read a more complete overview <a href=\"http://ledeprogram.com/2015/absolutely-everything-you-need-to-know-about-mapping-tools/\">here</a>; it's a bit out of date, but includes comparisons with non JavaScript solutions such as <a href=\"https://carto.com/\">Carto</a> (not cheap, unfortunately). </p><h3 id=\"pulling-data-from-google-sheets\">Pulling data from Google Sheets</h3><p><em>In all the code excerpts, I'm stripping it to the bare essentials for readability. The full code is available at the <a href=\"https://github.com/carderne/leaflet-gsheets\">repo</a>.</em></p><p>To make maps from Google Sheets, we first need to get data <em>from </em>Google Sheets. This is made exceedingly easy by <a href=\"https://github.com/jsoma/tabletop\">Tabletop.js</a>, a simple library for pulling in entire sheets as JSON objects. This is done in a few lines of code:</p><pre><code class=\"language-JavaScript\">function init() {\n    Tabletop.init({\n        key: sheetsUrl,\n        callback: myFunction,\n        simpleSheet: true\n    })\n}\n\nwindow.addEventListener('DOMContentLoaded', init)\n\nfunction myFunction(data, tabletop) {\n    console.log(data);\n}\n</code></pre>\n<p>You just need to get the public sharing link from your Sheet (follow the instructions at the Tabletop.js repo) and assign it to <code>sheetsUrl</code> and you're done! </p><p>The data I pulled in for this web map was two separate tables, which you can preview <a href=\"https://docs.google.com/spreadsheets/d/1WyZNokrgj5NmbyYrRIOQDa2mZ0_SEdbjBohR2RmKXp8/edit?usp=sharing\">here</a> and <a href=\"https://docs.google.com/spreadsheets/d/1p9pdXDgaLLVFj1agny5m1Y5gHSeRYJP-K0hrENLkfJo/edit?usp=sharing\">here</a>. The first has simple <code>lat</code> and <code>long</code> coordinates for a few points, while the second has a more complicated <code>geometry</code> column with polygon representations of each US state. In addition they each have extra columns with more information.</p><h3 id=\"putting-it-together-for-an-easy-web-map\">Putting it together for an easy web map</h3><p>My objective for this web map was to show these point and polygon items on a map of the US, with pop-ups for each element showing additional information. With a few more steps, it's easy to style each element based on other columns in the data.</p><p>Firstly, let's create a basic HTML file to hold our map. The example below provides the bare minimum of importing Tabletop.js, Leaflet.js and the Leaflet CSS styling. It then creates a <code>div</code> with <code>id=\"map\"</code>, which is where our map will go, and then imports <code>leaflet-example.js</code>, which is where our new JavaScript code goes.</p><pre><code class=\"language-HTML\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/leaflet@1.3.4/dist/leaflet.css&quot;/&gt;\n    &lt;script src=&quot;https://unpkg.com/leaflet@1.3.4/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div id=&quot;map&quot;&gt;&lt;/div&gt;\n    &lt;script type=&quot;text/javascript&quot; src=&quot;leaflet-example.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>With that set up, let's create a Leaflet map and insert it into our <code>div</code>, and add a beautiful basemap (basically a background map). A number of basemap options are demoed <a href=\"http://leaflet-extras.github.io/leaflet-providers/preview/\">here</a> – just copy the provided URL into <code>baseMapURL</code> in the code below (and add the suggested attributions).</p><pre><code class=\"language-JavaScript\">var map = L.map('map-div').setView([startLat, startLong], startZoom);\nvar basemap = L.tileLayer(baseMapURL, {\n\tattribution: attributionText\n});\nbasemap.addTo(map);\n</code></pre>\n<p>Next we need to add things to the map! The points are easier, and we can add them by simply looping through each item in the JSON and adding a Leaflet <code>marker</code>. This function is called by the <code>init()</code> function from further up, once the data has been retrieved from Google Sheets.</p><pre><code class=\"language-JavaScript\">function addPoints(data, tabletop) {\n    for (var row in data) {\n    \tvar marker = L.marker([\n            data[row].lat,\n            data[row].long\n        ]).addTo(map);\n      \tmarker.bindPopup(data[row].category);\n    }\n}\n</code></pre>\n<p>The polygons are slightly more complicated, as Leaflet needs a <a href=\"https://macwright.org/2015/03/23/geojson-second-bite.html#featurecollection\">GeoJSON</a> object to represent them. So in a new function like the previous one (also called by the <code>init()</code> function), we have the following code to create a single GeoJSON containing all of our polygons.</p><pre><code class=\"language-JavaScript\">function addPolygons(data, tabletop) {\n    // the empty GeoJSON waiting to be populated with features\n    var polygons = {\n        &quot;type&quot;: &quot;FeatureCollection&quot;,\n        &quot;features&quot;: []\n    }\n\n    for (var row in data) {\n        // JSON.parse converts the geometry strings into JSON objects\n        var coords = JSON.parse(data[row].geometry);\n\n        polygons.features.push({\n            &quot;type&quot;: &quot;Feature&quot;,\n            &quot;geometry&quot;: {\n                &quot;type&quot;: &quot;MultiPolygon&quot;,\n                &quot;coordinates&quot;: coords\n            },\n            &quot;properties&quot;: {\n                &quot;name&quot;: data[row].name,\n            }\n        });\n    }\n}\n</code></pre>\n<p>This sets up an empty GeoJSON and then loops through each element in <code>data</code> and inserts the coordinates and names as <code>Feature</code> elements within the GeoJSON. With this set up, it's just a few lines to add this new object to our Leaflet map. The lines below can be added at the bottom of the <code>addPolygon</code> function for simplicity.</p><pre><code class=\"language-JavaScript\">polygonMarkers = L.geoJSON(polygons, {\n    onEachFeature: function (feature, layer) {\n        layer.bindPopup(feature.properties.name);\n    },\n}).addTo(map);\n</code></pre>\n<p>As for the points further up, this includes the code to add a popup, but nothing on styling. That's probably a post for another day, but you can have a look at the <a href=\"https://github.com/carderne/leaflet-gsheets\">repo</a> if you want to see what I used for this example.</p><p>And we're done! The result (with styling) is shown below, or click <a href=\"https://rdrn.me/leaflet-gsheets/leaflet-gsheets.html\">here</a> to see it full screen. Every time a user loads this map in their browser, it will automatically hop over to the specified Google Sheets and pull the latest data to display it.</p><iframe src=\"https://rdrn.me/leaflet-maps-google-sheets/leaflet-gsheets-nosidebar.html\" style=\"width: 100%; height: 600px\" name=\"internal\" frameBorder=\"0\"></iframe>",
                        "comment_id": "5bc9f471fb49665c9058d756",
                        "markdown": "I wrote another post here [https://rdrn.me/python-mapping-automatic-updating/],\noutlining how this can be achieved without stepping out of a Python environment.\n\nI love working with Python, but as soon as you want to put something online,\nJavaScript's ability to process in the browser is a clear winner. For one, you\ncan have statically served HTML files performing complex tasks, whereas with\nPython you'd need a cloud instance running and a system for communicating\nbetween front- and back-end.\n\nIn this post I'm going to go through making a web map in JavaScript that pulls\ndata from Google Sheets – where non-coders can easily make updates. This seems\nto be a common request and something that is not well covered by the various GUI\nsolutions available. There is a Data Visualization for All\n[https://www.datavizforall.org/leaflet/with-google-sheets/]  guide, but it\ndidn't seem to work well (potentially due to changes in Google's API) and is\noverly complex.\n\nSkip the first two sections if you just want the juicy stuff, or go straight to\nthe repo [https://github.com/carderne/leaflet-gsheets].\n\nClient-side programming\nJavaScript is unique in being used on both the client- and server-sides of a web\napplication. This means it can run directly in a user's browser without anything\nhappening on the server, but can also be used on the back-end (via Node.js\n[https://nodejs.org/]) for moving data around and doing the heavy lifting. For\nthis example, I'm basically taking advantage of the user's computer to do the\nprocessing, so that I don't have to pay Amazon [https://aws.amazon.com/]/Google\n[https://aws.amazon.com/]/Microsoft [https://azure.microsoft.com/]  to do it for\nme on a cloud instance. This dual nature of JavaScript is one of the reasons for\nits booming popularity in web development.\n\nMapping libraries available in JavaScript\nAnother reason for JavaScript's ubiquity is the endless variety of libraries\navailable, and the ease with which these can be used, thanks, in part, to \nAtwood's Law [https://blog.codinghorror.com/the-principle-of-least-power/]:\n\nany application that can  be written in JavaScript, will  eventually be written\nin JavaScriptAs for web mapping, there are a few obvious choices:\n\n * OpenLayers [https://openlayers.org/]  – the most mature and powerful option,\n   but also heavy and quite complex to use\n * Google Maps JavaScript API\n   [https://developers.google.com/maps/documentation/javascript/tutorial]  –\n   limited basemap options and it's closed source (noting the irony that this\n   post is all about Google Sheets)\n * Mapbox GL JS [https://www.mapbox.com/mapbox-gl-js/api/]  (or the older \n   Mapbox.js [https://www.mapbox.com/help/define-mapbox-js/]) – great for\n   integrating with Mapbox Studio [https://www.mapbox.com/mapbox-studio/] \n   (designing basemaps) and their geocoding [https://www.mapbox.com/geocoding/] \n   service\n * Leaflet [https://leafletjs.com/]  – light-weight, well-documented and easy to\n   use for simple projects – goldilocks!\n\nYou can read a more complete overview here\n[http://ledeprogram.com/2015/absolutely-everything-you-need-to-know-about-mapping-tools/]\n; it's a bit out of date, but includes comparisons with non JavaScript solutions\nsuch as Carto [https://carto.com/]  (not cheap, unfortunately). \n\nPulling data from Google Sheets\nIn all the code excerpts, I'm stripping it to the bare essentials for\nreadability. The full code is available at the repo\n[https://github.com/carderne/leaflet-gsheets].\n\nTo make maps from Google Sheets, we first need to get data from Google Sheets.\nThis is made exceedingly easy by Tabletop.js [https://github.com/jsoma/tabletop]\n, a simple library for pulling in entire sheets as JSON objects. This is done in\na few lines of code:\n\nfunction init() {\n    Tabletop.init({\n        key: sheetsUrl,\n        callback: myFunction,\n        simpleSheet: true\n    })\n}\n\nwindow.addEventListener('DOMContentLoaded', init)\n\nfunction myFunction(data, tabletop) {\n    console.log(data);\n}\n\n\nYou just need to get the public sharing link from your Sheet (follow the\ninstructions at the Tabletop.js repo) and assign it to sheetsUrl  and you're\ndone! \n\nThe data I pulled in for this web map was two separate tables, which you can\npreview here\n[https://docs.google.com/spreadsheets/d/1WyZNokrgj5NmbyYrRIOQDa2mZ0_SEdbjBohR2RmKXp8/edit?usp=sharing] \n and here\n[https://docs.google.com/spreadsheets/d/1p9pdXDgaLLVFj1agny5m1Y5gHSeRYJP-K0hrENLkfJo/edit?usp=sharing]\n. The first has simple lat  and long  coordinates for a few points, while the\nsecond has a more complicated geometry  column with polygon representations of\neach US state. In addition they each have extra columns with more information.\n\nPutting it together for an easy web map\nMy objective for this web map was to show these point and polygon items on a map\nof the US, with pop-ups for each element showing additional information. With a\nfew more steps, it's easy to style each element based on other columns in the\ndata.\n\nFirstly, let's create a basic HTML file to hold our map. The example below\nprovides the bare minimum of importing Tabletop.js, Leaflet.js and the Leaflet\nCSS styling. It then creates a div  with id=\"map\", which is where our map will\ngo, and then imports leaflet-example.js, which is where our new JavaScript code\ngoes.\n\n<!DOCTYPE html>\n<html>\n<head>\n    <script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.3.4/dist/leaflet.css\"/>\n    <script src=\"https://unpkg.com/leaflet@1.3.4/dist/leaflet.js\"></script>\n</head>\n<body>\n    <div id=\"map\"></div>\n    <script type=\"text/javascript\" src=\"leaflet-example.js\"></script>\n</body>\n</html>\n\n\nWith that set up, let's create a Leaflet map and insert it into our div, and add\na beautiful basemap (basically a background map). A number of basemap options\nare demoed here [http://leaflet-extras.github.io/leaflet-providers/preview/]  –\njust copy the provided URL into baseMapURL  in the code below (and add the\nsuggested attributions).\n\nvar map = L.map('map-div').setView([startLat, startLong], startZoom);\nvar basemap = L.tileLayer(baseMapURL, {\n\tattribution: attributionText\n});\nbasemap.addTo(map);\n\n\nNext we need to add things to the map! The points are easier, and we can add\nthem by simply looping through each item in the JSON and adding a Leaflet marker\n. This function is called by the init()  function from further up, once the data\nhas been retrieved from Google Sheets.\n\nfunction addPoints(data, tabletop) {\n    for (var row in data) {\n    \tvar marker = L.marker([\n            data[row].lat,\n            data[row].long\n        ]).addTo(map);\n      \tmarker.bindPopup(data[row].category);\n    }\n}\n\n\nThe polygons are slightly more complicated, as Leaflet needs a GeoJSON  object\nto represent them. So in a new function like the previous one (also called by\nthe init()  function), we have the following code to create a single GeoJSON\ncontaining all of our polygons.\n\nfunction addPolygons(data, tabletop) {\n    // the empty GeoJSON waiting to be populated with features\n    var polygons = {\n        \"type\": \"FeatureCollection\",\n        \"features\": []\n    }\n\n    for (var row in data) {\n        // JSON.parse converts the geometry strings into JSON objects\n        var coords = JSON.parse(data[row].geometry);\n\n        polygons.features.push({\n            \"type\": \"Feature\",\n            \"geometry\": {\n                \"type\": \"MultiPolygon\",\n                \"coordinates\": coords\n            },\n            \"properties\": {\n                \"name\": data[row].name,\n            }\n        });\n    }\n}\n\n\nThis sets up an empty GeoJSON and then loops through each element in data  and\ninserts the coordinates and names as Feature  elements within the GeoJSON. With\nthis set up, it's just a few lines to add this new object to our Leaflet map.\nThe lines below can be added at the bottom of the addPolygon  function for\nsimplicity.\n\npolygonMarkers = L.geoJSON(polygons, {\n    onEachFeature: function (feature, layer) {\n        layer.bindPopup(feature.properties.name);\n    },\n}).addTo(map);\n\n\nAs for the points further up, this includes the code to add a popup, but nothing\non styling. That's probably a post for another day, but you can have a look at\nthe repo [https://github.com/carderne/leaflet-gsheets]  if you want to see what\nI used for this example.\n\nAnd we're done! The result (with styling) is shown below, or click here\n[https://rdrn.me/leaflet-gsheets/leaflet-gsheets.html]  to see it full screen.\nEvery time a user loads this map in their browser, it will automatically hop\nover to the specified Google Sheets and pull the latest data to display it.",
                        "feature_image": null,
                        "featured": 0,
                        "page": 0,
                        "status": "published",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": "Leaflet maps with data from Google Sheets",
                        "meta_description": "In this post I'm going to go through making a web map in JavaScript that pulls data from Google Sheets – where non-coders can easily make updates.",
                        "author_id": "1",
                        "created_at": "2018-10-19 15:12:49",
                        "created_by": "1",
                        "updated_at": "2018-10-23 14:08:35",
                        "updated_by": "1",
                        "published_at": "2018-10-19 17:51:19",
                        "published_by": "1",
                        "custom_excerpt": "I love working with Python, but as soon as you want to put something online, JavaScript's ability to process in the browser is a clear winner. In this post I'm going to go through making a web map in JavaScript that pulls data from Google Sheets – where non-coders can easily make updates.",
                        "codeinjection_head": "",
                        "codeinjection_foot": "",
                        "og_image": null,
                        "og_title": null,
                        "og_description": null,
                        "twitter_image": null,
                        "twitter_title": null,
                        "twitter_description": null,
                        "custom_template": null
                    }
                ],
                "users": [
                    {
                        "id": "1",
                        "name": "Chris Arderne",
                        "slug": "chris",
                        "ghost_auth_access_token": null,
                        "ghost_auth_id": null,
                        "password": "$2a$10$ImM7dqlGczqWk2gNFRP0tuXh6I0nTDxFbwv57tNEqDOAkcC/odICa",
                        "email": "chris@rdrn.me",
                        "profile_image": null,
                        "cover_image": null,
                        "bio": "Hello, I'm Chris!",
                        "website": null,
                        "location": "Barcelona",
                        "facebook": null,
                        "twitter": null,
                        "accessibility": null,
                        "status": "active",
                        "locale": null,
                        "visibility": "public",
                        "meta_title": null,
                        "meta_description": null,
                        "tour": "[\"static-post\",\"featured-post\",\"getting-started\",\"upload-a-theme\"]",
                        "last_seen": "2018-12-17 12:25:43",
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-12-17 12:25:43",
                        "updated_by": "1"
                    }
                ],
                "posts_authors": [
                    {
                        "id": "5bbc64227cc70a140e7fd10f",
                        "post_id": "5bbc64227cc70a140e7fd10e",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbc64bb7cc70a140e7fd115",
                        "post_id": "5bbc64bb7cc70a140e7fd114",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbc65057cc70a140e7fd119",
                        "post_id": "5bbc65057cc70a140e7fd118",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbc65157cc70a140e7fd11b",
                        "post_id": "5bbc65157cc70a140e7fd11a",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbc65227cc70a140e7fd11d",
                        "post_id": "5bbc65227cc70a140e7fd11c",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbc652a7cc70a140e7fd11f",
                        "post_id": "5bbc652a7cc70a140e7fd11e",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbc65427cc70a140e7fd123",
                        "post_id": "5bbc65427cc70a140e7fd122",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbc65477cc70a140e7fd125",
                        "post_id": "5bbc65477cc70a140e7fd124",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbc65567cc70a140e7fd127",
                        "post_id": "5bbc65567cc70a140e7fd126",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbde820ec5d5922fde79bf2",
                        "post_id": "5bbde820ec5d5922fde79bf1",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbf7fac51a3090cf9b3242b",
                        "post_id": "5bbf7fac51a3090cf9b3242a",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc07fdaf6b2f324744f5438",
                        "post_id": "5bc07fdaf6b2f324744f5437",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc07fe4f6b2f324744f543a",
                        "post_id": "5bc07fe4f6b2f324744f5439",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc1a905b95e280b5623ca75",
                        "post_id": "5bc1a905b95e280b5623ca74",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc2ec443e94a80ccd4f5548",
                        "post_id": "5bc2ec443e94a80ccd4f5547",
                        "author_id": "1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc9f471fb49665c9058d757",
                        "post_id": "5bc9f471fb49665c9058d756",
                        "author_id": "1",
                        "sort_order": 0
                    }
                ],
                "roles": [
                    {
                        "id": "5bbb99543fbc331a680e6a37",
                        "name": "Administrator",
                        "description": "Administrators",
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a38",
                        "name": "Editor",
                        "description": "Editors",
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a39",
                        "name": "Author",
                        "description": "Authors",
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a3a",
                        "name": "Contributor",
                        "description": "Contributors",
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a3b",
                        "name": "Owner",
                        "description": "Blog Owner",
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a3c",
                        "name": "Admin Integration",
                        "description": "External Apps",
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    }
                ],
                "roles_users": [
                    {
                        "id": "5bbb99573fbc331a680e6a7c",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "user_id": "5951f5fca366002ebd5dbef7"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b48",
                        "role_id": "5bbb99543fbc331a680e6a3b",
                        "user_id": "1"
                    }
                ],
                "permissions": [
                    {
                        "id": "5bbb99543fbc331a680e6a3d",
                        "name": "Export database",
                        "object_type": "db",
                        "action_type": "exportContent",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a3e",
                        "name": "Import database",
                        "object_type": "db",
                        "action_type": "importContent",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a3f",
                        "name": "Delete all content",
                        "object_type": "db",
                        "action_type": "deleteAllContent",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a40",
                        "name": "Send mail",
                        "object_type": "mail",
                        "action_type": "send",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a41",
                        "name": "Browse notifications",
                        "object_type": "notification",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a42",
                        "name": "Add notifications",
                        "object_type": "notification",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a43",
                        "name": "Delete notifications",
                        "object_type": "notification",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a44",
                        "name": "Browse posts",
                        "object_type": "post",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a45",
                        "name": "Read posts",
                        "object_type": "post",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a46",
                        "name": "Edit posts",
                        "object_type": "post",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a47",
                        "name": "Add posts",
                        "object_type": "post",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a48",
                        "name": "Delete posts",
                        "object_type": "post",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a49",
                        "name": "Browse settings",
                        "object_type": "setting",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a4a",
                        "name": "Read settings",
                        "object_type": "setting",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a4b",
                        "name": "Edit settings",
                        "object_type": "setting",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99543fbc331a680e6a4c",
                        "name": "Generate slugs",
                        "object_type": "slug",
                        "action_type": "generate",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:20",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:20",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a4d",
                        "name": "Browse tags",
                        "object_type": "tag",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a4e",
                        "name": "Read tags",
                        "object_type": "tag",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a4f",
                        "name": "Edit tags",
                        "object_type": "tag",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a50",
                        "name": "Add tags",
                        "object_type": "tag",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a51",
                        "name": "Delete tags",
                        "object_type": "tag",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a52",
                        "name": "Browse themes",
                        "object_type": "theme",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a53",
                        "name": "Edit themes",
                        "object_type": "theme",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a54",
                        "name": "Activate themes",
                        "object_type": "theme",
                        "action_type": "activate",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a55",
                        "name": "Upload themes",
                        "object_type": "theme",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a56",
                        "name": "Download themes",
                        "object_type": "theme",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a57",
                        "name": "Delete themes",
                        "object_type": "theme",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a58",
                        "name": "Browse users",
                        "object_type": "user",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a59",
                        "name": "Read users",
                        "object_type": "user",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a5a",
                        "name": "Edit users",
                        "object_type": "user",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a5b",
                        "name": "Add users",
                        "object_type": "user",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a5c",
                        "name": "Delete users",
                        "object_type": "user",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a5d",
                        "name": "Assign a role",
                        "object_type": "role",
                        "action_type": "assign",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a5e",
                        "name": "Browse roles",
                        "object_type": "role",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a5f",
                        "name": "Browse clients",
                        "object_type": "client",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a60",
                        "name": "Read clients",
                        "object_type": "client",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a61",
                        "name": "Edit clients",
                        "object_type": "client",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a62",
                        "name": "Add clients",
                        "object_type": "client",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a63",
                        "name": "Delete clients",
                        "object_type": "client",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a64",
                        "name": "Browse subscribers",
                        "object_type": "subscriber",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a65",
                        "name": "Read subscribers",
                        "object_type": "subscriber",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a66",
                        "name": "Edit subscribers",
                        "object_type": "subscriber",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a67",
                        "name": "Add subscribers",
                        "object_type": "subscriber",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a68",
                        "name": "Delete subscribers",
                        "object_type": "subscriber",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a69",
                        "name": "Browse invites",
                        "object_type": "invite",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a6a",
                        "name": "Read invites",
                        "object_type": "invite",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a6b",
                        "name": "Edit invites",
                        "object_type": "invite",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a6c",
                        "name": "Add invites",
                        "object_type": "invite",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a6d",
                        "name": "Delete invites",
                        "object_type": "invite",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a6e",
                        "name": "Download redirects",
                        "object_type": "redirect",
                        "action_type": "download",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a6f",
                        "name": "Upload redirects",
                        "object_type": "redirect",
                        "action_type": "upload",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a70",
                        "name": "Add webhooks",
                        "object_type": "webhook",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a71",
                        "name": "Delete webhooks",
                        "object_type": "webhook",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a72",
                        "name": "Browse integrations",
                        "object_type": "integration",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a73",
                        "name": "Read integrations",
                        "object_type": "integration",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a74",
                        "name": "Edit integrations",
                        "object_type": "integration",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a75",
                        "name": "Add integrations",
                        "object_type": "integration",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a76",
                        "name": "Delete integrations",
                        "object_type": "integration",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a77",
                        "name": "Browse API keys",
                        "object_type": "api_key",
                        "action_type": "browse",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a78",
                        "name": "Read API keys",
                        "object_type": "api_key",
                        "action_type": "read",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a79",
                        "name": "Edit API keys",
                        "object_type": "api_key",
                        "action_type": "edit",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a7a",
                        "name": "Add API keys",
                        "object_type": "api_key",
                        "action_type": "add",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99553fbc331a680e6a7b",
                        "name": "Delete API keys",
                        "object_type": "api_key",
                        "action_type": "destroy",
                        "object_id": null,
                        "created_at": "2018-10-08 17:52:21",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:21",
                        "updated_by": "1"
                    }
                ],
                "permissions_users": [],
                "permissions_roles": [
                    {
                        "id": "5bbb99583fbc331a680e6a8b",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a3d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a8d",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a3f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a8c",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a3e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a8e",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a40"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a8f",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a41"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a90",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a42"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a91",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a43"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a92",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a44"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a93",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a45"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a94",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a46"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a95",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a47"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a96",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a48"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a97",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a49"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a98",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a4a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a99",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a4b"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a9a",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99543fbc331a680e6a4c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a9b",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a4d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a9e",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a50"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a9f",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a51"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a9c",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a4e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6a9d",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a4f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa0",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a52"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa1",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a53"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa2",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a54"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa3",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a55"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa4",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a56"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa5",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a57"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa6",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a58"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa7",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a59"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa8",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a5a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aa9",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a5b"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aaa",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a5c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aab",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a5d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aac",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a5e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aad",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a5f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aae",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a60"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab0",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a62"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aaf",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a61"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab1",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a63"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab2",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a64"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab5",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a67"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab3",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a65"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab4",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a66"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab6",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a68"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab8",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a6a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6abb",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a6d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab9",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a6b"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ab7",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a69"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aba",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a6c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6abc",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a6e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6abd",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a6f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6abe",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a70"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6abf",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a71"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac0",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a72"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac1",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a73"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac2",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a74"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac3",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a75"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac4",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a76"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac5",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a77"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac6",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a78"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac7",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a79"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac8",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a7a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ac9",
                        "role_id": "5bbb99543fbc331a680e6a37",
                        "permission_id": "5bbb99553fbc331a680e6a7b"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aca",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a40"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6acb",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a41"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6acc",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a42"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6acd",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a43"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ace",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a44"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6acf",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a45"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad0",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a46"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad1",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a47"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad2",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a48"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad3",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a49"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad4",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a4a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad5",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a4b"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad6",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99543fbc331a680e6a4c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad7",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a4d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad8",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a4e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ad9",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a4f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ada",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a50"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6adb",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a51"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6adc",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a52"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6add",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a53"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ade",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a54"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6adf",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a55"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae0",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a56"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae1",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a57"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae2",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a58"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae3",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a59"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae4",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a5a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae5",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a5b"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae6",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a5c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae7",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a5d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae8",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a5e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6ae9",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a5f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aea",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a60"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aeb",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a61"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aec",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a62"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aed",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a63"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aee",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a64"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aef",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a65"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af0",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a66"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af1",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a67"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af2",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a68"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af3",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a69"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af4",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a6a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af5",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a6b"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af6",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a6c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af7",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a6d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af8",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a6e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6af9",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a6f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6afa",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a70"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6afb",
                        "role_id": "5bbb99543fbc331a680e6a3c",
                        "permission_id": "5bbb99553fbc331a680e6a71"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6afc",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99543fbc331a680e6a44"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b00",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99543fbc331a680e6a48"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6afd",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99543fbc331a680e6a45"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6afe",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99543fbc331a680e6a46"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6aff",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99543fbc331a680e6a47"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b01",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99543fbc331a680e6a49"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b02",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99543fbc331a680e6a4a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b03",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99543fbc331a680e6a4c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b04",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a4d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b05",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a4e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b08",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a51"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b07",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a50"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b06",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a4f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b09",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a58"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b0d",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a5c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b0a",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a59"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b0b",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a5a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b0c",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a5b"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b0e",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a5d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b0f",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a5e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b10",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a5f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b12",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a61"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b11",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a60"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b13",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a62"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b14",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a63"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b15",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a67"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b16",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a69"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b17",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a6a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b18",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a6b"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b19",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a6c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b1a",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a6d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b1b",
                        "role_id": "5bbb99543fbc331a680e6a38",
                        "permission_id": "5bbb99553fbc331a680e6a52"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b1c",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99543fbc331a680e6a44"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b1d",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99543fbc331a680e6a45"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b1e",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99543fbc331a680e6a47"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b1f",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99543fbc331a680e6a49"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b20",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99543fbc331a680e6a4a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b21",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99543fbc331a680e6a4c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b22",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a4d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b23",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a4e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b24",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a50"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b25",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a58"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b26",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a59"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b27",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a5e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b28",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a5f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b29",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a60"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b2a",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a61"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b2b",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a62"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b2c",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a63"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b2d",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a67"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b2e",
                        "role_id": "5bbb99543fbc331a680e6a39",
                        "permission_id": "5bbb99553fbc331a680e6a52"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b2f",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99543fbc331a680e6a44"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b30",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99543fbc331a680e6a45"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b31",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99543fbc331a680e6a47"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b32",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99543fbc331a680e6a49"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b33",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99543fbc331a680e6a4a"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b34",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99543fbc331a680e6a4c"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b35",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a4d"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b36",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a4e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b37",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a58"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b38",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a59"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b39",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a5e"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b3a",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a5f"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b3b",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a60"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b3c",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a61"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b3d",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a62"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b3e",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a63"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b3f",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a67"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b40",
                        "role_id": "5bbb99543fbc331a680e6a3a",
                        "permission_id": "5bbb99553fbc331a680e6a52"
                    }
                ],
                "permissions_apps": [],
                "settings": [
                    {
                        "id": "5bbb99583fbc331a680e6b49",
                        "key": "db_hash",
                        "value": "e32a14cd-0179-4d36-98b0-78cebedb84df",
                        "type": "core",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b4a",
                        "key": "next_update_check",
                        "value": "1545134498",
                        "type": "core",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-12-17 12:00:25",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b4b",
                        "key": "notifications",
                        "value": "[{\"dismissible\":true,\"location\":\"bottom\",\"status\":\"alert\",\"id\":\"0f22bef0-fd4b-11e8-b215-63c8b266247b\",\"custom\":false,\"createdAt\":\"2018-12-11T13:45:45.000Z\",\"type\":\"info\",\"top\":false,\"message\":\"Ghost <a href=\\\"https://github.com/TryGhost/Ghost/releases\\\">2.8.0</a> has been released, <a href=\\\"https://ghost.org/update/?v=2.2.0\\\">click here</a> to upgrade.\",\"seen\":false,\"addedAt\":\"2018-12-17T12:00:25.240Z\"}]",
                        "type": "core",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-12-17 12:00:25",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b4c",
                        "key": "title",
                        "value": "Chris Arderne",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-11 16:33:38",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b4d",
                        "key": "description",
                        "value": "A blog for adventurous trip reports, explorations of data and code, and sometimes even things from my day job.",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-23 08:40:33",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b4e",
                        "key": "logo",
                        "value": "/content/images/2018/10/face3.png",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-13 15:41:08",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b4f",
                        "key": "cover_image",
                        "value": "/content/images/2018/10/bg-2.jpg",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-09 08:23:44",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b50",
                        "key": "icon",
                        "value": "/content/images/2018/10/face4.png",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-13 15:41:15",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b51",
                        "key": "default_locale",
                        "value": "en",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b52",
                        "key": "active_timezone",
                        "value": "Etc/UTC",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b53",
                        "key": "force_i18n",
                        "value": "true",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b55",
                        "key": "amp",
                        "value": "false",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-09 08:08:57",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b56",
                        "key": "ghost_head",
                        "value": "",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b57",
                        "key": "ghost_foot",
                        "value": "",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b58",
                        "key": "facebook",
                        "value": "",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-09 08:13:17",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b59",
                        "key": "twitter",
                        "value": "",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-09 08:13:17",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b5a",
                        "key": "labs",
                        "value": "{\"publicAPI\": true}",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b5b",
                        "key": "navigation",
                        "value": "[{\"label\":\"Home\",\"url\":\"/\"},{\"label\":\"About me\",\"url\":\"/about/\"}]",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-19 17:54:14",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b5c",
                        "key": "slack",
                        "value": "[]",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-09 07:47:17",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b5d",
                        "key": "unsplash",
                        "value": "{\"isActive\":true}",
                        "type": "blog",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-09 07:47:17",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b5e",
                        "key": "active_theme",
                        "value": "crisp-narrow-master",
                        "type": "theme",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-13 20:08:31",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b5f",
                        "key": "active_apps",
                        "value": "[]",
                        "type": "app",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b60",
                        "key": "installed_apps",
                        "value": "[]",
                        "type": "app",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b61",
                        "key": "is_private",
                        "value": "false",
                        "type": "private",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-10 11:52:57",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b62",
                        "key": "password",
                        "value": "Kapgrom2",
                        "type": "private",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-09 07:47:17",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbb99583fbc331a680e6b63",
                        "key": "public_hash",
                        "value": "3399882f418d2e9e69124f5e776c4a",
                        "type": "private",
                        "created_at": "2018-10-08 17:52:24",
                        "created_by": "1",
                        "updated_at": "2018-10-08 17:52:24",
                        "updated_by": "1"
                    }
                ],
                "tags": [
                    {
                        "id": "5bbc64a67cc70a140e7fd111",
                        "name": "Mountains",
                        "slug": "mountains",
                        "description": null,
                        "feature_image": null,
                        "parent_id": null,
                        "visibility": "public",
                        "meta_title": null,
                        "meta_description": null,
                        "created_at": "2018-10-09 08:19:50",
                        "created_by": "1",
                        "updated_at": "2018-10-12 10:41:40",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbfb2a260d4832b1f2a91b1",
                        "name": "Outside",
                        "slug": "outside",
                        "description": null,
                        "feature_image": null,
                        "parent_id": null,
                        "visibility": "public",
                        "meta_title": null,
                        "meta_description": null,
                        "created_at": "2018-10-11 20:29:22",
                        "created_by": "1",
                        "updated_at": "2018-10-12 10:41:34",
                        "updated_by": "1"
                    },
                    {
                        "id": "5bbfb30e60d4832b1f2a91b5",
                        "name": "Inside",
                        "slug": "inside",
                        "description": null,
                        "feature_image": null,
                        "parent_id": null,
                        "visibility": "public",
                        "meta_title": null,
                        "meta_description": null,
                        "created_at": "2018-10-11 20:31:10",
                        "created_by": "1",
                        "updated_at": "2018-10-12 10:41:29",
                        "updated_by": "1"
                    }
                ],
                "posts_tags": [
                    {
                        "id": "5bbc64a67cc70a140e7fd113",
                        "post_id": "5bbc64227cc70a140e7fd10e",
                        "tag_id": "5bbc64a67cc70a140e7fd111",
                        "sort_order": 1
                    },
                    {
                        "id": "5bbc64eb7cc70a140e7fd117",
                        "post_id": "5bbc64bb7cc70a140e7fd114",
                        "tag_id": "5bbc64a67cc70a140e7fd111",
                        "sort_order": 1
                    },
                    {
                        "id": "5bbfb2a260d4832b1f2a91b2",
                        "post_id": "5bbc64bb7cc70a140e7fd114",
                        "tag_id": "5bbfb2a260d4832b1f2a91b1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbfb2b360d4832b1f2a91b3",
                        "post_id": "5bbf7fac51a3090cf9b3242a",
                        "tag_id": "5bbfb2a260d4832b1f2a91b1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bbfb2e760d4832b1f2a91b4",
                        "post_id": "5bbc64227cc70a140e7fd10e",
                        "tag_id": "5bbfb2a260d4832b1f2a91b1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc0611fc600bb0d54b5aad5",
                        "post_id": "5bbc652a7cc70a140e7fd11e",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc0617fc600bb0d54b5aad6",
                        "post_id": "5bbde820ec5d5922fde79bf1",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc089c8f6b2f324744f543b",
                        "post_id": "5bc07fe4f6b2f324744f5439",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc481ed81f0e7554c3d5604",
                        "post_id": "5bbc65227cc70a140e7fd11c",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc4885681f0e7554c3d5605",
                        "post_id": "5bc07fdaf6b2f324744f5437",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc4937d8095ca5f45fc92be",
                        "post_id": "5bbc65157cc70a140e7fd11a",
                        "tag_id": "5bbfb2a260d4832b1f2a91b1",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc4937d8095ca5f45fc92bf",
                        "post_id": "5bbc65157cc70a140e7fd11a",
                        "tag_id": "5bbc64a67cc70a140e7fd111",
                        "sort_order": 1
                    },
                    {
                        "id": "5bc494028095ca5f45fc92c0",
                        "post_id": "5bbc65057cc70a140e7fd118",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc494898095ca5f45fc92c1",
                        "post_id": "5bbc65427cc70a140e7fd122",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc4958f8095ca5f45fc92c3",
                        "post_id": "5bbc65477cc70a140e7fd124",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc495bb8095ca5f45fc92c4",
                        "post_id": "5bbc65567cc70a140e7fd126",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bc70adf19083e24444f04ef",
                        "post_id": "5bc2ec443e94a80ccd4f5547",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    },
                    {
                        "id": "5bca16e2fb49665c9058d75a",
                        "post_id": "5bc9f471fb49665c9058d756",
                        "tag_id": "5bbfb30e60d4832b1f2a91b5",
                        "sort_order": 0
                    }
                ],
                "apps": [],
                "app_settings": [],
                "app_fields": [],
                "subscribers": [],
                "invites": [],
                "brute": [
                    {
                        "key": "x6HsyWb9a2Dwa/d0X+zOBZazONBUUlqpjDUD5a906ao=",
                        "firstRequest": 1539351977686,
                        "lastRequest": 1545048048458,
                        "lifetime": 1557748848461,
                        "count": 2
                    },
                    {
                        "key": "cRPpHvdy8sfL5UFWTquKywpwNrBuEQ6gQngGed2hJr4=",
                        "firstRequest": 1545048029955,
                        "lastRequest": 1545049543077,
                        "lifetime": 1545053143079,
                        "count": 13
                    },
                    {
                        "key": "o1I0cDiGPjoN/oGEkkP3m4qt18hJKdFvTg2epFm2drY=",
                        "firstRequest": 1545048070815,
                        "lastRequest": 1545048811462,
                        "lifetime": 1545052411464,
                        "count": 3
                    },
                    {
                        "key": "72cSOKTHQiNHeNhKfYuMGWIvgZ3lPo0sLq4J+NTL+CY=",
                        "firstRequest": 1545048070919,
                        "lastRequest": 1545048811480,
                        "lifetime": 1545052411481,
                        "count": 3
                    }
                ],
                "webhooks": [],
                "sessions": [],
                "integrations": [],
                "api_keys": [],
                "mobiledoc_revisions": []
            }
        }
    ]
}